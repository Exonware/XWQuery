# sql.out.grammar
# SQL Output Grammar - Template for generating SQL from AST
# Compatible with ANSI SQL and T-SQL
# Company: eXonware.com
# Version: 1.0

# ============================================================================
# STATEMENT TEMPLATES
# ============================================================================

@select_statement = SELECT {{child_0}}{{child_1?}}{{child_2?}}{{child_3?}}{{child_4?}}{{child_5?}}{{child_6?}}

@select_list = {{#if wildcard}}*{{else}}{{child_0}}{{#each items}}{{#if !@first}}, {{/if}}{{value}}{{/each}}{{/if}}

@select_item = {{child_0}}{{#if child_1}} AS {{child_1}}{{/if}}

@from_clause =  FROM {{child_0}}

@table_reference_list = {{child_0}}{{#each items}}{{#if !@first}} {{/if}}{{value}}{{/each}}

@table_reference = {{child_0}}{{#if child_1}} {{child_1}}{{/if}}

@join_clause =  {{child_0?}}JOIN {{child_1}}{{#if child_2}} {{child_2}}{{/if}} ON {{child_3}}

@join_type = {{value}} 

@where_clause =  WHERE {{child_0}}

@group_by_clause =  GROUP BY {{child_0}}{{#each items}}{{#if !@first}}, {{/if}}{{value}}{{/each}}

@having_clause =  HAVING {{child_0}}

@order_by_clause =  ORDER BY {{child_0}}{{#each items}}{{#if !@first}}, {{/if}}{{value}}{{/each}}

@order_item = {{child_0}}{{#if child_1}} {{child_1}}{{/if}}

@limit_clause =  LIMIT {{child_0}}{{#if child_1}} OFFSET {{child_1}}{{/if}}

# ============================================================================
# INSERT STATEMENT
# ============================================================================

@insert_statement = INSERT INTO {{child_0}}{{#if child_1}} ({{child_1}}){{/if}} {{child_2}}

@values_clause = VALUES {{#each value_lists}}({{values}}){{#if !@last}}, {{/if}}{{/each}}

@column_list = {{#each columns}}{{value}}{{#if !@last}}, {{/if}}{{/each}}

# ============================================================================
# UPDATE STATEMENT
# ============================================================================

@update_statement = UPDATE {{child_0}} SET {{child_1}}{{child_2?}}

@assignment_list = {{#each assignments}}{{column}} = {{value}}{{#if !@last}}, {{/if}}{{/each}}

@assignment = {{child_0}} = {{child_1}}

# ============================================================================
# DELETE STATEMENT
# ============================================================================

@delete_statement = DELETE FROM {{child_0}}{{child_1?}}

# ============================================================================
# CREATE STATEMENT
# ============================================================================

@create_statement = CREATE {{child_0}} {{child_1}} ({{child_2?}})

@column_def_list = {{#each defs}}{{value}}{{#if !@last}}, {{/if}}{{/each}}

@column_def = {{child_0}} {{child_1}}{{#each constraints}} {{value}}{{/each}}

@data_type = {{type_name}}{{#if params}}({{params}}){{/if}}

# ============================================================================
# ALTER STATEMENT
# ============================================================================

@alter_statement = ALTER TABLE {{child_0}} {{child_1}}

@alter_action = {{action_type}} {{details}}

# ============================================================================
# DROP STATEMENT
# ============================================================================

@drop_statement = DROP {{child_0}} {{child_1}}

# ============================================================================
# EXPRESSIONS
# ============================================================================

@expression = {{value}}

@logical_or = {{child_0}}{{#if child_2}} OR {{child_2}}{{/if}}

@logical_and = {{child_0}}{{#if child_2}} AND {{child_2}}{{/if}}

@comparison = {{child_0}} {{child_1}} {{child_2}}

@compare_op = {{value}}

@addition = {{child_0}}{{#if child_1}} {{child_1}} {{child_2}}{{/if}}

@multiplication = {{child_0}}{{#if child_1}} {{child_1}} {{child_2}}{{/if}}

@unary = {{#if operator}}{{operator}} {{/if}}{{child_0}}

@atom = {{value}}

@column_reference = {{#if table_name}}{{table_name}}.{{/if}}{{column_name}}

@function_call = {{function_name}}({{#if arguments}}{{arguments|comma_list}}{{/if}})

@subquery = ({{child_0}})

@expression_list = {{#each expressions}}{{value}}{{#if !@last}}, {{/if}}{{/each}}

# ============================================================================
# NAMES AND LITERALS
# ============================================================================

@table_name = {{value}}

@column_name = {{value}}

@alias = {{value}}

@function_name = {{value}}

@identifier = {{value}}

@string = {{value}}

@number = {{value}}

# ============================================================================
# FORMATTING RULES
# ============================================================================

@indent = 2
@pretty = false
@line_width = 80

