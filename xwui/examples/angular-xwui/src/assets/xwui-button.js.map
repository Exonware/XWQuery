{"version":3,"file":"xwui-button.js","sources":["../../../../src/components/component/XWUIComponent/XWUIComponent.ts","../../../../src/components/component/XWUIItem/XWUIItem.ts","../../../../src/components/component/XWUIButton/XWUIButton.ts","../../../../src/components/component/XWUIComponent/XWUIComponent.element.ts","../../../../src/components/component/XWUIButton/index.ts","../../xwui-button-bootstrap.ts","../../../../src/components/component/XWUITooltip/XWUITooltip.ts","../../../../src/components/component/XWUITooltip/index.ts"],"sourcesContent":["/**\r\n * XWUIComponent Base Class\r\n * Base class for all XWUI components providing common configuration pattern:\r\n * - conf_sys: System-level configuration (admin-editable)\r\n * - conf_usr: User-level configuration (user preferences)\r\n * - conf_comp: Component-level configuration (instance-specific)\r\n * - schema: JSON schema path\r\n * - data: Component data\r\n */\r\n\r\n// System-level configuration (admin-editable, visual formats only)\r\nexport interface XWUISystemConfig {\r\n    locale?: string;\r\n    timezone?: string;\r\n    direction?: 'ltr' | 'rtl';\r\n    cookies?: boolean; // Enable cookie persistence for all components\r\n    cookiesShared?: boolean; // If true, share data across all instances of same component type\r\n    formats?: {\r\n        date?: string;\r\n        time?: string;\r\n        datetime?: string;\r\n        currency?: {\r\n            defaultSymbol?: string;\r\n            defaultDecimals?: number;\r\n        };\r\n        number?: {\r\n            defaultDecimals?: number;\r\n            useGrouping?: boolean;\r\n        };\r\n        percentage?: {\r\n            defaultDecimals?: number;\r\n        };\r\n        fileSize?: {\r\n            defaultUnit?: 'bytes' | 'auto';\r\n            defaultDecimals?: number;\r\n        };\r\n        duration?: {\r\n            defaultUnit?: 'seconds' | 'minutes' | 'hours' | 'auto';\r\n            defaultFormat?: 'short' | 'long';\r\n        };\r\n    };\r\n}\r\n\r\n// User-level configuration (user preferences, visual formats only)\r\nexport interface XWUIUserConfig {\r\n    locale?: string;\r\n    timezone?: string;\r\n    direction?: 'ltr' | 'rtl';\r\n    cookies?: boolean; // Enable cookie persistence for all components\r\n    cookiesShared?: boolean; // If true, share data across all instances of same component type\r\n    formats?: {\r\n        date?: string;\r\n        time?: string;\r\n        datetime?: string;\r\n        currency?: {\r\n            defaultSymbol?: string;\r\n            defaultDecimals?: number;\r\n        };\r\n        number?: {\r\n            defaultDecimals?: number;\r\n            useGrouping?: boolean;\r\n        };\r\n        percentage?: {\r\n            defaultDecimals?: number;\r\n        };\r\n        fileSize?: {\r\n            defaultUnit?: 'bytes' | 'auto';\r\n            defaultDecimals?: number;\r\n        };\r\n        duration?: {\r\n            defaultUnit?: 'seconds' | 'minutes' | 'hours' | 'auto';\r\n            defaultFormat?: 'short' | 'long';\r\n        };\r\n    };\r\n}\r\n\r\n/**\r\n * Base class for all XWUI components\r\n * Provides common configuration pattern and utilities\r\n * \r\n * Standard inputs:\r\n * - container: parent item it is inside (built-in, automatically available)\r\n * - schema: loads from *.schema.json in the same folder of the component\r\n * - conf_sys: system configuration (localizations, theme, etc.)\r\n * - conf_usr: user configuration (user info, overrides, etc.)\r\n * - conf_comp: component settings (set when initializing the component)\r\n * - data: data to update the component (set when initializing the component)\r\n */\r\nexport abstract class XWUIComponent<TData = any, TConfig = any> {\r\n    public readonly container: HTMLElement;\r\n    public readonly schema: string;\r\n    public readonly uid: string;\r\n    public data: TData;\r\n    public config: TConfig;\r\n    public readonly conf_sys?: XWUISystemConfig;\r\n    public readonly conf_usr?: XWUIUserConfig;\r\n    protected effectiveConfig: XWUISystemConfig;\r\n    \r\n    /**\r\n     * Collection of child XWUI components that should be automatically destroyed\r\n     * when this component is destroyed. Components should register child components\r\n     * using registerChildComponent() method.\r\n     */\r\n    protected childComponents: Set<XWUIComponent<any, any>> = new Set();\r\n\r\n    /**\r\n     * Static base path for CSS files\r\n     * Can be set globally to control where component CSS files are loaded from\r\n     * Defaults to auto-detection based on script location\r\n     */\r\n    public static cssBasePath: string | null = null;\r\n\r\n    /**\r\n     * Static component name - must be set by each component class\r\n     * This survives minification because it's set at class definition time\r\n     * Each component should set this after class definition:\r\n     * (ComponentName as any).componentName = 'ComponentName';\r\n     */\r\n    public static readonly componentName: string;\r\n\r\n    /**\r\n     * Track loaded CSS links for cleanup on destroy\r\n     */\r\n    private loadedCSSLinks: HTMLLinkElement[] = [];\r\n    \r\n    /**\r\n     * Cookie persistence enabled flag\r\n     */\r\n    private cookiesEnabled: boolean = false;\r\n    \r\n    /**\r\n     * Component storage key (component name + uid for unique identification)\r\n     */\r\n    private storageKey: string = '';\r\n    \r\n    /**\r\n     * Flag to prevent recursive saves when loading from storage\r\n     */\r\n    private isLoadingFromStorage: boolean = false;\r\n\r\n    /**\r\n     * Generate a unique identifier\r\n     */\r\n    private static generateUID(): string {\r\n        return `${Date.now()}-${Math.random().toString(36).substring(2, 11)}`;\r\n    }\r\n\r\n    /**\r\n     * Ensure data has a uid property (auto-generate if missing)\r\n     */\r\n    private static ensureUID<T>(data: any, existingUID?: string): { data: T; uid: string } {\r\n        // Check if data is an object with a uid property\r\n        if (data && typeof data === 'object') {\r\n            // If data already has a uid, use it\r\n            if (data.uid && typeof data.uid === 'string') {\r\n                return { data, uid: data.uid };\r\n            }\r\n            \r\n            // If provided via existingUID parameter, use it\r\n            if (existingUID && typeof existingUID === 'string') {\r\n                return { data: { ...data, uid: existingUID }, uid: existingUID };\r\n            }\r\n            \r\n            // Auto-generate uid\r\n            const uid = XWUIComponent.generateUID();\r\n            return { data: { ...data, uid }, uid };\r\n        }\r\n        \r\n        // For non-object data, generate uid separately\r\n        const uid = existingUID || XWUIComponent.generateUID();\r\n        return { data, uid };\r\n    }\r\n\r\n    constructor(\r\n        container: HTMLElement,\r\n        data: TData,\r\n        conf_comp?: TConfig,\r\n        conf_sys?: XWUISystemConfig,\r\n        conf_usr?: XWUIUserConfig\r\n    ) {\r\n        this.container = container;\r\n        this.conf_sys = conf_sys;\r\n        this.conf_usr = conf_usr;\r\n        \r\n        // Automatically determine schema path from component class name\r\n        // Use static componentName (survives minification) with fallback to constructor.name\r\n        // e.g., \"XWUIScriptEditor\" -> \"./XWUIScriptEditor.schema.json\"\r\n        const componentName = (this.constructor as any).componentName || this.constructor.name;\r\n        this.schema = `./${componentName}.schema.json`;\r\n        \r\n        // Ensure uid exists in data or generate one\r\n        const { data: dataWithUID, uid } = XWUIComponent.ensureUID<TData>(data);\r\n        this.data = dataWithUID;\r\n        this.uid = uid;\r\n        \r\n        // Merge configs with priority: conf_comp > conf_usr > conf_sys\r\n        this.effectiveConfig = this.mergeConfigs(conf_comp, conf_usr, conf_sys);\r\n        \r\n        // Set config (subclasses should override this)\r\n        this.config = this.createConfig(conf_comp, conf_usr, conf_sys);\r\n        \r\n        // Determine if cookies are enabled (conf_comp > conf_usr > conf_sys)\r\n        const confCompCookies = (conf_comp as any)?.cookies;\r\n        this.cookiesEnabled = confCompCookies ?? conf_usr?.cookies ?? conf_sys?.cookies ?? false;\r\n        \r\n        // Generate storage key based on ID if available, otherwise use component name\r\n        // (componentName was already declared above on line 188)\r\n        // Check if data has an 'id' property (for ID-based storage)\r\n        const dataId = (this.data as any)?.id;\r\n        if (this.cookiesEnabled && dataId && typeof dataId === 'string') {\r\n            // Use ID from data (e.g., \"xwui-style-testers\")\r\n            this.storageKey = dataId;\r\n        } else {\r\n            // Fallback: use component name + uid for instance-specific storage\r\n            this.storageKey = `xwui-${componentName.toLowerCase()}-${this.uid}`;\r\n        }\r\n        \r\n        // Load data from cookies if enabled\r\n        if (this.cookiesEnabled) {\r\n            this.loadDataFromCookies();\r\n            this.setupCrossTabSync();\r\n        }\r\n\r\n        // Automatically load component CSS\r\n        this.loadComponentCSS();\r\n    }\r\n    \r\n    /**\r\n     * Cookie utility functions (protected so subclasses can use them)\r\n     */\r\n    protected static setCookie(name: string, value: string, days: number = 365): void {\r\n        const expires = new Date();\r\n        expires.setTime(expires.getTime() + (days * 24 * 60 * 60 * 1000));\r\n        document.cookie = `${name}=${encodeURIComponent(value)};expires=${expires.toUTCString()};path=/`;\r\n    }\r\n    \r\n    protected static getCookie(name: string): string | null {\r\n        const nameEQ = name + '=';\r\n        const ca = document.cookie.split(';');\r\n        for (let i = 0; i < ca.length; i++) {\r\n            let c = ca[i];\r\n            while (c.charAt(0) === ' ') c = c.substring(1, c.length);\r\n            if (c.indexOf(nameEQ) === 0) {\r\n                return decodeURIComponent(c.substring(nameEQ.length, c.length));\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    \r\n    /**\r\n     * Load data from cookies/localStorage\r\n     * Subclasses can override to load additional state\r\n     */\r\n    protected loadDataFromCookies(): void {\r\n        if (!this.cookiesEnabled || !this.storageKey) return;\r\n        \r\n        // Set flag to prevent recursive saves\r\n        this.isLoadingFromStorage = true;\r\n        \r\n        try {\r\n            // Try localStorage first (for cross-tab sync), then cookies\r\n            let savedData: string | null = null;\r\n            try {\r\n                savedData = localStorage.getItem(this.storageKey);\r\n            } catch (e) {\r\n                // localStorage might not be available\r\n            }\r\n            \r\n            if (!savedData) {\r\n                savedData = XWUIComponent.getCookie(this.storageKey);\r\n            }\r\n            \r\n            if (savedData) {\r\n                try {\r\n                    const parsedData = JSON.parse(savedData);\r\n                    // Merge saved data with current data (saved data takes precedence)\r\n                    // This ensures loaded data overwrites any defaults\r\n                    this.data = { ...this.data, ...parsedData };\r\n                } catch (e) {\r\n                    console.warn(`Failed to parse saved data for ${this.storageKey}:`, e);\r\n                }\r\n            }\r\n        } finally {\r\n            // Reset flag after loading\r\n            this.isLoadingFromStorage = false;\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Save data to cookies/localStorage\r\n     * Automatically triggers sync events - all components with matching ID will update\r\n     */\r\n    protected saveDataToCookies(): void {\r\n        if (!this.cookiesEnabled || !this.storageKey || this.isLoadingFromStorage) return;\r\n        \r\n        try {\r\n            const dataStr = JSON.stringify(this.data);\r\n            \r\n            // Save to both cookies and localStorage\r\n            XWUIComponent.setCookie(this.storageKey, dataStr);\r\n            localStorage.setItem(this.storageKey, dataStr);\r\n            \r\n            // Trigger cross-tab sync (fires in other tabs/windows)\r\n            localStorage.setItem(`${this.storageKey}-updated`, Date.now().toString());\r\n            \r\n            // Trigger same-page sync (fires immediately for components on same page)\r\n            const eventName = `xwui-sync-${this.storageKey}`;\r\n            window.dispatchEvent(new Event(eventName));\r\n        } catch (e) {\r\n            console.warn(`Failed to save data for ${this.storageKey}:`, e);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Get storage key for this component (useful for subclasses)\r\n     */\r\n    protected getStorageKey(): string {\r\n        return this.storageKey;\r\n    }\r\n    \r\n    /**\r\n     * Setup automatic synchronization for components with matching IDs\r\n     * Uses event-based sync (both same-page and cross-tab)\r\n     */\r\n    private setupCrossTabSync(): void {\r\n        if (!this.cookiesEnabled || !this.storageKey) return;\r\n        \r\n        const storageKey = this.storageKey;\r\n        const component = this;\r\n        \r\n        // Handle data updates from any source (same-page or cross-tab)\r\n        const handleUpdate = () => {\r\n            if (component.isLoadingFromStorage) return; // Prevent recursive updates\r\n            component.loadDataFromCookies();\r\n            component.onDataReloaded();\r\n        };\r\n        \r\n        // Listen for cross-tab updates (storage events only fire in other tabs)\r\n        const storageHandler = (event: StorageEvent) => {\r\n            if (event.key === `${storageKey}-updated` && event.newValue) {\r\n                handleUpdate();\r\n            }\r\n        };\r\n        window.addEventListener('storage', storageHandler);\r\n        \r\n        // Listen for same-page updates (fires immediately when component with same ID updates)\r\n        const eventName = `xwui-sync-${storageKey}`;\r\n        const customEventHandler = () => {\r\n            handleUpdate();\r\n        };\r\n        window.addEventListener(eventName, customEventHandler);\r\n        \r\n        // Store handlers for potential cleanup\r\n        (this as any)._storageHandler = storageHandler;\r\n        (this as any)._customEventHandler = customEventHandler;\r\n        (this as any)._syncEventName = eventName;\r\n    }\r\n    \r\n    /**\r\n     * Called when data is reloaded from storage (cross-tab sync)\r\n     * Subclasses can override this to react to data changes\r\n     */\r\n    protected onDataReloaded(): void {\r\n        // Default implementation does nothing\r\n        // Subclasses can override to update UI, etc.\r\n    }\r\n    \r\n    /**\r\n     * Update component data and save to cookies if enabled\r\n     * Use this method instead of directly modifying this.data to ensure cookies are saved\r\n     */\r\n    public updateData(updates: Partial<TData>): void {\r\n        // Merge updates into existing data\r\n        this.data = { ...this.data, ...updates };\r\n        \r\n        // Save to cookies/localStorage if enabled (triggers sync automatically)\r\n        if (this.cookiesEnabled) {\r\n            this.saveDataToCookies();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Merge configurations with priority: conf_comp > conf_usr > conf_sys\r\n     */\r\n    protected mergeConfigs(\r\n        conf_comp?: any,\r\n        conf_usr?: XWUIUserConfig,\r\n        conf_sys?: XWUISystemConfig\r\n    ): XWUISystemConfig {\r\n        const merged: XWUISystemConfig = {\r\n            locale: conf_comp?.locale || conf_usr?.locale || conf_sys?.locale || 'en-US',\r\n            timezone: conf_comp?.timezone || conf_usr?.timezone || conf_sys?.timezone || 'UTC',\r\n            direction: conf_comp?.direction || conf_usr?.direction || conf_sys?.direction || 'ltr',\r\n            formats: {\r\n                date: conf_comp?.formats?.date || conf_usr?.formats?.date || conf_sys?.formats?.date || 'YYYY-MM-DD',\r\n                time: conf_comp?.formats?.time || conf_usr?.formats?.time || conf_sys?.formats?.time || 'HH:mm:ss',\r\n                datetime: conf_comp?.formats?.datetime || conf_usr?.formats?.datetime || conf_sys?.formats?.datetime || 'YYYY-MM-DD HH:mm:ss',\r\n                currency: {\r\n                    defaultSymbol: conf_comp?.formats?.currency?.defaultSymbol || \r\n                                 conf_usr?.formats?.currency?.defaultSymbol || \r\n                                 conf_sys?.formats?.currency?.defaultSymbol || '$',\r\n                    defaultDecimals: conf_comp?.formats?.currency?.defaultDecimals ?? \r\n                                   conf_usr?.formats?.currency?.defaultDecimals ?? \r\n                                   conf_sys?.formats?.currency?.defaultDecimals ?? 2\r\n                },\r\n                number: {\r\n                    defaultDecimals: conf_comp?.formats?.number?.defaultDecimals ?? \r\n                                   conf_usr?.formats?.number?.defaultDecimals ?? \r\n                                   conf_sys?.formats?.number?.defaultDecimals ?? 2,\r\n                    useGrouping: conf_comp?.formats?.number?.useGrouping ?? \r\n                               conf_usr?.formats?.number?.useGrouping ?? \r\n                               conf_sys?.formats?.number?.useGrouping ?? true\r\n                },\r\n                percentage: {\r\n                    defaultDecimals: conf_comp?.formats?.percentage?.defaultDecimals ?? \r\n                                   conf_usr?.formats?.percentage?.defaultDecimals ?? \r\n                                   conf_sys?.formats?.percentage?.defaultDecimals ?? 1\r\n                },\r\n                fileSize: {\r\n                    defaultUnit: conf_comp?.formats?.fileSize?.defaultUnit || \r\n                               conf_usr?.formats?.fileSize?.defaultUnit || \r\n                               conf_sys?.formats?.fileSize?.defaultUnit || 'auto',\r\n                    defaultDecimals: conf_comp?.formats?.fileSize?.defaultDecimals ?? \r\n                                   conf_usr?.formats?.fileSize?.defaultDecimals ?? \r\n                                   conf_sys?.formats?.fileSize?.defaultDecimals ?? 2\r\n                },\r\n                duration: {\r\n                    defaultUnit: conf_comp?.formats?.duration?.defaultUnit || \r\n                               conf_usr?.formats?.duration?.defaultUnit || \r\n                               conf_sys?.formats?.duration?.defaultUnit || 'auto',\r\n                    defaultFormat: conf_comp?.formats?.duration?.defaultFormat || \r\n                                 conf_usr?.formats?.duration?.defaultFormat || \r\n                                 conf_sys?.formats?.duration?.defaultFormat || 'short'\r\n                }\r\n            }\r\n        };\r\n        return merged;\r\n    }\r\n\r\n    /**\r\n     * Create component-specific config\r\n     * Subclasses should override this to merge their specific config\r\n     */\r\n    protected abstract createConfig(\r\n        conf_comp?: any,\r\n        conf_usr?: XWUIUserConfig,\r\n        conf_sys?: XWUISystemConfig\r\n    ): TConfig;\r\n\r\n    /**\r\n     * Load system configuration from JSON file\r\n     */\r\n    public static async loadSystemConfig(path: string = './data/conf_sys.json'): Promise<XWUISystemConfig | undefined> {\r\n        try {\r\n            const response = await fetch(path);\r\n            if (!response.ok) {\r\n                return undefined;\r\n            }\r\n            return await response.json() as XWUISystemConfig;\r\n        } catch {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Load user configuration from JSON file\r\n     */\r\n    public static async loadUserConfig(path: string = './data/conf_usr.json'): Promise<XWUIUserConfig | undefined> {\r\n        try {\r\n            const response = await fetch(path);\r\n            if (!response.ok) {\r\n                return undefined;\r\n            }\r\n            return await response.json() as XWUIUserConfig;\r\n        } catch {\r\n            return undefined;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get effective configuration (merged)\r\n     */\r\n    public getEffectiveConfig(): XWUISystemConfig {\r\n        return this.effectiveConfig;\r\n    }\r\n\r\n    /**\r\n     * Get effective direction\r\n     */\r\n    public getDirection(): 'ltr' | 'rtl' {\r\n        return this.effectiveConfig.direction || 'ltr';\r\n    }\r\n\r\n    /**\r\n     * Get effective locale\r\n     */\r\n    public getLocale(): string {\r\n        return this.effectiveConfig.locale || 'en-US';\r\n    }\r\n\r\n    /**\r\n     * Get effective timezone\r\n     */\r\n    public getTimezone(): string {\r\n        return this.effectiveConfig.timezone || 'UTC';\r\n    }\r\n\r\n    /**\r\n     * Convert PascalCase class name to kebab-case custom element name\r\n     * e.g., \"XWUIScriptEditor\" -> \"xwui-script-editor\"\r\n     */\r\n    private static toKebabCase(str: string): string {\r\n        return str\r\n            .replace(/([A-Z])([A-Z])([a-z])/g, '$1-$2$3') // Handle consecutive capitals\r\n            .replace(/([a-z])([A-Z])/g, '$1-$2') // Handle camelCase\r\n            .toLowerCase();\r\n    }\r\n\r\n    /**\r\n     * Detect base path for CSS files\r\n     * Tries to determine the correct path based on current page location\r\n     * Prioritizes current page location over script URLs to work correctly with Vite\r\n     */\r\n    private static detectCSSBasePath(): string {\r\n        // If static base path is set, use it (highest priority)\r\n        if (XWUIComponent.cssBasePath) {\r\n            return XWUIComponent.cssBasePath;\r\n        }\r\n\r\n        // PRIORITY 1: Detect from current page location (most reliable for Vite)\r\n        const currentPath = window.location.pathname;\r\n        \r\n        // If page is in dist/, calculate relative path to src/components\r\n        if (currentPath.includes('/dist/')) {\r\n            const distIndex = currentPath.indexOf('/dist/');\r\n            const pathAfterDist = currentPath.substring(distIndex + '/dist/'.length);\r\n            // Count depth: e.g., \"src/components/XWUITester/testers/file.html\" = 4 levels\r\n            const depth = (pathAfterDist.match(/\\//g) || []).length;\r\n            // Go up to dist root, then to src/components\r\n            return '../'.repeat(depth) + 'src/components';\r\n        }\r\n        \r\n        // If page is in src/, calculate relative path to components\r\n        if (currentPath.includes('/src/')) {\r\n            // Get the directory of the current page (remove filename)\r\n            const lastSlash = currentPath.lastIndexOf('/');\r\n            const currentDir = lastSlash > 0 ? currentPath.substring(0, lastSlash) : currentPath;\r\n            \r\n            // Find where we are relative to /src/components/\r\n            if (currentDir.includes('/src/components/')) {\r\n                // We're inside src/components/, calculate relative path to components root\r\n                // e.g., if we're at \"src/components/XWUITester/testers/\"\r\n                // we need to go up 2 levels to get to \"src/components/\"\r\n                const componentsIndex = currentDir.indexOf('/src/components/');\r\n                const pathAfterComponents = currentDir.substring(componentsIndex + '/src/components/'.length);\r\n                \r\n                // Count directories after components/ (e.g., \"XWUITester/testers\" = 2 levels)\r\n                // We need to go up that many levels to reach components/\r\n                const depth = pathAfterComponents ? (pathAfterComponents.match(/\\//g) || []).length + 1 : 0;\r\n                \r\n                // Return path that goes up to components/ directory\r\n                // This will be used as: basePath + \"/XWUIButton/XWUIButton.css\"\r\n                // So if basePath is \"../../\", result is \"../../XWUIButton/XWUIButton.css\" âœ“\r\n                return '../'.repeat(depth);\r\n            } else {\r\n                // We're in src/ but not in components/, need to navigate to components\r\n                const srcIndex = currentDir.indexOf('/src/');\r\n                const pathAfterSrc = currentDir.substring(srcIndex + '/src/'.length);\r\n                const depth = pathAfterSrc ? (pathAfterSrc.match(/\\//g) || []).length + 1 : 0;\r\n                \r\n                // Go up to src/, then to components\r\n                return '../'.repeat(depth) + 'components';\r\n            }\r\n        }\r\n\r\n        // PRIORITY 2: Try to detect from script tags (fallback)\r\n        const scripts = document.getElementsByTagName('script');\r\n        for (let i = 0; i < scripts.length; i++) {\r\n            const src = scripts[i].src;\r\n            if (!src) continue;\r\n            \r\n            // Only use script detection if current page path didn't give us a result\r\n            // Skip if script is from Vite's virtual modules (they contain @vite or @fs)\r\n            if (src.includes('@vite') || src.includes('@fs') || src.includes('?html-proxy')) {\r\n                continue;\r\n            }\r\n            \r\n            try {\r\n                const scriptUrl = new URL(src, window.location.href);\r\n                const scriptPath = scriptUrl.pathname;\r\n                \r\n                // If script is in src/components/, calculate relative path\r\n                if (scriptPath.includes('/src/components/')) {\r\n                    const componentsIndex = scriptPath.indexOf('/src/components/');\r\n                    const pathAfterComponents = scriptPath.substring(componentsIndex + '/src/components/'.length);\r\n                    // Get directory depth\r\n                    const lastSlash = pathAfterComponents.lastIndexOf('/');\r\n                    const dirPath = lastSlash > 0 ? pathAfterComponents.substring(0, lastSlash) : '';\r\n                    const depth = dirPath ? (dirPath.match(/\\//g) || []).length + 1 : 0;\r\n                    return '../'.repeat(depth);\r\n                }\r\n                \r\n                // If script is in dist/, calculate relative path to src/components\r\n                if (scriptPath.includes('/dist/')) {\r\n                    const distIndex = scriptPath.indexOf('/dist/');\r\n                    const pathAfterDist = scriptPath.substring(distIndex + '/dist/'.length);\r\n                    const depth = (pathAfterDist.match(/\\//g) || []).length;\r\n                    return '../'.repeat(depth) + 'src/components';\r\n                }\r\n            } catch (e) {\r\n                // If URL parsing fails, continue to next script\r\n                continue;\r\n            }\r\n        }\r\n\r\n        // Default fallback - try relative path\r\n        return '../components';\r\n    }\r\n\r\n    /**\r\n     * Load component CSS file automatically\r\n     * CSS file is expected to be at: {basePath}/{ComponentName}/{ComponentName}.css\r\n     * e.g., \"src/components/XWUIButton/XWUIButton.css\"\r\n     */\r\n    private loadComponentCSS(): void {\r\n        // Use static componentName (survives minification) with fallback to constructor.name\r\n        // Static properties set at class definition time survive minification\r\n        const componentName = (this.constructor as any).componentName || this.constructor.name;\r\n        \r\n        // Validate component name - if name is too short, it's likely minified\r\n        if (!componentName || componentName.length === 0) {\r\n            console.warn('XWUIComponent: Cannot load CSS - component name is empty');\r\n            return;\r\n        }\r\n        \r\n        // Warn if name is suspiciously short (likely minified)\r\n        if (componentName.length <= 1) {\r\n            console.warn('XWUIComponent: Component name appears to be minified:', componentName);\r\n            console.warn('XWUIComponent: Component class should set static componentName property to survive minification');\r\n            return;\r\n        }\r\n        \r\n        const cssFileName = `${componentName}.css`;\r\n        const cssId = `xwui-css-${componentName.toLowerCase()}`;\r\n\r\n        // Check if CSS is already loaded (by ID or by href containing the CSS file)\r\n        const existingLinkById = document.getElementById(cssId);\r\n        if (existingLinkById) {\r\n            return; // Already loaded\r\n        }\r\n\r\n        // Check if CSS is already loaded via HTML link tag\r\n        const allLinks = document.querySelectorAll('link[rel=\"stylesheet\"]');\r\n        for (let i = 0; i < allLinks.length; i++) {\r\n            const href = (allLinks[i] as HTMLLinkElement).href;\r\n            if (href && href.includes(cssFileName)) {\r\n                return; // CSS already loaded\r\n            }\r\n        }\r\n\r\n        // Get base path\r\n        const basePath = XWUIComponent.detectCSSBasePath();\r\n\r\n        // Construct CSS path - ensure proper path separator\r\n        // e.g., \"src/components/XWUIButton/XWUIButton.css\" or \"../../XWUIButton/XWUIButton.css\"\r\n        const normalizedBasePath = basePath.replace(/\\/+$/, ''); // Remove trailing slashes\r\n        \r\n        // Build the full CSS path\r\n        // If basePath ends with a slash or is empty, don't add another slash\r\n        const separator = normalizedBasePath && !normalizedBasePath.endsWith('/') ? '/' : '';\r\n        const cssPath = normalizedBasePath + separator + componentName + '/' + cssFileName;\r\n\r\n        // Resolve path to absolute URL\r\n        // For relative paths (starting with ../), resolve relative to current page\r\n        // For absolute paths (starting with /), use as-is\r\n        let resolvedPath: string;\r\n        try {\r\n            if (cssPath.startsWith('/')) {\r\n                // Absolute path - use as-is (but resolve relative to origin)\r\n                resolvedPath = new URL(cssPath, window.location.origin).href;\r\n            } else if (cssPath.startsWith('../') || cssPath.startsWith('./')) {\r\n                // Relative path - resolve relative to current page location\r\n                resolvedPath = new URL(cssPath, window.location.href).href;\r\n            } else {\r\n                // Relative path without ./ prefix - resolve relative to current page\r\n                resolvedPath = new URL('./' + cssPath, window.location.href).href;\r\n            }\r\n        } catch (e) {\r\n            // If URL resolution fails, log error and use path as-is\r\n            console.warn(`XWUIComponent: Failed to resolve CSS path for ${componentName}:`, cssPath, e);\r\n            resolvedPath = cssPath;\r\n        }\r\n        \r\n        // Debug logging (can be removed in production)\r\n        if (typeof window !== 'undefined' && (window as any).__XWUI_DEBUG__) {\r\n            console.log(`XWUIComponent: Loading CSS for ${componentName}`, {\r\n                basePath,\r\n                normalizedBasePath,\r\n                cssPath,\r\n                resolvedPath,\r\n                currentPage: window.location.pathname\r\n            });\r\n        }\r\n\r\n        // Create and append stylesheet link\r\n        const link = document.createElement('link');\r\n        link.id = cssId;\r\n        link.rel = 'stylesheet';\r\n        link.type = 'text/css';\r\n        link.href = resolvedPath;\r\n\r\n        // Add error handler to log if CSS fails to load\r\n        link.onerror = () => {\r\n            console.warn(`XWUIComponent: Failed to load CSS for ${componentName} from ${resolvedPath}`);\r\n        };\r\n\r\n        // Store reference for cleanup\r\n        this.loadedCSSLinks.push(link);\r\n\r\n        // Append to head\r\n        document.head.appendChild(link);\r\n    }\r\n\r\n    /**\r\n     * Unload component CSS files\r\n     * Removes CSS links that were loaded by this component instance\r\n     */\r\n    private unloadComponentCSS(): void {\r\n        this.loadedCSSLinks.forEach(link => {\r\n            if (link.parentNode) {\r\n                link.parentNode.removeChild(link);\r\n            }\r\n        });\r\n        this.loadedCSSLinks = [];\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    /**\r\n     * Register a child XWUI component for automatic cleanup\r\n     * When this component is destroyed, all registered child components\r\n     * will be automatically destroyed as well.\r\n     * \r\n     * @param component - The child XWUI component to register\r\n     * \r\n     * Example:\r\n     * ```typescript\r\n     * const button = new XWUIButton(container, { label: 'Click me' });\r\n     * this.registerChildComponent(button);\r\n     * // Now button will be automatically destroyed when this component is destroyed\r\n     * ```\r\n     */\r\n    protected registerChildComponent(component: XWUIComponent<any, any> | null | undefined): void {\r\n        if (component) {\r\n            this.childComponents.add(component);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Unregister a child component from automatic cleanup\r\n     * Use this if you manually destroy a child component before destroying the parent.\r\n     * \r\n     * @param component - The child component to unregister\r\n     */\r\n    protected unregisterChildComponent(component: XWUIComponent<any, any> | null | undefined): void {\r\n        if (component) {\r\n            this.childComponents.delete(component);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Automatically destroy all registered child components\r\n     * This is called automatically by destroy() before component-specific cleanup.\r\n     * Subclasses can also call this manually if needed.\r\n     */\r\n    protected destroyChildComponents(): void {\r\n        for (const child of this.childComponents) {\r\n            if (child) {\r\n                try {\r\n                    child.destroy();\r\n                } catch (error) {\r\n                    console.warn(`Error destroying child component:`, error);\r\n                }\r\n            }\r\n        }\r\n        this.childComponents.clear();\r\n    }\r\n\r\n    /**\r\n     * Destroy component and clean up resources\r\n     * \r\n     * This method MUST be implemented by all subclasses to:\r\n     * - Clean up event listeners\r\n     * - Clear DOM references\r\n     * - Clear timers/intervals\r\n     * - Set references to null\r\n     * \r\n     * NOTE: Child components registered via registerChildComponent() are\r\n     * automatically destroyed before this method is called. You don't need\r\n     * to manually destroy them unless you want custom cleanup order.\r\n     * \r\n     * Base implementation automatically destroys all registered child components.\r\n     * Subclasses should override to add component-specific cleanup logic.\r\n     * \r\n     * Example (using automatic child cleanup):\r\n     * ```typescript\r\n     * constructor(...) {\r\n     *     super(...);\r\n     *     this.button = new XWUIButton(container, { label: 'Click' });\r\n     *     this.registerChildComponent(this.button); // Register for auto-cleanup\r\n     *     this.dialog = new XWUIDialog(container, { title: 'Dialog' });\r\n     *     this.registerChildComponent(this.dialog); // Register for auto-cleanup\r\n     * }\r\n     * \r\n     * public destroy(): void {\r\n     *     // Child components (button, dialog) are automatically destroyed\r\n     *     // Just clean up other resources:\r\n     *     this.eventListeners.forEach(listener => {\r\n     *         listener.element.removeEventListener(listener.event, listener.handler);\r\n     *     });\r\n     *     this.eventListeners = [];\r\n     *     // Clear references\r\n     *     this.button = null;\r\n     *     this.dialog = null;\r\n     * }\r\n     * ```\r\n     * \r\n     * Example (manual child cleanup - if you need custom order):\r\n     * ```typescript\r\n     * public destroy(): void {\r\n     *     // Destroy child components manually (in specific order if needed)\r\n     *     if (this.dialog) {\r\n     *         this.dialog.destroy();\r\n     *         this.unregisterChildComponent(this.dialog);\r\n     *     }\r\n     *     if (this.button) {\r\n     *         this.button.destroy();\r\n     *         this.unregisterChildComponent(this.button);\r\n     *     }\r\n     *     // Then call parent to clean up any remaining registered children\r\n     *     super.destroy();\r\n     * }\r\n     * ```\r\n     */\r\n    public destroy(): void {\r\n        // Automatically destroy all registered child components\r\n        this.destroyChildComponents();\r\n        \r\n        // Unload component CSS\r\n        this.unloadComponentCSS();\r\n        \r\n        // Subclasses should override to add component-specific cleanup\r\n    }\r\n\r\n    /**\r\n     * Register this component as a Custom Element\r\n     * Automatically called when component class is defined\r\n     * Uses the generic createXWUIElement factory\r\n     * \r\n     * Usage: Components should call this in their class definition:\r\n     * ```typescript\r\n     * export class MyComponent extends XWUIComponent {\r\n     *     // ... class implementation\r\n     * }\r\n     * XWUIComponent.registerCustomElement(MyComponent);\r\n     * ```\r\n     * \r\n     * Note: For new components, prefer using createXWUIElement() directly in index.ts\r\n     */\r\n    public static registerCustomElement<T extends XWUIComponent<any, any>>(\r\n        ComponentClass: new (container: HTMLElement, data?: any, conf_comp?: any, conf_sys?: XWUISystemConfig, conf_usr?: XWUIUserConfig) => T,\r\n        elementName?: string\r\n    ): void {\r\n        const className = ComponentClass.name;\r\n        const kebabName = elementName || this.toKebabCase(className);\r\n        \r\n        // Use the generic factory (dynamic import to avoid circular dependencies)\r\n        import('./XWUIComponent.element').then(({ createXWUIElement }) => {\r\n            createXWUIElement(ComponentClass, kebabName);\r\n        });\r\n    }\r\n}\r\n\r\n","/**\r\n * XWUIItem Component\r\n * A single item UI element that takes a JSON config and converts it into HTML\r\n * For multiple items, use XWUIItemGroup\r\n * \r\n * This component accepts exactly ONE JSON item configuration following the schema\r\n * defined in XWUIItem.schema.json\r\n * \r\n * @schema See XWUIItem.schema.json for the authoritative JSON schema\r\n */\r\n\r\nimport { XWUIComponent, type XWUISystemConfig, type XWUIUserConfig } from '../XWUIComponent/XWUIComponent';\r\n\r\n// --- TYPE DEFINITIONS ---\r\n\r\nexport type ItemSize = 'xs' | 's' | 'm' | 'l' | 'xl';\r\nexport type Direction = 'ltr' | 'rtl';\r\nexport type ContentPartType = 'text' | 'icon' | 'image' | 'progress_bar' | 'user_stack';\r\nexport type ItemType = 'card' | 'row' | 'banner' | 'search' | 'chat_bubble';\r\nexport type ItemStatus = 'before_start' | 'processing' | 'error' | 'pass';\r\n\r\nexport interface ContentPart {\r\n    type: ContentPartType;\r\n    value: any;\r\n    style?: string;\r\n    color?: string;\r\n    shape?: 'circle' | 'square';\r\n    // Text overflow options\r\n    textOverflow?: {\r\n        mode?: 'ellipsis' | 'expandable'; // 'ellipsis' = show \"...\", 'expandable' = show +/- button\r\n        maxLines?: number; // Maximum lines before overflow (default: 1 for ellipsis, 3 for expandable)\r\n        expanded?: boolean; // Initial expanded state (for expandable mode)\r\n    };\r\n}\r\n\r\nexport interface ItemConfig {\r\n    // Required fields\r\n    uid?: string; // Optional - auto-generated by XWUIComponent if not provided\r\n    id: string;\r\n    primaryContent: ContentPart[];\r\n    \r\n    // Content sections\r\n    avatarContent?: ContentPart[];\r\n    secondaryContent?: ContentPart[];\r\n    tertiaryContent?: ContentPart[];\r\n    primaryContent_other?: ContentPart[];\r\n    secondaryContent_other?: ContentPart[];\r\n    tertiaryContent_other?: ContentPart[];\r\n    \r\n    // Content section visibility (overrides component-level visibility)\r\n    contentVisibility?: {\r\n        avatarContent?: boolean | 'auto';\r\n        primaryContent?: boolean | 'auto';\r\n        primaryContent_other?: boolean | 'auto';\r\n        secondaryContent?: boolean | 'auto';\r\n        secondaryContent_other?: boolean | 'auto';\r\n        tertiaryContent?: boolean | 'auto';\r\n        tertiaryContent_other?: boolean | 'auto';\r\n    };\r\n    \r\n    // Layout and styling\r\n    item_type?: ItemType;\r\n    item_size?: ItemSize;\r\n    item_axis?: 'h' | 'v';\r\n    background_color?: string;\r\n    background_media_paths?: string[];\r\n    status?: ItemStatus;\r\n    \r\n    // States\r\n    itemStates?: {\r\n        isSelected?: boolean;\r\n        isExpanded?: boolean;\r\n        isFavorite?: boolean;\r\n        isArchived?: boolean;\r\n    };\r\n    \r\n    // Actions\r\n    itemActionsSettings?: {\r\n        canSelect?: boolean;\r\n        canDelete?: boolean;\r\n        canAdd?: boolean;\r\n        canEdit?: boolean;\r\n        canDrag?: boolean;\r\n        canClick?: boolean;\r\n        canRightClick?: boolean;\r\n        canArchive?: boolean;\r\n        canSave?: boolean;\r\n        canLoad?: boolean;\r\n        canFav?: boolean;\r\n        canMoreOptions?: boolean;\r\n        canSelectText?: boolean;\r\n    };\r\n    \r\n    // Action visibility (overrides component-level visibility)\r\n    actionVisibility?: {\r\n        checkbox?: boolean | 'auto';\r\n        dragHandle?: boolean | 'auto';\r\n        expandIcon?: boolean | 'auto';\r\n        actions?: boolean | 'auto';\r\n        addButton?: boolean | 'auto';\r\n        delete?: boolean | 'auto';\r\n        edit?: boolean | 'auto';\r\n        archive?: boolean | 'auto';\r\n        save?: boolean | 'auto';\r\n        load?: boolean | 'auto';\r\n        fav?: boolean | 'auto';\r\n        moreOptions?: boolean | 'auto';\r\n    };\r\n    \r\n    // Group-related (for XWUIItemGroup)\r\n    group_type?: 'collapsible_list' | 'inline_grid';\r\n    group_flow?: 'list' | 'table' | 'free' | 'grid';\r\n    group_axis?: 'v' | 'h';\r\n    group_stops?: boolean;\r\n    group_list?: ItemConfig[];\r\n    showWhenCollapsed?: boolean;\r\n    \r\n    // Action metadata\r\n    item_action?: string;\r\n}\r\n\r\n// Component-level configuration\r\nexport interface XWUIItemConfig {\r\n    // Visibility controls for each content section\r\n    visibility?: {\r\n        dragHandle?: boolean | 'auto';\r\n        expandIcon?: boolean | 'auto';\r\n        avatarContent?: boolean;\r\n        primaryContent?: boolean;\r\n        primaryContent_other?: boolean;\r\n        secondaryContent?: boolean;\r\n        secondaryContent_other?: boolean;\r\n        tertiaryContent?: boolean;\r\n        tertiaryContent_other?: boolean;\r\n        checkbox?: boolean | 'auto';\r\n        actions?: boolean | 'auto';\r\n        addButton?: boolean | 'auto';\r\n    };\r\n    \r\n    // Layout and behavior\r\n    isCollapsed?: boolean;\r\n    highlightedItem?: string | null;\r\n    language?: { [key: string]: string };\r\n    \r\n    // Event handlers\r\n    onItemClick?: (item: ItemConfig, event: MouseEvent) => void;\r\n    onItemRightClick?: (item: ItemConfig, event: MouseEvent) => void;\r\n    onItemAction?: (action: string, item: ItemConfig, event: MouseEvent) => void;\r\n    \r\n    // Console for error logging\r\n    console?: any;\r\n}\r\n\r\n// --- ICON MAPPING (SVG Icons) ---\r\n\r\nexport const ICON_SVGS: { [key: string]: string } = {\r\n    user: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"12\" cy=\"8\" r=\"4\"/><path d=\"M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2\"/></svg>',\r\n    mail: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><rect x=\"2\" y=\"4\" width=\"20\" height=\"16\" rx=\"2\"/><path d=\"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7\"/></svg>',\r\n    star: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><polygon points=\"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2\"/></svg>',\r\n    logout: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"/><polyline points=\"16 17 21 12 16 7\"/><line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\"/></svg>',\r\n    shield: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z\"/></svg>',\r\n    folder: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z\"/></svg>',\r\n    file: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"/><polyline points=\"14 2 14 8 20 8\"/></svg>',\r\n    settings: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"12\" cy=\"12\" r=\"3\"/><path d=\"M12 1v6m0 6v6m9-9h-6m-6 0H3m15.364 6.364L16.95 16.95m-9.9-9.9L7.05 7.05M18.364 5.636l-1.414 1.414M7.05 16.95l-1.414 1.414\"/></svg>',\r\n    edit: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><path d=\"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\"/><path d=\"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z\"/></svg>',\r\n    add: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"12\" cy=\"12\" r=\"10\"/><line x1=\"12\" y1=\"8\" x2=\"12\" y2=\"16\"/><line x1=\"8\" y1=\"12\" x2=\"16\" y2=\"12\"/></svg>',\r\n    trash: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><polyline points=\"3 6 5 6 21 6\"/><path d=\"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2\"/></svg>',\r\n    archive: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><polyline points=\"21 8 21 21 3 21 3 8\"/><rect x=\"1\" y=\"3\" width=\"22\" height=\"5\"/><line x1=\"10\" y1=\"12\" x2=\"14\" y2=\"12\"/></svg>',\r\n    more: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"12\" cy=\"12\" r=\"1\"/><circle cx=\"19\" cy=\"12\" r=\"1\"/><circle cx=\"5\" cy=\"12\" r=\"1\"/></svg>',\r\n    search: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><circle cx=\"11\" cy=\"11\" r=\"8\"/><path d=\"m21 21-4.35-4.35\"/></svg>',\r\n    chevronRight: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><polyline points=\"9 18 15 12 9 6\"/></svg>',\r\n    default: '<svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\"><polyline points=\"9 18 15 12 9 6\"/></svg>'\r\n};\r\n\r\nexport function getIconSVG(iconName?: string): string {\r\n    if (!iconName) return ICON_SVGS.default;\r\n    return ICON_SVGS[iconName.toLowerCase()] || ICON_SVGS.default;\r\n}\r\n\r\n// --- CONTENT PART RENDERER ---\r\n\r\nexport function renderContentPart(part: ContentPart, language?: { [key: string]: string }, canSelectText?: boolean, partIndex?: number): string {\r\n    const textSelectionClass = canSelectText ? 'xwui-item-select-text' : '';\r\n    \r\n    switch (part.type) {\r\n        case 'text':\r\n            let value = typeof part.value === 'string' ? part.value : JSON.stringify(part.value);\r\n            \r\n            // Apply language translation if available\r\n            if (language && language[value]) {\r\n                value = language[value];\r\n            }\r\n            \r\n            const styleClasses = [\r\n                part.style === 'bold' ? 'xwui-item-text-bold' : '',\r\n                part.style === 'subdued' ? 'xwui-item-text-subdued' : '',\r\n                part.style === 'timestamp' ? 'xwui-item-text-timestamp' : ''\r\n            ].filter(Boolean).join(' ');\r\n            \r\n            const colorStyle = part.color ? `color: ${part.color};` : '';\r\n            \r\n            // Handle text overflow\r\n            const overflow = part.textOverflow;\r\n            if (overflow && overflow.mode) {\r\n                const uniqueId = `text-overflow-${Date.now()}-${Math.random().toString(36).substr(2, 9)}-${partIndex || 0}`;\r\n                const maxLines = overflow.maxLines || (overflow.mode === 'ellipsis' ? 1 : 3);\r\n                const isExpanded = overflow.expanded === true;\r\n                \r\n                if (overflow.mode === 'ellipsis') {\r\n                    // Ellipsis mode: show \"...\" when text overflows\r\n                    return `<span class=\"xwui-item-text ${textSelectionClass} ${styleClasses} xwui-item-text-ellipsis\" style=\"${colorStyle}; --max-lines: ${maxLines}\" dir=\"auto\">${escapeHtml(value)}</span>`;\r\n                } else if (overflow.mode === 'expandable') {\r\n                    // Expandable mode: show +/- button\r\n                    const expandButton = `<button class=\"xwui-item-text-expand-btn\" data-text-id=\"${uniqueId}\" aria-label=\"${isExpanded ? 'Show less' : 'Show more'}\">${isExpanded ? 'âˆ’' : '+'}</button>`;\r\n                    return `<div class=\"xwui-item-text-expandable-wrapper\" data-text-id=\"${uniqueId}\">\r\n                        <span class=\"xwui-item-text ${textSelectionClass} ${styleClasses} xwui-item-text-expandable ${isExpanded ? 'xwui-item-text-expanded' : ''}\" style=\"${colorStyle}; --max-lines: ${maxLines}\" dir=\"auto\">${escapeHtml(value)}</span>\r\n                        ${expandButton}\r\n                    </div>`;\r\n                }\r\n            }\r\n            \r\n            return `<span class=\"xwui-item-text ${textSelectionClass} ${styleClasses}\" style=\"${colorStyle}\" dir=\"auto\">${escapeHtml(value)}</span>`;\r\n            \r\n        case 'icon':\r\n            const iconSVG = getIconSVG(part.value);\r\n            const iconColor = part.color ? `color: ${part.color};` : '';\r\n            return `<span class=\"xwui-item-icon\" style=\"${iconColor}\">${iconSVG}</span>`;\r\n            \r\n        case 'image':\r\n            const shapeClass = part.shape === 'circle' ? 'xwui-item-image-circle' : 'xwui-item-image-square';\r\n            return `<img src=\"${escapeHtml(part.value)}\" class=\"xwui-item-image ${shapeClass} ${textSelectionClass}\" alt=\"\" />`;\r\n            \r\n        case 'progress_bar':\r\n            const progress = typeof part.value === 'number' ? part.value : 0;\r\n            return `<div class=\"xwui-item-progress-bar\"><div class=\"xwui-item-progress-fill\" style=\"width: ${progress}%\"></div></div>`;\r\n            \r\n        case 'user_stack':\r\n            // Render multiple user avatars\r\n            const users = Array.isArray(part.value) ? part.value : [];\r\n            const userAvatars = users.slice(0, 3).map((user: any, idx: number) => {\r\n                const src = typeof user === 'string' ? user : user.avatar || user;\r\n                const offset = idx * -8;\r\n                return `<img src=\"${escapeHtml(src)}\" class=\"xwui-item-user-avatar\" data-user-index=\"${idx}\" style=\"z-index: ${10 - idx};\" alt=\"\" />`;\r\n            }).join('');\r\n            return `<div class=\"xwui-item-user-stack\">${userAvatars}</div>`;\r\n            \r\n        default:\r\n            return `<div class=\"${textSelectionClass}\">${escapeHtml(JSON.stringify(part.value))}</div>`;\r\n    }\r\n}\r\n\r\nexport function renderContentBlock(content?: ContentPart[], language?: { [key: string]: string }, canSelectText?: boolean, direction: Direction = 'ltr'): string {\r\n    if (!content || content.length === 0) return '';\r\n    \r\n    // DO NOT reverse the order of parts inside content-block\r\n    // Keep the same order for both LTR and RTL - let CSS and browser handle RTL naturally\r\n    const parts = content.map((part, index) => renderContentPart(part, language, canSelectText, index)).join('');\r\n    return `<div class=\"xwui-item-content-block\" dir=\"${direction}\">${parts}</div>`;\r\n}\r\n\r\n// --- HELPER FUNCTIONS ---\r\n\r\nfunction escapeHtml(text: string): string {\r\n    const div = document.createElement('div');\r\n    div.textContent = text;\r\n    return div.innerHTML;\r\n}\r\n\r\nfunction getSizeClasses(size?: ItemSize): string {\r\n    const sizeMap: Record<ItemSize, string> = {\r\n        xs: 'xwui-item-size-xs',\r\n        s: 'xwui-item-size-s',\r\n        m: 'xwui-item-size-m',\r\n        l: 'xwui-item-size-l',\r\n        xl: 'xwui-item-size-xl'\r\n    };\r\n    return sizeMap[size || 's'] || sizeMap.s;\r\n}\r\n\r\n// --- MAIN XWUIItem CLASS (Single Item Only) ---\r\n\r\nexport class XWUIItem extends XWUIComponent<ItemConfig, XWUIItemConfig> {\r\n    private itemElement: HTMLElement | null = null;\r\n\r\n    /**\r\n     * Creates an XWUIItem instance for a SINGLE item\r\n     * @param container - HTML element to render the item into\r\n     * @param data - Item data configuration\r\n     * @param conf_comp - Component-level configuration\r\n     * @param conf_sys - System-level configuration\r\n     * @param conf_usr - User-level configuration\r\n     */\r\n    constructor(\r\n        container: HTMLElement,\r\n        data: ItemConfig,\r\n        conf_comp?: XWUIItemConfig,\r\n        conf_sys?: XWUISystemConfig,\r\n        conf_usr?: XWUIUserConfig\r\n    ) {\r\n        super(container, data, conf_comp, conf_sys, conf_usr);\r\n        \r\n        // Ensure data has uid from base class\r\n        if (!this.data.uid) {\r\n            this.data.uid = this.uid;\r\n        }\r\n        \r\n        // Validate that we have exactly one item with required fields\r\n        this.validateItem(this.data);\r\n        \r\n        this.render();\r\n    }\r\n\r\n    /**\r\n     * Create component-specific config\r\n     */\r\n    protected createConfig(\r\n        conf_comp?: XWUIItemConfig,\r\n        conf_usr?: XWUIUserConfig,\r\n        conf_sys?: XWUISystemConfig\r\n    ): XWUIItemConfig {\r\n        return {\r\n            visibility: {\r\n                dragHandle: conf_comp?.visibility?.dragHandle ?? 'auto',\r\n                expandIcon: conf_comp?.visibility?.expandIcon ?? 'auto',\r\n                avatarContent: conf_comp?.visibility?.avatarContent ?? true,\r\n                primaryContent: conf_comp?.visibility?.primaryContent ?? true,\r\n                primaryContent_other: conf_comp?.visibility?.primaryContent_other ?? true,\r\n                secondaryContent: conf_comp?.visibility?.secondaryContent ?? true,\r\n                secondaryContent_other: conf_comp?.visibility?.secondaryContent_other ?? true,\r\n                tertiaryContent: conf_comp?.visibility?.tertiaryContent ?? true,\r\n                tertiaryContent_other: conf_comp?.visibility?.tertiaryContent_other ?? true,\r\n                checkbox: conf_comp?.visibility?.checkbox ?? 'auto',\r\n                actions: conf_comp?.visibility?.actions ?? 'auto',\r\n                addButton: conf_comp?.visibility?.addButton ?? 'auto'\r\n            },\r\n            isCollapsed: conf_comp?.isCollapsed ?? false,\r\n            highlightedItem: conf_comp?.highlightedItem ?? null,\r\n            language: conf_comp?.language,\r\n            onItemClick: conf_comp?.onItemClick,\r\n            onItemRightClick: conf_comp?.onItemRightClick,\r\n            onItemAction: conf_comp?.onItemAction,\r\n            console: conf_comp?.console\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Validates that the item follows the schema requirements\r\n     * Ensures required fields are present: uid (auto-generated if missing), id, primaryContent\r\n     */\r\n    private validateItem(item: ItemConfig): void {\r\n        try {\r\n            // uid is auto-generated by base class, just ensure it's a string\r\n            if (!item.uid || typeof item.uid !== 'string') {\r\n                // Use the base class uid if item doesn't have one\r\n                item.uid = this.uid;\r\n            }\r\n            if (!item.id || typeof item.id !== 'string') {\r\n                const error = new Error('XWUIItem: item.id is required and must be a string');\r\n                this.logError(error, item);\r\n                throw error;\r\n            }\r\n            if (!item.primaryContent || !Array.isArray(item.primaryContent) || item.primaryContent.length === 0) {\r\n                const error = new Error('XWUIItem: item.primaryContent is required and must be a non-empty array');\r\n                this.logError(error, item);\r\n                throw error;\r\n            }\r\n            \r\n            // Validate primaryContent items\r\n            item.primaryContent.forEach((part, index) => {\r\n                if (!part.type || !part.hasOwnProperty('value')) {\r\n                    const error = new Error(`XWUIItem: item.primaryContent[${index}] must have 'type' and 'value' properties`);\r\n                    this.logError(error, item, { part, index });\r\n                    throw error;\r\n                }\r\n            });\r\n        } catch (error) {\r\n            // Re-throw after logging\r\n            throw error;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Logs errors to the console if available\r\n     */\r\n    private logError(error: Error, item: ItemConfig, context?: any): void {\r\n        if (this.config.console && typeof this.config.console.error === 'function') {\r\n            const source = `XWUIItem[${item.id || item.uid || 'unknown'}]`;\r\n            const message = error.message;\r\n            const stack = error.stack;\r\n            const data = {\r\n                item: {\r\n                    uid: item.uid,\r\n                    id: item.id,\r\n                    item_type: item.item_type,\r\n                    item_size: item.item_size\r\n                },\r\n                ...(context ? { context } : {})\r\n            };\r\n            this.config.console.error(message, source, data, stack);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Check if a content section should be visible\r\n     */\r\n    private shouldShowContent(section: 'avatarContent' | 'primaryContent' | 'primaryContent_other' | 'secondaryContent' | 'secondaryContent_other' | 'tertiaryContent' | 'tertiaryContent_other', item: ItemConfig): boolean {\r\n        // Check item-level visibility first\r\n        const itemVisibility = item.contentVisibility?.[section];\r\n        if (itemVisibility !== undefined) {\r\n            if (itemVisibility === 'auto') {\r\n                // Auto logic: show if content exists\r\n                return !!item[section];\r\n            }\r\n            return itemVisibility;\r\n        }\r\n        \r\n        // Check component-level visibility\r\n        const compVisibility = this.config.visibility?.[section];\r\n        if (compVisibility !== undefined) {\r\n            if (typeof compVisibility === 'string' && compVisibility === 'auto') {\r\n                return !!item[section];\r\n            }\r\n            if (typeof compVisibility === 'boolean') {\r\n                return compVisibility;\r\n            }\r\n        }\r\n        \r\n        // Default: show if content exists\r\n        return !!item[section];\r\n    }\r\n\r\n    /**\r\n     * Check if an action should be visible\r\n     */\r\n    private shouldShowAction(action: 'checkbox' | 'dragHandle' | 'expandIcon' | 'actions' | 'addButton' | 'delete' | 'edit' | 'archive' | 'save' | 'load' | 'fav' | 'moreOptions', item: ItemConfig): boolean {\r\n        // Check item-level visibility first\r\n        const itemVisibility = item.actionVisibility?.[action];\r\n        if (itemVisibility !== undefined) {\r\n            if (itemVisibility === 'auto') {\r\n                // Auto logic based on action type\r\n                switch (action) {\r\n                    case 'checkbox':\r\n                        return item.itemActionsSettings?.canSelect === true;\r\n                    case 'dragHandle':\r\n                        return item.itemActionsSettings?.canDrag === true;\r\n                    case 'expandIcon':\r\n                        return !!item.group_list;\r\n                    case 'addButton':\r\n                        return item.itemActionsSettings?.canAdd === true;\r\n                    case 'actions':\r\n                        // Show if any action is enabled\r\n                        return Object.keys(item.itemActionsSettings || {}).some(\r\n                            key => key.startsWith('can') && \r\n                            !['canClick', 'canRightClick', 'canSelectText', 'canSelect'].includes(key) &&\r\n                            item.itemActionsSettings![key as keyof typeof item.itemActionsSettings]\r\n                        );\r\n                    default:\r\n                        // For individual actions, check if the corresponding can* is true\r\n                        const canKey = `can${action.charAt(0).toUpperCase() + action.slice(1)}` as keyof typeof item.itemActionsSettings;\r\n                        return item.itemActionsSettings?.[canKey] === true;\r\n                }\r\n            }\r\n            return itemVisibility;\r\n        }\r\n        \r\n        // Check component-level visibility (only for actions that exist in config)\r\n        const compVisibility = (action === 'checkbox' || action === 'dragHandle' || action === 'expandIcon' || action === 'actions' || action === 'addButton')\r\n            ? this.config.visibility?.[action]\r\n            : undefined;\r\n        if (compVisibility !== undefined) {\r\n            if (compVisibility === 'auto') {\r\n                // Same auto logic\r\n                switch (action) {\r\n                    case 'checkbox':\r\n                        return item.itemActionsSettings?.canSelect === true;\r\n                    case 'dragHandle':\r\n                        return item.itemActionsSettings?.canDrag === true;\r\n                    case 'expandIcon':\r\n                        return !!item.group_list;\r\n                    case 'addButton':\r\n                        return item.itemActionsSettings?.canAdd === true;\r\n                    case 'actions':\r\n                        return Object.keys(item.itemActionsSettings || {}).some(\r\n                            key => key.startsWith('can') && \r\n                            !['canClick', 'canRightClick', 'canSelectText', 'canSelect'].includes(key) &&\r\n                            item.itemActionsSettings![key as keyof typeof item.itemActionsSettings]\r\n                        );\r\n                    default:\r\n                        const canKey = `can${action.charAt(0).toUpperCase() + action.slice(1)}` as keyof typeof item.itemActionsSettings;\r\n                        return item.itemActionsSettings?.[canKey] === true;\r\n                }\r\n            }\r\n            return compVisibility;\r\n        }\r\n        \r\n        // Default: use auto logic\r\n        switch (action) {\r\n            case 'checkbox':\r\n                return item.itemActionsSettings?.canSelect === true;\r\n            case 'dragHandle':\r\n                return item.itemActionsSettings?.canDrag === true;\r\n            case 'expandIcon':\r\n                return !!item.group_list;\r\n            case 'addButton':\r\n                return item.itemActionsSettings?.canAdd === true;\r\n            case 'actions':\r\n                return Object.keys(item.itemActionsSettings || {}).some(\r\n                    key => key.startsWith('can') && \r\n                    !['canClick', 'canRightClick', 'canSelectText', 'canSelect'].includes(key) &&\r\n                    item.itemActionsSettings![key as keyof typeof item.itemActionsSettings]\r\n                );\r\n            default:\r\n                const canKey = `can${action.charAt(0).toUpperCase() + action.slice(1)}` as keyof typeof item.itemActionsSettings;\r\n                return item.itemActionsSettings?.[canKey] === true;\r\n        }\r\n    }\r\n\r\n    private render(): void {\r\n        const { language, isCollapsed = false, highlightedItem, onItemClick, onItemRightClick, onItemAction } = this.config;\r\n        const item = this.data;\r\n        const direction = this.getDirection();\r\n        \r\n        // Clear container\r\n        this.container.innerHTML = '';\r\n        \r\n        // Create item element\r\n        this.itemElement = document.createElement('div');\r\n        this.itemElement.className = `xwui-item ${getSizeClasses(item.item_size)} ${item.item_type || 'row'}`;\r\n        this.itemElement.setAttribute('data-uid', item.uid);\r\n        this.itemElement.setAttribute('data-id', item.id);\r\n        this.itemElement.setAttribute('dir', direction);\r\n        \r\n        // Set background color based on status (status takes precedence over background_color)\r\n        if (item.status) {\r\n            this.itemElement.classList.add(`xwui-item-status-${item.status}`);\r\n        } else if (item.background_color) {\r\n            // Only use background_color if no status is set\r\n            this.itemElement.style.backgroundColor = item.background_color;\r\n        }\r\n        \r\n        // Add highlighted class if this item is highlighted\r\n        if (highlightedItem === item.uid) {\r\n            this.itemElement.classList.add('xwui-item-highlighted');\r\n        }\r\n        \r\n        // Add interactive classes\r\n        const canClick = item.itemActionsSettings?.canClick !== false;\r\n        if (canClick) {\r\n            this.itemElement.classList.add('xwui-item-clickable');\r\n            if (onItemClick) {\r\n                this.itemElement.addEventListener('click', (e) => {\r\n                    // If item has group_list, handle expand/collapse via action\r\n                    if (item.group_list && onItemAction) {\r\n                        onItemAction('toggle_expand', item, e);\r\n                    } else {\r\n                        // Call onItemClick if provided, regardless of item_action\r\n                        onItemClick(item, e);\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        \r\n        // Add right-click handler\r\n        if (item.itemActionsSettings?.canRightClick && onItemRightClick) {\r\n            this.itemElement.addEventListener('contextmenu', (e) => {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                onItemRightClick(item, e);\r\n            });\r\n        }\r\n        \r\n        // Render content based on item type\r\n        if (item.item_type === 'search') {\r\n            this.renderSearchItem(item, language, direction);\r\n        } else if (isCollapsed) {\r\n            this.renderCollapsedItem(item, language);\r\n        } else {\r\n            this.renderFullItem(item, language, direction);\r\n        }\r\n        \r\n        this.container.appendChild(this.itemElement);\r\n        \r\n        // Attach expand/collapse handlers for expandable text\r\n        this.attachTextExpandHandlers();\r\n    }\r\n    \r\n    /**\r\n     * Attach event handlers for expandable text overflow buttons\r\n     */\r\n    private attachTextExpandHandlers(): void {\r\n        if (!this.itemElement) return;\r\n        \r\n        const expandButtons = this.itemElement.querySelectorAll('.xwui-item-text-expand-btn');\r\n        expandButtons.forEach(button => {\r\n            button.addEventListener('click', (e) => {\r\n                e.stopPropagation();\r\n                const textId = button.getAttribute('data-text-id');\r\n                if (!textId) return;\r\n                \r\n                const wrapper = this.itemElement?.querySelector(`[data-text-id=\"${textId}\"]`)?.closest('.xwui-item-text-expandable-wrapper');\r\n                if (!wrapper) return;\r\n                \r\n                const textElement = wrapper.querySelector('.xwui-item-text-expandable');\r\n                if (!textElement) return;\r\n                \r\n                const isExpanded = textElement.classList.contains('xwui-item-text-expanded');\r\n                \r\n                if (isExpanded) {\r\n                    textElement.classList.remove('xwui-item-text-expanded');\r\n                    button.textContent = '+';\r\n                    button.setAttribute('aria-label', 'Show more');\r\n                } else {\r\n                    textElement.classList.add('xwui-item-text-expanded');\r\n                    button.textContent = 'âˆ’';\r\n                    button.setAttribute('aria-label', 'Show less');\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    private renderSearchItem(item: ItemConfig, language?: { [key: string]: string }, direction: Direction = 'ltr'): void {\r\n        if (!this.itemElement) return;\r\n        \r\n        const placeholder = item.primaryContent[0]?.value || 'Search...';\r\n        const translatedPlaceholder = language && language[placeholder] ? language[placeholder] : placeholder;\r\n        const searchIcon = getIconSVG('search');\r\n        const inputClass = direction === 'ltr' ? 'xwui-item-search-input-ltr' : 'xwui-item-search-input-rtl';\r\n        const iconClass = direction === 'ltr' ? 'xwui-item-search-icon-ltr' : 'xwui-item-search-icon-rtl';\r\n        \r\n        this.itemElement.innerHTML = `\r\n            <div class=\"xwui-item-search-container\">\r\n                <div class=\"xwui-item-search-icon ${iconClass}\">${searchIcon}</div>\r\n                <input type=\"text\" class=\"xwui-item-search-input ${inputClass}\" placeholder=\"${escapeHtml(translatedPlaceholder)}\" />\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    private renderCollapsedItem(item: ItemConfig, language?: { [key: string]: string }): void {\r\n        if (!this.itemElement) return;\r\n        \r\n        const canSelectText = item.itemActionsSettings?.canSelectText;\r\n        const avatarContent = this.shouldShowContent('avatarContent', item) \r\n            ? renderContentBlock(item.avatarContent, language, canSelectText)\r\n            : '';\r\n        \r\n        this.itemElement.innerHTML = `\r\n            <div class=\"xwui-item-collapsed\">\r\n                ${avatarContent}\r\n            </div>\r\n        `;\r\n    }\r\n\r\n    private renderFullItem(item: ItemConfig, language?: { [key: string]: string }, direction: Direction = 'ltr'): void {\r\n        if (!this.itemElement) return;\r\n        \r\n        const canSelectText = item.itemActionsSettings?.canSelectText;\r\n        const size = item.item_size || 's';\r\n        \r\n        if (size === 'xl') {\r\n            this.renderXLargeItem(item, language, canSelectText, direction);\r\n        } else {\r\n            this.renderStandardItem(item, language, canSelectText, direction);\r\n        }\r\n    }\r\n\r\n    private renderXLargeItem(item: ItemConfig, language?: { [key: string]: string }, canSelectText?: boolean, direction: Direction = 'ltr'): void {\r\n        if (!this.itemElement) return;\r\n        \r\n        const checkbox = this.shouldShowAction('checkbox', item) && item.itemActionsSettings?.canSelect\r\n            ? `<input type=\"checkbox\" class=\"xwui-item-checkbox\" ${item.itemStates?.isSelected ? 'checked' : ''} readonly />`\r\n            : '';\r\n        \r\n        const avatarContent = this.shouldShowContent('avatarContent', item)\r\n            ? renderContentBlock(item.avatarContent, language, canSelectText, direction)\r\n            : '';\r\n        \r\n        const primaryContent = this.shouldShowContent('primaryContent', item)\r\n            ? renderContentBlock(item.primaryContent, language, canSelectText, direction)\r\n            : '';\r\n        const primaryContentOther = this.shouldShowContent('primaryContent_other', item)\r\n            ? renderContentBlock(item.primaryContent_other, language, canSelectText, direction)\r\n            : '';\r\n        const secondaryContent = this.shouldShowContent('secondaryContent', item)\r\n            ? renderContentBlock(item.secondaryContent, language, canSelectText, direction)\r\n            : '';\r\n        const tertiaryContent = this.shouldShowContent('tertiaryContent', item)\r\n            ? renderContentBlock(item.tertiaryContent, language, canSelectText, direction)\r\n            : '';\r\n        const tertiaryContentOther = this.shouldShowContent('tertiaryContent_other', item)\r\n            ? renderContentBlock(item.tertiaryContent_other, language, canSelectText, direction)\r\n            : '';\r\n        const secondaryContentOther = this.shouldShowContent('secondaryContent_other', item)\r\n            ? renderContentBlock(item.secondaryContent_other, language, canSelectText, direction)\r\n            : '';\r\n        \r\n        const actions = this.shouldShowAction('actions', item) ? this.renderActionButtons(item) : '';\r\n        \r\n        const xlLayoutDiv = document.createElement('div');\r\n        xlLayoutDiv.className = 'xwui-item-xl-layout';\r\n        xlLayoutDiv.setAttribute('dir', direction);\r\n        \r\n        // Avatar wrapper for positioning outside the bubble\r\n        const avatarWrapper = avatarContent ? document.createElement('div') : null;\r\n        if (avatarWrapper) {\r\n            avatarWrapper.className = 'xwui-item-xl-avatar-wrapper';\r\n            avatarWrapper.setAttribute('dir', direction);\r\n            avatarWrapper.innerHTML = avatarContent;\r\n        }\r\n        \r\n        const xlContentDiv = document.createElement('div');\r\n        xlContentDiv.className = 'xwui-item-xl-content';\r\n        xlContentDiv.setAttribute('dir', direction);\r\n        \r\n        const xlHeaderDiv = document.createElement('div');\r\n        xlHeaderDiv.className = 'xwui-item-xl-header';\r\n        xlHeaderDiv.setAttribute('dir', direction);\r\n        \r\n        const xlHeaderOtherDiv = document.createElement('div');\r\n        xlHeaderOtherDiv.className = 'xwui-item-xl-header-other';\r\n        xlHeaderOtherDiv.setAttribute('dir', direction);\r\n        \r\n        // For RTL, reverse the DOM order of header elements\r\n        if (direction === 'rtl') {\r\n            // RTL order: [actions, primaryContentOther] | primaryContent\r\n            if (actions) xlHeaderOtherDiv.insertAdjacentHTML('beforeend', actions);\r\n            if (primaryContentOther) xlHeaderOtherDiv.insertAdjacentHTML('beforeend', primaryContentOther);\r\n            xlHeaderDiv.appendChild(xlHeaderOtherDiv);\r\n            if (primaryContent) xlHeaderDiv.insertAdjacentHTML('afterbegin', primaryContent);\r\n        } else {\r\n            // LTR order: primaryContent | [primaryContentOther, actions]\r\n            if (primaryContent) xlHeaderDiv.insertAdjacentHTML('beforeend', primaryContent);\r\n            if (primaryContentOther) xlHeaderOtherDiv.insertAdjacentHTML('beforeend', primaryContentOther);\r\n            if (actions) xlHeaderOtherDiv.insertAdjacentHTML('beforeend', actions);\r\n            xlHeaderDiv.appendChild(xlHeaderOtherDiv);\r\n        }\r\n        \r\n        xlContentDiv.appendChild(xlHeaderDiv);\r\n        if (secondaryContent) xlContentDiv.insertAdjacentHTML('beforeend', secondaryContent);\r\n        if (tertiaryContent) xlContentDiv.insertAdjacentHTML('beforeend', tertiaryContent);\r\n        if (tertiaryContentOther) xlContentDiv.insertAdjacentHTML('beforeend', tertiaryContentOther);\r\n        \r\n        // Reaction wrapper for positioning outside the bubble (below)\r\n        const reactionWrapper = secondaryContentOther ? document.createElement('div') : null;\r\n        if (reactionWrapper) {\r\n            reactionWrapper.className = 'xwui-item-xl-reaction-wrapper';\r\n            reactionWrapper.setAttribute('dir', direction);\r\n            reactionWrapper.innerHTML = secondaryContentOther;\r\n        }\r\n        \r\n        // Content wrapper that contains both bubble and reaction\r\n        const contentWrapper = document.createElement('div');\r\n        contentWrapper.className = 'xwui-item-xl-content-wrapper';\r\n        contentWrapper.setAttribute('dir', direction);\r\n        contentWrapper.appendChild(xlContentDiv);\r\n        if (reactionWrapper) contentWrapper.appendChild(reactionWrapper);\r\n        \r\n        // Build layout with RTL-specific avatar positioning\r\n        if (checkbox) xlLayoutDiv.insertAdjacentHTML('beforeend', checkbox);\r\n        if (direction === 'rtl') {\r\n            // RTL order: checkbox | content-wrapper | avatar\r\n            xlLayoutDiv.appendChild(contentWrapper);\r\n            if (avatarWrapper) xlLayoutDiv.appendChild(avatarWrapper);\r\n        } else {\r\n            // LTR order: checkbox | avatar | content-wrapper\r\n            if (avatarWrapper) xlLayoutDiv.appendChild(avatarWrapper);\r\n            xlLayoutDiv.appendChild(contentWrapper);\r\n        }\r\n        \r\n        this.itemElement.innerHTML = '';\r\n        this.itemElement.appendChild(xlLayoutDiv);\r\n    }\r\n\r\n    private renderStandardItem(item: ItemConfig, language?: { [key: string]: string }, canSelectText?: boolean, direction: Direction = 'ltr'): void {\r\n        if (!this.itemElement) return;\r\n        \r\n        const dragHandle = this.shouldShowAction('dragHandle', item) && item.itemActionsSettings?.canDrag\r\n            ? '<div class=\"xwui-item-drag-handle\">' + getIconSVG('more') + '</div>'\r\n            : '';\r\n        \r\n        // Show expand icon if item has group_list\r\n        const expandIcon = this.shouldShowAction('expandIcon', item) && item.group_list\r\n            ? `<div class=\"xwui-item-expand-icon ${item.itemStates?.isExpanded ? 'xwui-item-expanded' : ''}\">${getIconSVG('chevronRight')}</div>`\r\n            : '';\r\n        \r\n        const avatarContent = this.shouldShowContent('avatarContent', item)\r\n            ? renderContentBlock(item.avatarContent, language, canSelectText, direction)\r\n            : '';\r\n        const primaryContent = this.shouldShowContent('primaryContent', item)\r\n            ? renderContentBlock(item.primaryContent, language, canSelectText, direction)\r\n            : '';\r\n        \r\n        const addButton = this.shouldShowAction('addButton', item) && item.itemActionsSettings?.canAdd && this.config.onItemAction\r\n            ? `<button class=\"xwui-item-add-button\" data-action=\"add_child_item\">${getIconSVG('add')}</button>`\r\n            : '';\r\n        \r\n        const layoutDiv = document.createElement('div');\r\n        layoutDiv.className = 'xwui-item-standard-layout';\r\n        layoutDiv.setAttribute('dir', direction);\r\n        \r\n        // For RTL, reverse the DOM order so icon appears on right side\r\n        if (direction === 'rtl') {\r\n            // RTL DOM order: addButton | primaryContent | avatarContent | expandIcon | dragHandle\r\n            // With flex-direction: row-reverse, visual order: dragHandle | expandIcon | avatarContent | primaryContent | addButton\r\n            // This puts avatarContent (icon) on the RIGHT side of primaryContent (text)\r\n            if (addButton) layoutDiv.insertAdjacentHTML('beforeend', addButton);\r\n            const primaryDiv = document.createElement('div');\r\n            primaryDiv.className = 'xwui-item-primary-content';\r\n            primaryDiv.setAttribute('dir', direction);\r\n            primaryDiv.innerHTML = primaryContent;\r\n            layoutDiv.appendChild(primaryDiv);\r\n            if (avatarContent) layoutDiv.insertAdjacentHTML('beforeend', avatarContent);\r\n            if (expandIcon) layoutDiv.insertAdjacentHTML('beforeend', expandIcon);\r\n            if (dragHandle) layoutDiv.insertAdjacentHTML('beforeend', dragHandle);\r\n        } else {\r\n            // LTR order: dragHandle | expandIcon | avatarContent | primaryContent | addButton\r\n            if (dragHandle) layoutDiv.insertAdjacentHTML('beforeend', dragHandle);\r\n            if (expandIcon) layoutDiv.insertAdjacentHTML('beforeend', expandIcon);\r\n            if (avatarContent) layoutDiv.insertAdjacentHTML('beforeend', avatarContent);\r\n            const primaryDiv = document.createElement('div');\r\n            primaryDiv.className = 'xwui-item-primary-content';\r\n            primaryDiv.setAttribute('dir', direction);\r\n            primaryDiv.innerHTML = primaryContent;\r\n            layoutDiv.appendChild(primaryDiv);\r\n            if (addButton) layoutDiv.insertAdjacentHTML('beforeend', addButton);\r\n        }\r\n        \r\n        this.itemElement.innerHTML = '';\r\n        this.itemElement.appendChild(layoutDiv);\r\n        \r\n        // Attach add button handler\r\n        if (addButton && this.config.onItemAction) {\r\n            const addBtn = this.itemElement.querySelector('.xwui-item-add-button');\r\n            if (addBtn) {\r\n                addBtn.addEventListener('click', (e) => {\r\n                    e.stopPropagation();\r\n                    this.config.onItemAction!('add_child_item', item, e as MouseEvent);\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    private renderActionButtons(item: ItemConfig): string {\r\n        if (!item.itemActionsSettings) return '';\r\n        \r\n        const actions = Object.keys(item.itemActionsSettings)\r\n            .filter(key => {\r\n                if (!key.startsWith('can')) return false;\r\n                if (['canClick', 'canRightClick', 'canSelectText', 'canSelect'].includes(key)) return false;\r\n                \r\n                // Check visibility for individual actions\r\n                const actionName = key.substring(3).toLowerCase() as 'delete' | 'edit' | 'archive' | 'save' | 'load' | 'fav' | 'moreOptions';\r\n                if (!this.shouldShowAction(actionName, item)) return false;\r\n                \r\n                return item.itemActionsSettings![key as keyof typeof item.itemActionsSettings];\r\n            })\r\n            .slice(0, 3);\r\n        \r\n        if (actions.length === 0) return '';\r\n        \r\n        const buttons = actions.map(actionKey => {\r\n            const iconName = actionKey.substring(3).toLowerCase();\r\n            const icon = getIconSVG(iconName);\r\n            return `<button class=\"xwui-item-action-button\" data-action=\"${actionKey}\">${icon}</button>`;\r\n        }).join('');\r\n        \r\n        const moreButton = Object.keys(item.itemActionsSettings).filter(key => \r\n            key.startsWith('can') && \r\n            !['canClick', 'canRightClick', 'canSelectText', 'canSelect'].includes(key) &&\r\n            item.itemActionsSettings![key as keyof typeof item.itemActionsSettings]\r\n        ).length > 3\r\n            ? `<button class=\"xwui-item-action-button xwui-item-more-button\" data-action=\"more\">${getIconSVG('more')}</button>`\r\n            : '';\r\n        \r\n        return `<div class=\"xwui-item-actions\">${buttons}${moreButton}</div>`;\r\n    }\r\n\r\n    public updateConfig(newConfig: Partial<XWUIItemConfig>): void {\r\n        // Update config by merging with new values\r\n        Object.assign(this.config, newConfig);\r\n        this.render();\r\n    }\r\n    \r\n    /**\r\n     * Update item data and re-render\r\n     */\r\n    public updateData(newData: Partial<ItemConfig>): void {\r\n        // Merge new data with existing data\r\n        this.data = { ...this.data, ...newData } as ItemConfig;\r\n        \r\n        // Ensure uid exists\r\n        if (!this.data.uid) {\r\n            this.data.uid = this.uid;\r\n        }\r\n        \r\n        // Validate and re-render\r\n        this.validateItem(this.data);\r\n        this.render();\r\n    }\r\n\r\n    public getElement(): HTMLElement | null {\r\n        return this.itemElement;\r\n    }\r\n\r\n    public destroy(): void {\r\n        if (this.itemElement) {\r\n            this.itemElement.remove();\r\n            this.itemElement = null;\r\n        }\r\n    }\r\n}\r\n\r\n// Set component name at class definition (before minification) - survives build tools\r\n(XWUIItem as any).componentName = 'XWUIItem';","/**\r\n * XWUIButton Component\r\n * A button component with various styles and states\r\n * Uses XWUIItem internally for flexible styling and JSON configuration\r\n */\r\n\r\nimport { XWUIComponent, type XWUISystemConfig, type XWUIUserConfig } from '../XWUIComponent/XWUIComponent';\r\nimport { XWUIItem, type ItemConfig, type ContentPart } from '../XWUIItem/XWUIItem';\r\n\r\n// Component-level configuration (conf_comp)\r\nexport interface XWUIButtonConfig {\r\n    variant?: 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'outline' | 'ghost';\r\n    size?: 'tiny' | 'small' | 'medium' | 'large';\r\n    disabled?: boolean;\r\n    loading?: boolean;\r\n    icon?: string;\r\n    iconPosition?: 'left' | 'right';\r\n    fullWidth?: boolean;\r\n    type?: 'button' | 'submit' | 'reset';\r\n    className?: string; // Additional CSS classes\r\n    border?: 'none' | 'transparent' | 'lightest' | 'default'; // Border control\r\n    // Padding control - overrides size-based padding if provided\r\n    padding?: string | {\r\n        top?: string | number;\r\n        right?: string | number;\r\n        bottom?: string | number;\r\n        left?: string | number;\r\n        vertical?: string | number; // Shorthand for top and bottom\r\n        horizontal?: string | number; // Shorthand for left and right\r\n    };\r\n    // Gap control - spacing between icon and text\r\n    gap?: string | number;\r\n    // Min height control - overrides size-based min-height if provided\r\n    minHeight?: string | number;\r\n    // Title/tooltip - shown on hover, especially useful for icon-only buttons\r\n    title?: string;\r\n    tooltip?: string; // Alias for title\r\n}\r\n\r\n// Data type for XWUIButton (text is stored in data)\r\nexport interface XWUIButtonData {\r\n    text?: string;\r\n    label?: string; // Alias for text for compatibility\r\n}\r\n\r\nexport class XWUIButton extends XWUIComponent<XWUIButtonData, XWUIButtonConfig> {\r\n    \r\n    private xwuiItem: XWUIItem | null = null;\r\n    private buttonElement: HTMLButtonElement | null = null;\r\n    private itemConfig!: ItemConfig;\r\n    private clickHandlers: Array<(event: MouseEvent) => void> = [];\r\n\r\n    constructor(\r\n        container: HTMLElement,\r\n        data: XWUIButtonData | string = {},\r\n        conf_comp: XWUIButtonConfig = {},\r\n        conf_sys?: XWUISystemConfig,\r\n        conf_usr?: XWUIUserConfig\r\n    ) {\r\n        // Handle string shorthand: convert \"Label\" to { text: \"Label\" }\r\n        const normalizedData: XWUIButtonData = typeof data === 'string' \r\n            ? { text: data } \r\n            : (data && typeof data === 'object' ? data : {});\r\n        \r\n        super(container, normalizedData, conf_comp, conf_sys, conf_usr);\r\n        \r\n        this.setupDOM();\r\n    }\r\n\r\n    /**\r\n     * Create component-specific config\r\n     * Merges conf_comp with defaults\r\n     */\r\n    protected createConfig(\r\n        conf_comp?: XWUIButtonConfig,\r\n        conf_usr?: XWUIUserConfig,\r\n        conf_sys?: XWUISystemConfig\r\n    ): XWUIButtonConfig {\r\n        return {\r\n            variant: conf_comp?.variant ?? 'primary',\r\n            size: conf_comp?.size ?? 'medium',\r\n            disabled: conf_comp?.disabled ?? false,\r\n            loading: conf_comp?.loading ?? false,\r\n            icon: conf_comp?.icon,\r\n            iconPosition: conf_comp?.iconPosition ?? 'left',\r\n            fullWidth: conf_comp?.fullWidth ?? false,\r\n            type: conf_comp?.type ?? 'button',\r\n            padding: conf_comp?.padding,\r\n            gap: conf_comp?.gap,\r\n            minHeight: conf_comp?.minHeight,\r\n            className: conf_comp?.className,\r\n            border: conf_comp?.border,\r\n            title: conf_comp?.title ?? conf_comp?.tooltip\r\n        };\r\n    }\r\n    \r\n    /**\r\n     * Get button text from data (supports both 'text' and 'label' properties)\r\n     */\r\n    private getButtonText(): string | undefined {\r\n        return this.data.text !== undefined && this.data.text !== null \r\n            ? this.data.text \r\n            : (this.data.label !== undefined && this.data.label !== null ? this.data.label : undefined);\r\n    }\r\n\r\n    /**\r\n     * Convert XWUIButtonConfig to ItemConfig for XWUIItem\r\n     */\r\n    private createItemConfig(): ItemConfig {\r\n        const contentParts: ContentPart[] = [];\r\n        \r\n        // Add icon if provided and position is left\r\n        // Note: XWUIItem expects icon names, but we support custom SVG strings\r\n        // For custom SVG, we'll handle it in setupDOM after XWUIItem renders\r\n        if (this.config.icon && this.config.iconPosition === 'left') {\r\n            // Check if it's a known icon name or custom SVG\r\n            const isCustomSVG = this.config.icon.trim().startsWith('<svg');\r\n            if (isCustomSVG) {\r\n                // Store custom SVG to inject later\r\n                contentParts.push({ type: 'text', value: 'ICON_PLACEHOLDER_LEFT' });\r\n            } else {\r\n                contentParts.push({ type: 'icon', value: this.config.icon });\r\n            }\r\n        }\r\n        \r\n        // Add text content (handle empty string as valid text)\r\n        const buttonText = this.getButtonText();\r\n        if (buttonText !== undefined) {\r\n            contentParts.push({ type: 'text', value: buttonText, style: 'bold' });\r\n        }\r\n        \r\n        // Add icon if provided and position is right\r\n        if (this.config.icon && this.config.iconPosition === 'right') {\r\n            const isCustomSVG = this.config.icon.trim().startsWith('<svg');\r\n            if (isCustomSVG) {\r\n                contentParts.push({ type: 'text', value: 'ICON_PLACEHOLDER_RIGHT' });\r\n            } else {\r\n                contentParts.push({ type: 'icon', value: this.config.icon });\r\n            }\r\n        }\r\n        \r\n        // Add loading spinner if loading\r\n        if (this.config.loading) {\r\n            contentParts.push({ type: 'text', value: 'âŸ³' });\r\n        }\r\n        \r\n        // Ensure primaryContent is never empty (required by XWUIItem)\r\n        if (contentParts.length === 0) {\r\n            contentParts.push({ type: 'text', value: '' });\r\n        }\r\n        \r\n        // Map button size to item size\r\n        const sizeMap: Record<string, 'xs' | 's' | 'm' | 'l' | 'xl'> = {\r\n            'small': 's',\r\n            'medium': 'm',\r\n            'large': 'l'\r\n        };\r\n        \r\n        // Map button variant to item status/background\r\n        const variantMap: Record<string, 'before_start' | 'processing' | 'error' | 'pass' | undefined> = {\r\n            'primary': 'processing',  // Blue\r\n            'secondary': 'pass',      // No background\r\n            'success': 'pass',         // No background (will use custom color)\r\n            'danger': 'error',         // Red\r\n            'warning': 'before_start', // Yellow\r\n            'info': 'processing',     // Blue\r\n            'outline': 'pass',        // No background\r\n            'ghost': 'pass'           // No background\r\n        };\r\n        \r\n        const itemConfig: ItemConfig = {\r\n            // uid is optional - will be auto-generated by XWUIComponent if not provided\r\n            id: `xwui-button-${Date.now()}-${Math.random()}`,\r\n            item_type: 'row',\r\n            item_size: sizeMap[this.config.size || 'medium'] || 'm',\r\n            status: variantMap[this.config.variant || 'primary'],\r\n            primaryContent: contentParts,\r\n            itemActionsSettings: {\r\n                canClick: !this.config.disabled && !this.config.loading\r\n            },\r\n            itemStates: {\r\n                isSelected: false\r\n            }\r\n        };\r\n        \r\n        // Add custom background colors for variants that don't map to status\r\n        if (this.config.variant === 'success') {\r\n            itemConfig.background_color = '#10b981'; // Green\r\n        } else if (this.config.variant === 'outline') {\r\n            itemConfig.background_color = 'transparent';\r\n        } else if (this.config.variant === 'ghost') {\r\n            itemConfig.background_color = 'transparent';\r\n        }\r\n        \r\n        return itemConfig;\r\n    }\r\n    \r\n    /**\r\n     * Format padding value to CSS string\r\n     */\r\n    private formatPadding(padding: XWUIButtonConfig['padding']): string | undefined {\r\n        if (!padding) return undefined;\r\n        \r\n        if (typeof padding === 'string') {\r\n            return padding;\r\n        }\r\n        \r\n        // Handle object format\r\n        const top = padding.vertical ?? padding.top ?? '0';\r\n        const right = padding.horizontal ?? padding.right ?? '0';\r\n        const bottom = padding.vertical ?? padding.bottom ?? '0';\r\n        const left = padding.horizontal ?? padding.left ?? '0';\r\n        \r\n        // Format values (add 'px' if number)\r\n        const formatValue = (val: string | number): string => {\r\n            if (typeof val === 'number') return `${val}px`;\r\n            return val;\r\n        };\r\n        \r\n        // If all sides are the same, use shorthand\r\n        if (formatValue(top) === formatValue(right) && \r\n            formatValue(right) === formatValue(bottom) && \r\n            formatValue(bottom) === formatValue(left)) {\r\n            return formatValue(top);\r\n        }\r\n        \r\n        // If vertical and horizontal are the same, use shorthand\r\n        if (padding.vertical !== undefined && padding.horizontal !== undefined &&\r\n            formatValue(padding.vertical) === formatValue(padding.horizontal)) {\r\n            return `${formatValue(padding.vertical)} ${formatValue(padding.horizontal)}`;\r\n        }\r\n        \r\n        // Full 4-value format\r\n        return `${formatValue(top)} ${formatValue(right)} ${formatValue(bottom)} ${formatValue(left)}`;\r\n    }\r\n    \r\n    /**\r\n     * Format gap value to CSS string\r\n     */\r\n    private formatGap(gap: string | number | undefined): string | undefined {\r\n        if (gap === undefined) return undefined;\r\n        if (typeof gap === 'number') return `${gap}px`;\r\n        return gap;\r\n    }\r\n    \r\n    /**\r\n     * Format minHeight value to CSS string\r\n     */\r\n    private formatMinHeight(minHeight: string | number | undefined): string | undefined {\r\n        if (minHeight === undefined) return undefined;\r\n        if (typeof minHeight === 'number') return `${minHeight}px`;\r\n        return minHeight;\r\n    }\r\n\r\n    /**\r\n     * Setup DOM structure using XWUIItem\r\n     */\r\n    private setupDOM(): void {\r\n        this.container.innerHTML = '';\r\n        this.container.className = 'xwui-button-container';\r\n        \r\n        if (this.config.fullWidth) {\r\n            this.container.style.width = '100%';\r\n        }\r\n        \r\n        // Create item config\r\n        this.itemConfig = this.createItemConfig();\r\n        \r\n        // Create a wrapper div for XWUIItem\r\n        const itemWrapper = document.createElement('div');\r\n        itemWrapper.className = 'xwui-button-item-wrapper';\r\n        this.container.appendChild(itemWrapper);\r\n        \r\n        // Create XWUIItem instance - pass ItemConfig directly as data\r\n        this.xwuiItem = new XWUIItem(itemWrapper, this.itemConfig);\r\n        this.registerChildComponent(this.xwuiItem);\r\n        \r\n        // Get the rendered item element and wrap it in a button\r\n        const itemElement = itemWrapper.querySelector('.xwui-item');\r\n        if (itemElement) {\r\n            // Create button element\r\n            this.buttonElement = document.createElement('button');\r\n            this.buttonElement.type = this.config.type || 'button';\r\n            this.buttonElement.className = 'xwui-button';\r\n            this.buttonElement.classList.add(`xwui-button-${this.config.variant || 'primary'}`);\r\n            this.buttonElement.classList.add(`xwui-button-${this.config.size || 'medium'}`);\r\n            this.buttonElement.disabled = (this.config.disabled || this.config.loading) ?? false;\r\n            \r\n            // Apply padding from config (overrides size-based padding)\r\n            const padding = this.formatPadding(this.config.padding);\r\n            if (padding) {\r\n                this.buttonElement.style.padding = padding;\r\n            }\r\n            \r\n            // Apply gap from config (overrides default gap)\r\n            const gap = this.formatGap(this.config.gap);\r\n            if (gap !== undefined) {\r\n                this.buttonElement.style.gap = gap;\r\n            }\r\n            \r\n            // Apply minHeight from config (overrides size-based min-height)\r\n            const minHeight = this.formatMinHeight(this.config.minHeight);\r\n            if (minHeight) {\r\n                this.buttonElement.style.minHeight = minHeight;\r\n            }\r\n            \r\n            // Apply custom className if provided\r\n            if (this.config.className) {\r\n                this.buttonElement.classList.add(...this.config.className.split(' '));\r\n            }\r\n            \r\n            // Apply border setting\r\n            if (this.config.border === 'none') {\r\n                this.buttonElement.style.border = 'none';\r\n            } else if (this.config.border === 'transparent') {\r\n                this.buttonElement.style.borderColor = 'transparent';\r\n            } else if (this.config.border === 'lightest') {\r\n                // Lightest border: 1px with lightest border color\r\n                this.buttonElement.style.borderWidth = '1px';\r\n                this.buttonElement.style.borderStyle = 'solid';\r\n                this.buttonElement.style.borderColor = 'var(--border-color-lightest, rgba(0, 0, 0, 0.05))';\r\n            }\r\n            \r\n            if (this.config.fullWidth) {\r\n                this.buttonElement.classList.add('xwui-button-full-width');\r\n                this.buttonElement.style.width = '100%';\r\n            }\r\n            \r\n            if (this.config.loading) {\r\n                this.buttonElement.classList.add('xwui-button-loading');\r\n            }\r\n            \r\n            if (this.config.disabled) {\r\n                this.buttonElement.classList.add('xwui-button-disabled');\r\n            }\r\n            \r\n            // Copy item element's content and styles to button\r\n            let itemHTML = itemElement.innerHTML;\r\n            \r\n            // Replace icon placeholders with actual custom SVG if provided\r\n            if (this.config.icon) {\r\n                const isCustomSVG = this.config.icon.trim().startsWith('<svg');\r\n                if (isCustomSVG) {\r\n                    const iconHTML = `<span class=\"xwui-button-icon\" style=\"display: inline-flex; align-items: center; justify-content: center;\">${this.config.icon}</span>`;\r\n                    // Replace placeholder text with icon\r\n                    itemHTML = itemHTML.replace(/ICON_PLACEHOLDER_LEFT/g, iconHTML);\r\n                    itemHTML = itemHTML.replace(/ICON_PLACEHOLDER_RIGHT/g, iconHTML);\r\n                }\r\n            }\r\n            \r\n            // Remove any empty text nodes or whitespace-only text for icon-only buttons\r\n            const buttonText = this.getButtonText();\r\n            if (!buttonText || buttonText.trim() === '') {\r\n                // Remove text content but keep icons\r\n                itemHTML = itemHTML.replace(/<span[^>]*class=\"[^\"]*xwui-item-text[^\"]*\"[^>]*>[\\s\\S]*?<\\/span>/gi, '');\r\n                itemHTML = itemHTML.replace(/<span[^>]*class=\"[^\"]*xwui-button-text[^\"]*\"[^>]*>[\\s\\S]*?<\\/span>/gi, '');\r\n            }\r\n            \r\n            if (this.buttonElement) {\r\n                this.buttonElement.innerHTML = itemHTML;\r\n                if (itemElement instanceof HTMLElement) {\r\n                    this.buttonElement.style.cssText = itemElement.style.cssText;\r\n                }\r\n                \r\n                // Copy classes from item element (for status colors, etc.)\r\n                const btnEl = this.buttonElement; // Store reference for TypeScript narrowing\r\n                Array.from(itemElement.classList).forEach(cls => {\r\n                    if (cls.startsWith('xwui-item-status-') || cls.startsWith('xwui-item-size-')) {\r\n                        btnEl.classList.add(cls);\r\n                    }\r\n                });\r\n            }\r\n            \r\n            // Ensure button has accessible label and add icon-only class\r\n            if (this.buttonElement) {\r\n                const hasText = this.buttonElement.textContent?.trim();\r\n                const hasIcon = this.config.icon || this.buttonElement.querySelector('.xwui-button-icon, .xwui-item-icon');\r\n                \r\n                // Add icon-only class if button has icon but no text\r\n                if (!hasText && hasIcon) {\r\n                    this.buttonElement.classList.add('xwui-button-icon-only');\r\n                    if (!this.buttonElement.getAttribute('aria-label')) {\r\n                        // If button has icon but no text, add aria-label from button text or config\r\n                        const buttonText = this.getButtonText();\r\n                        const ariaLabel = buttonText || this.config.icon?.replace(/<[^>]*>/g, '').trim() || 'Button';\r\n                        this.buttonElement.setAttribute('aria-label', ariaLabel);\r\n                    }\r\n                } else {\r\n                    this.buttonElement.classList.remove('xwui-button-icon-only');\r\n                }\r\n            }\r\n            \r\n            // Replace item wrapper with button\r\n            itemWrapper.replaceWith(this.buttonElement);\r\n        } else {\r\n            // Fallback: create button directly if XWUIItem didn't render\r\n            this.buttonElement = document.createElement('button');\r\n            this.buttonElement.type = this.config.type || 'button';\r\n            this.buttonElement.className = this.getButtonClasses();\r\n            this.buttonElement.disabled = (this.config.disabled || this.config.loading) ?? false;\r\n            \r\n            if (this.config.icon) {\r\n                const iconSpan = document.createElement('span');\r\n                iconSpan.className = 'xwui-button-icon';\r\n                iconSpan.innerHTML = this.config.icon;\r\n                this.buttonElement.appendChild(iconSpan);\r\n            }\r\n            \r\n            const buttonText = this.getButtonText();\r\n            if (buttonText) {\r\n                this.buttonElement.textContent = buttonText;\r\n            }\r\n            \r\n            // Ensure button has accessible label and add icon-only class\r\n            if (!this.buttonElement.textContent?.trim() && this.config.icon) {\r\n                this.buttonElement.classList.add('xwui-button-icon-only');\r\n                const ariaLabel = buttonText || 'Button';\r\n                this.buttonElement.setAttribute('aria-label', ariaLabel);\r\n            }\r\n            \r\n            this.container.appendChild(this.buttonElement);\r\n        }\r\n        \r\n        // Add tooltip for icon-only buttons if title is provided\r\n        this.setupTooltip();\r\n    }\r\n    \r\n    /**\r\n     * Setup tooltip for icon-only buttons\r\n     */\r\n    private setupTooltip(): void {\r\n        if (!this.buttonElement) return;\r\n        \r\n        const title = this.config.title || this.config.tooltip;\r\n        if (!title) return;\r\n        \r\n        // Check if button is icon-only (no visible text)\r\n        const hasText = this.buttonElement.textContent?.trim();\r\n        const isIconOnly = !hasText && (\r\n            this.config.icon || \r\n            this.buttonElement.querySelector('.xwui-button-icon, .xwui-item-icon, .xwui-icon')\r\n        );\r\n        \r\n        // Only add tooltip for icon-only buttons or if explicitly requested\r\n        if (isIconOnly || !hasText) {\r\n            // Use async import to avoid circular dependencies\r\n            (async () => {\r\n                try {\r\n                    const { XWUITooltip } = await import('../XWUITooltip/index');\r\n                    \r\n                    // Create tooltip container\r\n                    const tooltipContainer = document.createElement('div');\r\n                    tooltipContainer.style.display = 'contents'; // Doesn't affect layout\r\n                    this.container.appendChild(tooltipContainer);\r\n                    \r\n                    // Create tooltip\r\n                    if (this.buttonElement) {\r\n                        const tooltip = new XWUITooltip(\r\n                            tooltipContainer,\r\n                            {\r\n                                content: title,\r\n                                target: this.buttonElement\r\n                            },\r\n                            {\r\n                                placement: 'top',\r\n                                trigger: 'hover',\r\n                                delay: 200\r\n                            },\r\n                            this.conf_sys,\r\n                            this.conf_usr\r\n                        );\r\n                        \r\n                        this.registerChildComponent(tooltip);\r\n                    }\r\n                } catch (error) {\r\n                    // Fallback to native title attribute if tooltip component fails to load\r\n                    console.warn('Failed to load XWUITooltip, using native title attribute:', error);\r\n                    if (this.buttonElement) {\r\n                        this.buttonElement.setAttribute('title', title);\r\n                    }\r\n                }\r\n            })();\r\n        } else {\r\n            // For buttons with text, use native title attribute as fallback\r\n            this.buttonElement.setAttribute('title', title);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Get button CSS classes based on config (fallback)\r\n     */\r\n    private getButtonClasses(): string {\r\n        const classes = ['xwui-button'];\r\n        classes.push(`xwui-button-${this.config.variant}`);\r\n        classes.push(`xwui-button-${this.config.size}`);\r\n        \r\n        if (this.config.fullWidth) {\r\n            classes.push('xwui-button-full-width');\r\n        }\r\n        \r\n        if (this.config.loading) {\r\n            classes.push('xwui-button-loading');\r\n        }\r\n        \r\n        if (this.config.disabled) {\r\n            classes.push('xwui-button-disabled');\r\n        }\r\n        \r\n        return classes.join(' ');\r\n    }\r\n\r\n\r\n    /**\r\n     * Set button text\r\n     */\r\n    public setText(text: string): void {\r\n        this.data.text = text;\r\n        // Recreate item config with new text\r\n        this.itemConfig = this.createItemConfig();\r\n        // Re-render the button\r\n        this.setupDOM();\r\n        // Re-attach event listeners if needed\r\n        this.reattachListeners();\r\n    }\r\n    \r\n\r\n    /**\r\n     * Set button variant\r\n     */\r\n    public setVariant(variant: XWUIButtonConfig['variant']): void {\r\n        if (!variant) return;\r\n        \r\n        this.config.variant = variant;\r\n        // Re-render the button\r\n        this.setupDOM();\r\n        this.reattachListeners();\r\n    }\r\n\r\n    /**\r\n     * Set button size\r\n     */\r\n    public setSize(size: XWUIButtonConfig['size']): void {\r\n        if (!size) return;\r\n        \r\n        this.config.size = size;\r\n        // Re-render the button\r\n        this.setupDOM();\r\n        this.reattachListeners();\r\n    }\r\n\r\n    /**\r\n     * Set disabled state\r\n     */\r\n    public setDisabled(disabled: boolean): void {\r\n        this.config.disabled = disabled;\r\n        if (this.buttonElement) {\r\n            this.buttonElement.disabled = (disabled || this.config.loading) ?? false;\r\n            \r\n            if (disabled) {\r\n                this.buttonElement.classList.add('xwui-button-disabled');\r\n            } else {\r\n                this.buttonElement.classList.remove('xwui-button-disabled');\r\n            }\r\n        }\r\n        // Update item config to reflect disabled state\r\n        this.itemConfig = this.createItemConfig();\r\n        if (this.xwuiItem) {\r\n            this.xwuiItem.updateData(this.itemConfig);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Set loading state\r\n     */\r\n    public setLoading(loading: boolean): void {\r\n        this.config.loading = loading;\r\n        // Recreate item config with loading state\r\n        this.itemConfig = this.createItemConfig();\r\n        // Update XWUIItem\r\n        if (this.xwuiItem) {\r\n            this.xwuiItem.updateData(this.itemConfig);\r\n            // Update button content from item\r\n            const itemElement = this.container.querySelector('.xwui-item');\r\n            if (itemElement && this.buttonElement) {\r\n                this.buttonElement.innerHTML = itemElement.innerHTML;\r\n            }\r\n        }\r\n        // Update button state\r\n        if (this.buttonElement) {\r\n            this.buttonElement.disabled = this.config.disabled || loading;\r\n            if (loading) {\r\n                this.buttonElement.classList.add('xwui-button-loading');\r\n            } else {\r\n                this.buttonElement.classList.remove('xwui-button-loading');\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Add click event listener\r\n     */\r\n    public onClick(handler: (event: MouseEvent) => void): void {\r\n        this.clickHandlers.push(handler);\r\n        if (this.buttonElement) {\r\n            this.buttonElement.addEventListener('click', handler);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove click event listener\r\n     */\r\n    public offClick(handler: (event: MouseEvent) => void): void {\r\n        this.clickHandlers = this.clickHandlers.filter(h => h !== handler);\r\n        if (this.buttonElement) {\r\n            this.buttonElement.removeEventListener('click', handler);\r\n        }\r\n    }\r\n    \r\n    /**\r\n     * Re-attach event listeners after DOM update\r\n     */\r\n    private reattachListeners(): void {\r\n        // Re-attach all click handlers\r\n        this.clickHandlers.forEach((handler: (event: MouseEvent) => void) => {\r\n            if (this.buttonElement) {\r\n                this.buttonElement.addEventListener('click', handler);\r\n            }\r\n        });\r\n    }\r\n    \r\n    /**\r\n     * Update button configuration from JSON (ItemConfig)\r\n     * Helper method for backward compatibility\r\n     */\r\n    public updateFromItemConfig(itemConfig: ItemConfig): void {\r\n        this.itemConfig = itemConfig;\r\n        // Extract text from ItemConfig\r\n        if (itemConfig.primaryContent && itemConfig.primaryContent.length > 0) {\r\n            const textPart = itemConfig.primaryContent.find(part => part.type === 'text');\r\n            this.data.text = textPart ? String(textPart.value) : '';\r\n        }\r\n        // Extract config from ItemConfig\r\n        const sizeMap: Record<string, 'small' | 'medium' | 'large'> = {\r\n            'xs': 'small', 's': 'small', 'm': 'medium', 'l': 'large', 'xl': 'large'\r\n        };\r\n        const variantMap: Record<string, 'primary' | 'secondary' | 'success' | 'danger' | 'warning' | 'info' | 'outline' | 'ghost'> = {\r\n            'before_start': 'warning', 'processing': 'primary', 'error': 'danger', 'pass': 'secondary'\r\n        };\r\n        this.config = {\r\n            ...this.config,\r\n            variant: variantMap[itemConfig.status || 'pass'] || 'primary',\r\n            size: sizeMap[itemConfig.item_size || 'm'] || 'medium',\r\n            disabled: !itemConfig.itemActionsSettings?.canClick || false\r\n        };\r\n        this.setupDOM();\r\n        this.reattachListeners();\r\n    }\r\n\r\n    /**\r\n     * Get the native button element\r\n     */\r\n    public getButtonElement(): HTMLButtonElement | null {\r\n        return this.buttonElement;\r\n    }\r\n\r\n    public destroy(): void {\r\n        // Child component (xwuiItem) is automatically destroyed by base class\r\n        // Clean up event listeners\r\n        if (this.buttonElement) {\r\n            this.buttonElement.replaceWith(this.buttonElement.cloneNode(true));\r\n        }\r\n        // Clear references\r\n        this.xwuiItem = null;\r\n        this.buttonElement = null;\r\n        this.clickHandlers = [];\r\n        // Call parent to clean up registered child components\r\n        super.destroy();\r\n    }\r\n}\r\n\r\n// Set component name at class definition (before minification) - survives build tools\r\n(XWUIButton as any).componentName = 'XWUIButton';\r\n\r\n// Note: Custom Element is registered via createXWUIElement() in index.ts\r\n\r\n","/**\r\n * Generic Custom Element wrapper factory for XWUIComponent\r\n * Automatically handles conf_comp, data, conf_sys, conf_usr parsing\r\n * \r\n * Usage:\r\n * ```typescript\r\n * import { createXWUIElement } from './XWUIComponent.element';\r\n * createXWUIElement(MyComponent, 'my-component');\r\n * ```\r\n */\r\n\r\nimport { XWUIComponent, type XWUISystemConfig, type XWUIUserConfig } from './XWUIComponent';\r\n\r\n/**\r\n * Normalize attributes: merge flat attributes into conf_comp and data\r\n * Flat attributes override grouped attributes\r\n */\r\nfunction normalizeAttributes(\r\n    element: HTMLElement,\r\n    flatAttrsToConfig: string[] = [],  // Attributes that go into conf_comp\r\n    flatAttrsToData: string[] = []      // Attributes that go into data\r\n): { conf_comp: any; data: any; conf_sys?: XWUISystemConfig; conf_usr?: XWUIUserConfig } {\r\n    // Parse grouped attributes\r\n    const confComp = parseJSONAttribute(element.getAttribute('conf-comp') || '{}');\r\n    const data = parseJSONAttribute(element.getAttribute('data') || '{}');\r\n    const confSys = parseJSONAttribute(element.getAttribute('conf-sys') || '{}');\r\n    const confUsr = parseJSONAttribute(element.getAttribute('conf-usr') || '{}');\r\n    \r\n    // Merge flat attributes into conf_comp\r\n    const mergedConfComp = { ...confComp };\r\n    flatAttrsToConfig.forEach(attr => {\r\n        const kebabAttr = attr.replace(/([A-Z])/g, '-$1').toLowerCase();\r\n        const value = element.getAttribute(kebabAttr);\r\n        if (value !== null) {\r\n            // Try to parse as JSON, fallback to string\r\n            try {\r\n                mergedConfComp[attr] = JSON.parse(value);\r\n            } catch {\r\n                mergedConfComp[attr] = value;\r\n            }\r\n        }\r\n    });\r\n    \r\n    // Merge flat attributes into data\r\n    const mergedData = { ...data };\r\n    flatAttrsToData.forEach(attr => {\r\n        const kebabAttr = attr.replace(/([A-Z])/g, '-$1').toLowerCase();\r\n        const value = element.getAttribute(kebabAttr);\r\n        if (value !== null) {\r\n            // Try to parse as JSON, fallback to string\r\n            try {\r\n                mergedData[attr] = JSON.parse(value);\r\n            } catch {\r\n                mergedData[attr] = value;\r\n            }\r\n        }\r\n    });\r\n    \r\n    return {\r\n        conf_comp: mergedConfComp,\r\n        data: mergedData,\r\n        conf_sys: Object.keys(confSys).length > 0 ? confSys : undefined,\r\n        conf_usr: Object.keys(confUsr).length > 0 ? confUsr : undefined\r\n    };\r\n}\r\n\r\n/**\r\n * Parse JSON attribute safely (extracted for reuse)\r\n */\r\nfunction parseJSONAttribute(str: string): any {\r\n    try {\r\n        return JSON.parse(str);\r\n    } catch (error) {\r\n        // Try to fix common escaping issues\r\n        try {\r\n            let fixed = str;\r\n            fixed = fixed.replace(/\"([^\"\\\\]|\\\\.)*\"/g, (match) => {\r\n                return match.replace(/(?<!\\\\)\\n/g, '\\\\n')\r\n                           .replace(/(?<!\\\\)\\r/g, '\\\\r')\r\n                           .replace(/(?<!\\\\)\\t/g, '\\\\t')\r\n                           .replace(/(?<!\\\\)\"/g, '\\\\\"');\r\n            });\r\n            return JSON.parse(fixed);\r\n        } catch (secondError) {\r\n            try {\r\n                const manuallyFixed = str.replace(/\\n/g, '\\\\n')\r\n                                        .replace(/\\r/g, '\\\\r')\r\n                                        .replace(/\\t/g, '\\\\t');\r\n                return JSON.parse(manuallyFixed);\r\n            } catch (thirdError) {\r\n                return {};\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Create a Custom Element wrapper for any XWUIComponent subclass\r\n * Supports both flat attributes (standard HTML) and grouped attributes (XWUI pattern)\r\n * \r\n * @param ComponentClass - The component class to wrap\r\n * @param elementName - The kebab-case custom element name (e.g., 'xwui-script-editor')\r\n * @param options - Optional configuration for attribute normalization\r\n * @returns The Custom Element class (already registered)\r\n */\r\nexport function createXWUIElement<T extends XWUIComponent<any, any>>(\r\n    ComponentClass: new (container: HTMLElement, data?: any, conf_comp?: any, conf_sys?: XWUISystemConfig, conf_usr?: XWUIUserConfig) => T,\r\n    elementName: string,\r\n    options?: {\r\n        flatAttrsToConfig?: string[];  // Flat attributes that should go into conf_comp\r\n        flatAttrsToData?: string[];    // Flat attributes that should go into data\r\n    }\r\n): typeof HTMLElement {\r\n    // Skip if already registered\r\n    const existingElement = customElements.get(elementName);\r\n    if (existingElement) {\r\n        return existingElement as typeof HTMLElement;\r\n    }\r\n\r\n    const flatAttrsToConfig = options?.flatAttrsToConfig || [];\r\n    const flatAttrsToData = options?.flatAttrsToData || [];\r\n\r\n    class ComponentElement extends HTMLElement {\r\n        private instance?: T;\r\n\r\n        connectedCallback() {\r\n            // Normalize attributes: merge flat attributes into conf_comp and data\r\n            const normalized = normalizeAttributes(this, flatAttrsToConfig, flatAttrsToData);\r\n\r\n            // Initialize component - 'this' IS the container\r\n            this.instance = new ComponentClass(\r\n                this,\r\n                normalized.data,\r\n                normalized.conf_comp,\r\n                normalized.conf_sys,\r\n                normalized.conf_usr\r\n            );\r\n        }\r\n\r\n        disconnectedCallback() {\r\n            // Cleanup when element is removed\r\n            if (this.instance && typeof (this.instance as any).destroy === 'function') {\r\n                (this.instance as any).destroy();\r\n            }\r\n            this.instance = undefined;\r\n        }\r\n\r\n\r\n        /**\r\n         * Get component instance (for advanced usage)\r\n         */\r\n        getInstance(): T | undefined {\r\n            return this.instance;\r\n        }\r\n\r\n        /**\r\n         * Update data - generic update, components can override for specific logic\r\n         */\r\n        setData(data: any): void {\r\n            if (this.instance && this.instance.data) {\r\n                Object.assign(this.instance.data, data);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Update conf_comp - generic update, components can override for specific logic\r\n         */\r\n        setConfComp(confComp: any): void {\r\n            if (this.instance && this.instance.config) {\r\n                Object.assign(this.instance.config, confComp);\r\n            }\r\n        }\r\n    }\r\n\r\n    // Register the custom element with error handling\r\n    try {\r\n        customElements.define(elementName, ComponentElement);\r\n    } catch (error) {\r\n        // If registration fails, check if it's already registered\r\n        const alreadyRegistered = customElements.get(elementName);\r\n        if (alreadyRegistered) {\r\n            // If it exists, return the existing element\r\n            return alreadyRegistered as typeof HTMLElement;\r\n        }\r\n        // If it's a different error, log it and rethrow\r\n        console.error(`Failed to register custom element '${elementName}':`, error);\r\n        throw error;\r\n    }\r\n\r\n    return ComponentElement;\r\n}\r\n\r\n","/**\r\n * XWUIButton Component Exports\r\n * Usage: Custom Element <xwui-button> (auto-registered)\r\n */\r\n\r\nimport { XWUIButton } from './XWUIButton';\r\nimport { createXWUIElement } from '../XWUIComponent/XWUIComponent.element';\r\n\r\n// Core component (framework-agnostic)\r\nexport { XWUIButton } from './XWUIButton';\r\nexport type { XWUIButtonConfig, XWUIButtonData } from './XWUIButton';\r\n// Re-export types from XWUIComponent\r\nexport type { XWUISystemConfig, XWUIUserConfig } from '../XWUIComponent/XWUIComponent';\r\n\r\n// Auto-register Custom Element using generic factory\r\n// Supports both flat attributes (variant, size, disabled, text, etc.) and grouped attributes (conf-comp, data)\r\ncreateXWUIElement(XWUIButton, 'xwui-button', {\r\n    flatAttrsToConfig: ['variant', 'size', 'disabled', 'loading', 'icon', 'iconPosition', 'fullWidth', 'type'],\r\n    flatAttrsToData: ['text']\r\n});\r\n\r\n","/**\r\n * Bootstrap for Angular demo: set CSS base path then register <xwui-button>.\r\n * Built by Vite; output loaded by Angular index.html.\r\n */\r\nimport { XWUIComponent } from '../../src/components/component/XWUIComponent/XWUIComponent';\r\n\r\n// So XWUI components load CSS from /assets/xwui/ (served as static assets in dev and build)\r\n(XWUIComponent as any).cssBasePath = '/assets/xwui/';\r\n\r\n// Side effect: registers <xwui-button> custom element\r\nimport '../../src/components/component/XWUIButton/index';\r\n","/**\r\n * XWUITooltip Component\r\n * Hover tooltip with placement options\r\n */\r\n\r\nimport { XWUIComponent, type XWUISystemConfig, type XWUIUserConfig } from '../XWUIComponent/XWUIComponent';\r\n\r\n// Component-level configuration\r\nexport interface XWUITooltipConfig {\r\n    placement?: 'top' | 'bottom' | 'left' | 'right';\r\n    trigger?: 'hover' | 'click' | 'focus';\r\n    delay?: number;\r\n    offset?: number;\r\n    arrow?: boolean;\r\n    className?: string;\r\n}\r\n\r\n// Data type\r\nexport interface XWUITooltipData {\r\n    content: string | HTMLElement;\r\n    target?: HTMLElement;\r\n}\r\n\r\nexport class XWUITooltip extends XWUIComponent<XWUITooltipData, XWUITooltipConfig> {\r\n    private tooltipElement: HTMLElement | null = null;\r\n    private isVisible: boolean = false;\r\n    private showTimeout: ReturnType<typeof setTimeout> | null = null;\r\n    private hideTimeout: ReturnType<typeof setTimeout> | null = null;\r\n\r\n    constructor(\r\n        container: HTMLElement,\r\n        data: XWUITooltipData,\r\n        conf_comp: XWUITooltipConfig = {},\r\n        conf_sys?: XWUISystemConfig,\r\n        conf_usr?: XWUIUserConfig\r\n    ) {\r\n        super(container, data, conf_comp, conf_sys, conf_usr);\r\n        this.setupTrigger();\r\n        this.createTooltipElement();\r\n    }\r\n\r\n    protected createConfig(\r\n        conf_comp?: XWUITooltipConfig,\r\n        conf_usr?: XWUIUserConfig,\r\n        conf_sys?: XWUISystemConfig\r\n    ): XWUITooltipConfig {\r\n        return {\r\n            placement: conf_comp?.placement ?? 'top',\r\n            trigger: conf_comp?.trigger ?? 'hover',\r\n            delay: conf_comp?.delay ?? 200,\r\n            offset: conf_comp?.offset ?? 8,\r\n            arrow: conf_comp?.arrow ?? true,\r\n            className: conf_comp?.className\r\n        };\r\n    }\r\n\r\n    private createTooltipElement(): void {\r\n        this.tooltipElement = document.createElement('div');\r\n        this.tooltipElement.className = 'xwui-tooltip';\r\n        this.tooltipElement.classList.add(`xwui-tooltip-${this.config.placement}`);\r\n        \r\n        if (this.config.arrow) {\r\n            this.tooltipElement.classList.add('xwui-tooltip-arrow');\r\n        }\r\n        if (this.config.className) {\r\n            this.tooltipElement.classList.add(this.config.className);\r\n        }\r\n\r\n        this.tooltipElement.setAttribute('role', 'tooltip');\r\n\r\n        // Content\r\n        if (typeof this.data.content === 'string') {\r\n            this.tooltipElement.textContent = this.data.content;\r\n        } else {\r\n            this.tooltipElement.appendChild(this.data.content);\r\n        }\r\n    }\r\n\r\n    private setupTrigger(): void {\r\n        const target = this.data.target || this.container;\r\n\r\n        if (this.config.trigger === 'hover') {\r\n            target.addEventListener('mouseenter', () => this.scheduleShow());\r\n            target.addEventListener('mouseleave', () => this.scheduleHide());\r\n        } else if (this.config.trigger === 'click') {\r\n            target.addEventListener('click', () => this.toggle());\r\n            document.addEventListener('click', (e) => {\r\n                if (this.isVisible && !target.contains(e.target as Node) && \r\n                    !this.tooltipElement?.contains(e.target as Node)) {\r\n                    this.hide();\r\n                }\r\n            });\r\n        } else if (this.config.trigger === 'focus') {\r\n            target.addEventListener('focus', () => this.show());\r\n            target.addEventListener('blur', () => this.hide());\r\n        }\r\n    }\r\n\r\n    private scheduleShow(): void {\r\n        if (this.hideTimeout) {\r\n            clearTimeout(this.hideTimeout);\r\n            this.hideTimeout = null;\r\n        }\r\n        this.showTimeout = setTimeout(() => this.show(), this.config.delay);\r\n    }\r\n\r\n    private scheduleHide(): void {\r\n        if (this.showTimeout) {\r\n            clearTimeout(this.showTimeout);\r\n            this.showTimeout = null;\r\n        }\r\n        this.hideTimeout = setTimeout(() => this.hide(), this.config.delay);\r\n    }\r\n\r\n    private calculatePosition(): { top: number; left: number } {\r\n        const target = this.data.target || this.container;\r\n        const targetRect = target.getBoundingClientRect();\r\n        const tooltipRect = this.tooltipElement!.getBoundingClientRect();\r\n        const offset = this.config.offset || 8;\r\n\r\n        let top = 0;\r\n        let left = 0;\r\n\r\n        switch (this.config.placement) {\r\n            case 'top':\r\n                top = targetRect.top - tooltipRect.height - offset;\r\n                left = targetRect.left + (targetRect.width - tooltipRect.width) / 2;\r\n                break;\r\n            case 'bottom':\r\n                top = targetRect.bottom + offset;\r\n                left = targetRect.left + (targetRect.width - tooltipRect.width) / 2;\r\n                break;\r\n            case 'left':\r\n                top = targetRect.top + (targetRect.height - tooltipRect.height) / 2;\r\n                left = targetRect.left - tooltipRect.width - offset;\r\n                break;\r\n            case 'right':\r\n                top = targetRect.top + (targetRect.height - tooltipRect.height) / 2;\r\n                left = targetRect.right + offset;\r\n                break;\r\n        }\r\n\r\n        // Keep tooltip in viewport\r\n        top = Math.max(8, Math.min(top, window.innerHeight - tooltipRect.height - 8));\r\n        left = Math.max(8, Math.min(left, window.innerWidth - tooltipRect.width - 8));\r\n\r\n        return { top: top + window.scrollY, left: left + window.scrollX };\r\n    }\r\n\r\n    public show(): void {\r\n        if (this.isVisible || !this.tooltipElement) return;\r\n\r\n        document.body.appendChild(this.tooltipElement);\r\n        this.tooltipElement.style.visibility = 'hidden';\r\n        this.tooltipElement.style.display = 'block';\r\n\r\n        // Calculate and set position\r\n        const { top, left } = this.calculatePosition();\r\n        this.tooltipElement.style.top = `${top}px`;\r\n        this.tooltipElement.style.left = `${left}px`;\r\n        this.tooltipElement.style.visibility = 'visible';\r\n\r\n        // Trigger animation\r\n        requestAnimationFrame(() => {\r\n            this.tooltipElement?.classList.add('xwui-tooltip-visible');\r\n        });\r\n\r\n        this.isVisible = true;\r\n    }\r\n\r\n    public hide(): void {\r\n        if (!this.isVisible || !this.tooltipElement) return;\r\n\r\n        this.tooltipElement.classList.remove('xwui-tooltip-visible');\r\n        \r\n        setTimeout(() => {\r\n            if (this.tooltipElement && this.tooltipElement.parentNode) {\r\n                this.tooltipElement.parentNode.removeChild(this.tooltipElement);\r\n            }\r\n        }, 150);\r\n\r\n        this.isVisible = false;\r\n    }\r\n\r\n    public toggle(): void {\r\n        if (this.isVisible) {\r\n            this.hide();\r\n        } else {\r\n            this.show();\r\n        }\r\n    }\r\n\r\n    public setContent(content: string | HTMLElement): void {\r\n        this.data.content = content;\r\n        if (this.tooltipElement) {\r\n            this.tooltipElement.innerHTML = '';\r\n            if (typeof content === 'string') {\r\n                this.tooltipElement.textContent = content;\r\n            } else {\r\n                this.tooltipElement.appendChild(content);\r\n            }\r\n        }\r\n    }\r\n\r\n    public getElement(): HTMLElement | null {\r\n        return this.tooltipElement;\r\n    }\r\n\r\n    public destroy(): void {\r\n        if (this.showTimeout) clearTimeout(this.showTimeout);\r\n        if (this.hideTimeout) clearTimeout(this.hideTimeout);\r\n        this.hide();\r\n        this.tooltipElement = null;\r\n    }\r\n}\r\n\r\n// Set component name at class definition (before minification) - survives build tools\r\n(XWUITooltip as any).componentName = 'XWUITooltip';\r\n\r\n// Helper function for quick tooltips\r\nexport function tooltip(target: HTMLElement, content: string, options?: XWUITooltipConfig): XWUITooltip {\r\n    const container = document.createElement('span');\r\n    return new XWUITooltip(container, { content, target }, options);\r\n}\r\n\r\n","/**\r\n * XWUITooltip Component Exports\r\n */\r\n\r\nimport { XWUITooltip } from './XWUITooltip';\r\nimport { createXWUIElement } from '../XWUIComponent/XWUIComponent.element';\r\n\r\n// Core component\r\nexport { XWUITooltip, tooltip } from './XWUITooltip';\r\nexport type { XWUITooltipConfig, XWUITooltipData } from './XWUITooltip';\r\nexport type { XWUISystemConfig, XWUIUserConfig } from '../XWUIComponent/XWUIComponent';\r\n\r\n// Auto-register Custom Element\r\ncreateXWUIElement(XWUITooltip, 'xwui-tooltip', {\r\n    flatAttrsToConfig: ['placement', 'trigger', 'delay', 'offset', 'arrow', 'className'],\r\n    flatAttrsToData: ['content']\r\n});\r\n\r\n"],"names":["uid","createXWUIElement","index","buttonText","XWUITooltip"],"mappings":"AAwFO,MAAe,iBAAf,MAAe,eAA0C;AAAA,EAqF5D,YACI,WACA,MACA,WACA,UACA,UACF;AA5EF,SAAU,sCAAoD,IAAA;AAoB9D,SAAQ,iBAAoC,CAAA;AAK5C,SAAQ,iBAA0B;AAKlC,SAAQ,aAAqB;AAK7B,SAAQ,uBAAgC;AA0CpC,SAAK,YAAY;AACjB,SAAK,WAAW;AAChB,SAAK,WAAW;AAKhB,UAAM,gBAAiB,KAAK,YAAoB,iBAAiB,KAAK,YAAY;AAClF,SAAK,SAAS,KAAK,aAAa;AAGhC,UAAM,EAAE,MAAM,aAAa,QAAQ,eAAc,UAAiB,IAAI;AACtE,SAAK,OAAO;AACZ,SAAK,MAAM;AAGX,SAAK,kBAAkB,KAAK,aAAa,WAAW,UAAU,QAAQ;AAGtE,SAAK,SAAS,KAAK,aAAa,WAAW,UAAU,QAAQ;AAG7D,UAAM,kBAAmB,WAAmB;AAC5C,SAAK,iBAAiB,mBAAmB,UAAU,WAAW,UAAU,WAAW;AAKnF,UAAM,SAAU,KAAK,MAAc;AACnC,QAAI,KAAK,kBAAkB,UAAU,OAAO,WAAW,UAAU;AAE7D,WAAK,aAAa;AAAA,IACtB,OAAO;AAEH,WAAK,aAAa,QAAQ,cAAc,aAAa,IAAI,KAAK,GAAG;AAAA,IACrE;AAGA,QAAI,KAAK,gBAAgB;AACrB,WAAK,oBAAA;AACL,WAAK,kBAAA;AAAA,IACT;AAGA,SAAK,iBAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAlFA,OAAe,cAAsB;AACjC,WAAO,GAAG,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,UAAU,GAAG,EAAE,CAAC;AAAA,EACvE;AAAA;AAAA;AAAA;AAAA,EAKA,OAAe,UAAa,MAAW,aAAgD;AAEnF,QAAI,QAAQ,OAAO,SAAS,UAAU;AAElC,UAAI,KAAK,OAAO,OAAO,KAAK,QAAQ,UAAU;AAC1C,eAAO,EAAE,MAAM,KAAK,KAAK,IAAA;AAAA,MAC7B;AAGA,UAAI,eAAe,OAAO,gBAAgB,UAAU;AAChD,eAAO,EAAE,MAAM,EAAE,GAAG,MAAM,KAAK,YAAA,GAAe,KAAK,YAAA;AAAA,MACvD;AAGA,YAAMA,OAAM,eAAc,YAAA;AAC1B,aAAO,EAAE,MAAM,EAAE,GAAG,MAAM,KAAAA,KAAAA,GAAO,KAAAA,KAAAA;AAAAA,IACrC;AAGA,UAAM,MAAM,eAAe,eAAc,YAAA;AACzC,WAAO,EAAE,MAAM,IAAA;AAAA,EACnB;AAAA;AAAA;AAAA;AAAA,EA2DA,OAAiB,UAAU,MAAc,OAAe,OAAe,KAAW;AAC9E,UAAM,8BAAc,KAAA;AACpB,YAAQ,QAAQ,QAAQ,QAAA,IAAa,OAAO,KAAK,KAAK,KAAK,GAAK;AAChE,aAAS,SAAS,GAAG,IAAI,IAAI,mBAAmB,KAAK,CAAC,YAAY,QAAQ,YAAA,CAAa;AAAA,EAC3F;AAAA,EAEA,OAAiB,UAAU,MAA6B;AACpD,UAAM,SAAS,OAAO;AACtB,UAAM,KAAK,SAAS,OAAO,MAAM,GAAG;AACpC,aAAS,IAAI,GAAG,IAAI,GAAG,QAAQ,KAAK;AAChC,UAAI,IAAI,GAAG,CAAC;AACZ,aAAO,EAAE,OAAO,CAAC,MAAM,SAAS,EAAE,UAAU,GAAG,EAAE,MAAM;AACvD,UAAI,EAAE,QAAQ,MAAM,MAAM,GAAG;AACzB,eAAO,mBAAmB,EAAE,UAAU,OAAO,QAAQ,EAAE,MAAM,CAAC;AAAA,MAClE;AAAA,IACJ;AACA,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA,EAMU,sBAA4B;AAClC,QAAI,CAAC,KAAK,kBAAkB,CAAC,KAAK,WAAY;AAG9C,SAAK,uBAAuB;AAE5B,QAAI;AAEA,UAAI,YAA2B;AAC/B,UAAI;AACA,oBAAY,aAAa,QAAQ,KAAK,UAAU;AAAA,MACpD,SAAS,GAAG;AAAA,MAEZ;AAEA,UAAI,CAAC,WAAW;AACZ,oBAAY,eAAc,UAAU,KAAK,UAAU;AAAA,MACvD;AAEA,UAAI,WAAW;AACX,YAAI;AACA,gBAAM,aAAa,KAAK,MAAM,SAAS;AAGvC,eAAK,OAAO,EAAE,GAAG,KAAK,MAAM,GAAG,WAAA;AAAA,QACnC,SAAS,GAAG;AACR,kBAAQ,KAAK,kCAAkC,KAAK,UAAU,KAAK,CAAC;AAAA,QACxE;AAAA,MACJ;AAAA,IACJ,UAAA;AAEI,WAAK,uBAAuB;AAAA,IAChC;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA,EAMU,oBAA0B;AAChC,QAAI,CAAC,KAAK,kBAAkB,CAAC,KAAK,cAAc,KAAK,qBAAsB;AAE3E,QAAI;AACA,YAAM,UAAU,KAAK,UAAU,KAAK,IAAI;AAGxC,qBAAc,UAAU,KAAK,YAAY,OAAO;AAChD,mBAAa,QAAQ,KAAK,YAAY,OAAO;AAG7C,mBAAa,QAAQ,GAAG,KAAK,UAAU,YAAY,KAAK,MAAM,UAAU;AAGxE,YAAM,YAAY,aAAa,KAAK,UAAU;AAC9C,aAAO,cAAc,IAAI,MAAM,SAAS,CAAC;AAAA,IAC7C,SAAS,GAAG;AACR,cAAQ,KAAK,2BAA2B,KAAK,UAAU,KAAK,CAAC;AAAA,IACjE;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKU,gBAAwB;AAC9B,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA;AAAA,EAMQ,oBAA0B;AAC9B,QAAI,CAAC,KAAK,kBAAkB,CAAC,KAAK,WAAY;AAE9C,UAAM,aAAa,KAAK;AACxB,UAAM,YAAY;AAGlB,UAAM,eAAe,MAAM;AACvB,UAAI,UAAU,qBAAsB;AACpC,gBAAU,oBAAA;AACV,gBAAU,eAAA;AAAA,IACd;AAGA,UAAM,iBAAiB,CAAC,UAAwB;AAC5C,UAAI,MAAM,QAAQ,GAAG,UAAU,cAAc,MAAM,UAAU;AACzD,qBAAA;AAAA,MACJ;AAAA,IACJ;AACA,WAAO,iBAAiB,WAAW,cAAc;AAGjD,UAAM,YAAY,aAAa,UAAU;AACzC,UAAM,qBAAqB,MAAM;AAC7B,mBAAA;AAAA,IACJ;AACA,WAAO,iBAAiB,WAAW,kBAAkB;AAGpD,SAAa,kBAAkB;AAC/B,SAAa,sBAAsB;AACnC,SAAa,iBAAiB;AAAA,EACnC;AAAA;AAAA;AAAA;AAAA;AAAA,EAMU,iBAAuB;AAAA,EAGjC;AAAA;AAAA;AAAA;AAAA;AAAA,EAMO,WAAW,SAA+B;AAE7C,SAAK,OAAO,EAAE,GAAG,KAAK,MAAM,GAAG,QAAA;AAG/B,QAAI,KAAK,gBAAgB;AACrB,WAAK,kBAAA;AAAA,IACT;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKU,aACN,WACA,UACA,UACgB;AAChB,UAAM,SAA2B;AAAA,MAC7B,QAAQ,WAAW,UAAU,UAAU,UAAU,UAAU,UAAU;AAAA,MACrE,UAAU,WAAW,YAAY,UAAU,YAAY,UAAU,YAAY;AAAA,MAC7E,WAAW,WAAW,aAAa,UAAU,aAAa,UAAU,aAAa;AAAA,MACjF,SAAS;AAAA,QACL,MAAM,WAAW,SAAS,QAAQ,UAAU,SAAS,QAAQ,UAAU,SAAS,QAAQ;AAAA,QACxF,MAAM,WAAW,SAAS,QAAQ,UAAU,SAAS,QAAQ,UAAU,SAAS,QAAQ;AAAA,QACxF,UAAU,WAAW,SAAS,YAAY,UAAU,SAAS,YAAY,UAAU,SAAS,YAAY;AAAA,QACxG,UAAU;AAAA,UACN,eAAe,WAAW,SAAS,UAAU,iBAChC,UAAU,SAAS,UAAU,iBAC7B,UAAU,SAAS,UAAU,iBAAiB;AAAA,UAC3D,iBAAiB,WAAW,SAAS,UAAU,mBAChC,UAAU,SAAS,UAAU,mBAC7B,UAAU,SAAS,UAAU,mBAAmB;AAAA,QAAA;AAAA,QAEnE,QAAQ;AAAA,UACJ,iBAAiB,WAAW,SAAS,QAAQ,mBAC9B,UAAU,SAAS,QAAQ,mBAC3B,UAAU,SAAS,QAAQ,mBAAmB;AAAA,UAC7D,aAAa,WAAW,SAAS,QAAQ,eAC9B,UAAU,SAAS,QAAQ,eAC3B,UAAU,SAAS,QAAQ,eAAe;AAAA,QAAA;AAAA,QAEzD,YAAY;AAAA,UACR,iBAAiB,WAAW,SAAS,YAAY,mBAClC,UAAU,SAAS,YAAY,mBAC/B,UAAU,SAAS,YAAY,mBAAmB;AAAA,QAAA;AAAA,QAErE,UAAU;AAAA,UACN,aAAa,WAAW,SAAS,UAAU,eAChC,UAAU,SAAS,UAAU,eAC7B,UAAU,SAAS,UAAU,eAAe;AAAA,UACvD,iBAAiB,WAAW,SAAS,UAAU,mBAChC,UAAU,SAAS,UAAU,mBAC7B,UAAU,SAAS,UAAU,mBAAmB;AAAA,QAAA;AAAA,QAEnE,UAAU;AAAA,UACN,aAAa,WAAW,SAAS,UAAU,eAChC,UAAU,SAAS,UAAU,eAC7B,UAAU,SAAS,UAAU,eAAe;AAAA,UACvD,eAAe,WAAW,SAAS,UAAU,iBAChC,UAAU,SAAS,UAAU,iBAC7B,UAAU,SAAS,UAAU,iBAAiB;AAAA,QAAA;AAAA,MAC/D;AAAA,IACJ;AAEJ,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAeA,aAAoB,iBAAiB,OAAe,wBAA+D;AAC/G,QAAI;AACA,YAAM,WAAW,MAAM,MAAM,IAAI;AACjC,UAAI,CAAC,SAAS,IAAI;AACd,eAAO;AAAA,MACX;AACA,aAAO,MAAM,SAAS,KAAA;AAAA,IAC1B,QAAQ;AACJ,aAAO;AAAA,IACX;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKA,aAAoB,eAAe,OAAe,wBAA6D;AAC3G,QAAI;AACA,YAAM,WAAW,MAAM,MAAM,IAAI;AACjC,UAAI,CAAC,SAAS,IAAI;AACd,eAAO;AAAA,MACX;AACA,aAAO,MAAM,SAAS,KAAA;AAAA,IAC1B,QAAQ;AACJ,aAAO;AAAA,IACX;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKO,qBAAuC;AAC1C,WAAO,KAAK;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA,EAKO,eAA8B;AACjC,WAAO,KAAK,gBAAgB,aAAa;AAAA,EAC7C;AAAA;AAAA;AAAA;AAAA,EAKO,YAAoB;AACvB,WAAO,KAAK,gBAAgB,UAAU;AAAA,EAC1C;AAAA;AAAA;AAAA;AAAA,EAKO,cAAsB;AACzB,WAAO,KAAK,gBAAgB,YAAY;AAAA,EAC5C;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,OAAe,YAAY,KAAqB;AAC5C,WAAO,IACF,QAAQ,0BAA0B,SAAS,EAC3C,QAAQ,mBAAmB,OAAO,EAClC,YAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,OAAe,oBAA4B;AAEvC,QAAI,eAAc,aAAa;AAC3B,aAAO,eAAc;AAAA,IACzB;AAGA,UAAM,cAAc,OAAO,SAAS;AAGpC,QAAI,YAAY,SAAS,QAAQ,GAAG;AAChC,YAAM,YAAY,YAAY,QAAQ,QAAQ;AAC9C,YAAM,gBAAgB,YAAY,UAAU,YAAY,SAAS,MAAM;AAEvE,YAAM,SAAS,cAAc,MAAM,KAAK,KAAK,CAAA,GAAI;AAEjD,aAAO,MAAM,OAAO,KAAK,IAAI;AAAA,IACjC;AAGA,QAAI,YAAY,SAAS,OAAO,GAAG;AAE/B,YAAM,YAAY,YAAY,YAAY,GAAG;AAC7C,YAAM,aAAa,YAAY,IAAI,YAAY,UAAU,GAAG,SAAS,IAAI;AAGzE,UAAI,WAAW,SAAS,kBAAkB,GAAG;AAIzC,cAAM,kBAAkB,WAAW,QAAQ,kBAAkB;AAC7D,cAAM,sBAAsB,WAAW,UAAU,kBAAkB,mBAAmB,MAAM;AAI5F,cAAM,QAAQ,uBAAuB,oBAAoB,MAAM,KAAK,KAAK,CAAA,GAAI,SAAS,IAAI;AAK1F,eAAO,MAAM,OAAO,KAAK;AAAA,MAC7B,OAAO;AAEH,cAAM,WAAW,WAAW,QAAQ,OAAO;AAC3C,cAAM,eAAe,WAAW,UAAU,WAAW,QAAQ,MAAM;AACnE,cAAM,QAAQ,gBAAgB,aAAa,MAAM,KAAK,KAAK,CAAA,GAAI,SAAS,IAAI;AAG5E,eAAO,MAAM,OAAO,KAAK,IAAI;AAAA,MACjC;AAAA,IACJ;AAGA,UAAM,UAAU,SAAS,qBAAqB,QAAQ;AACtD,aAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,KAAK;AACrC,YAAM,MAAM,QAAQ,CAAC,EAAE;AACvB,UAAI,CAAC,IAAK;AAIV,UAAI,IAAI,SAAS,OAAO,KAAK,IAAI,SAAS,KAAK,KAAK,IAAI,SAAS,aAAa,GAAG;AAC7E;AAAA,MACJ;AAEA,UAAI;AACA,cAAM,YAAY,IAAI,IAAI,KAAK,OAAO,SAAS,IAAI;AACnD,cAAM,aAAa,UAAU;AAG7B,YAAI,WAAW,SAAS,kBAAkB,GAAG;AACzC,gBAAM,kBAAkB,WAAW,QAAQ,kBAAkB;AAC7D,gBAAM,sBAAsB,WAAW,UAAU,kBAAkB,mBAAmB,MAAM;AAE5F,gBAAM,YAAY,oBAAoB,YAAY,GAAG;AACrD,gBAAM,UAAU,YAAY,IAAI,oBAAoB,UAAU,GAAG,SAAS,IAAI;AAC9E,gBAAM,QAAQ,WAAW,QAAQ,MAAM,KAAK,KAAK,CAAA,GAAI,SAAS,IAAI;AAClE,iBAAO,MAAM,OAAO,KAAK;AAAA,QAC7B;AAGA,YAAI,WAAW,SAAS,QAAQ,GAAG;AAC/B,gBAAM,YAAY,WAAW,QAAQ,QAAQ;AAC7C,gBAAM,gBAAgB,WAAW,UAAU,YAAY,SAAS,MAAM;AACtE,gBAAM,SAAS,cAAc,MAAM,KAAK,KAAK,CAAA,GAAI;AACjD,iBAAO,MAAM,OAAO,KAAK,IAAI;AAAA,QACjC;AAAA,MACJ,SAAS,GAAG;AAER;AAAA,MACJ;AAAA,IACJ;AAGA,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOQ,mBAAyB;AAG7B,UAAM,gBAAiB,KAAK,YAAoB,iBAAiB,KAAK,YAAY;AAGlF,QAAI,CAAC,iBAAiB,cAAc,WAAW,GAAG;AAC9C,cAAQ,KAAK,0DAA0D;AACvE;AAAA,IACJ;AAGA,QAAI,cAAc,UAAU,GAAG;AAC3B,cAAQ,KAAK,yDAAyD,aAAa;AACnF,cAAQ,KAAK,iGAAiG;AAC9G;AAAA,IACJ;AAEA,UAAM,cAAc,GAAG,aAAa;AACpC,UAAM,QAAQ,YAAY,cAAc,YAAA,CAAa;AAGrD,UAAM,mBAAmB,SAAS,eAAe,KAAK;AACtD,QAAI,kBAAkB;AAClB;AAAA,IACJ;AAGA,UAAM,WAAW,SAAS,iBAAiB,wBAAwB;AACnE,aAAS,IAAI,GAAG,IAAI,SAAS,QAAQ,KAAK;AACtC,YAAM,OAAQ,SAAS,CAAC,EAAsB;AAC9C,UAAI,QAAQ,KAAK,SAAS,WAAW,GAAG;AACpC;AAAA,MACJ;AAAA,IACJ;AAGA,UAAM,WAAW,eAAc,kBAAA;AAI/B,UAAM,qBAAqB,SAAS,QAAQ,QAAQ,EAAE;AAItD,UAAM,YAAY,sBAAsB,CAAC,mBAAmB,SAAS,GAAG,IAAI,MAAM;AAClF,UAAM,UAAU,qBAAqB,YAAY,gBAAgB,MAAM;AAKvE,QAAI;AACJ,QAAI;AACA,UAAI,QAAQ,WAAW,GAAG,GAAG;AAEzB,uBAAe,IAAI,IAAI,SAAS,OAAO,SAAS,MAAM,EAAE;AAAA,MAC5D,WAAW,QAAQ,WAAW,KAAK,KAAK,QAAQ,WAAW,IAAI,GAAG;AAE9D,uBAAe,IAAI,IAAI,SAAS,OAAO,SAAS,IAAI,EAAE;AAAA,MAC1D,OAAO;AAEH,uBAAe,IAAI,IAAI,OAAO,SAAS,OAAO,SAAS,IAAI,EAAE;AAAA,MACjE;AAAA,IACJ,SAAS,GAAG;AAER,cAAQ,KAAK,iDAAiD,aAAa,KAAK,SAAS,CAAC;AAC1F,qBAAe;AAAA,IACnB;AAGA,QAAI,OAAO,WAAW,eAAgB,OAAe,gBAAgB;AACjE,cAAQ,IAAI,kCAAkC,aAAa,IAAI;AAAA,QAC3D;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,aAAa,OAAO,SAAS;AAAA,MAAA,CAChC;AAAA,IACL;AAGA,UAAM,OAAO,SAAS,cAAc,MAAM;AAC1C,SAAK,KAAK;AACV,SAAK,MAAM;AACX,SAAK,OAAO;AACZ,SAAK,OAAO;AAGZ,SAAK,UAAU,MAAM;AACjB,cAAQ,KAAK,yCAAyC,aAAa,SAAS,YAAY,EAAE;AAAA,IAC9F;AAGA,SAAK,eAAe,KAAK,IAAI;AAG7B,aAAS,KAAK,YAAY,IAAI;AAAA,EAClC;AAAA;AAAA;AAAA;AAAA;AAAA,EAMQ,qBAA2B;AAC/B,SAAK,eAAe,QAAQ,CAAA,SAAQ;AAChC,UAAI,KAAK,YAAY;AACjB,aAAK,WAAW,YAAY,IAAI;AAAA,MACpC;AAAA,IACJ,CAAC;AACD,SAAK,iBAAiB,CAAA;AAAA,EAC1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAsBU,uBAAuB,WAA6D;AAC1F,QAAI,WAAW;AACX,WAAK,gBAAgB,IAAI,SAAS;AAAA,IACtC;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQU,yBAAyB,WAA6D;AAC5F,QAAI,WAAW;AACX,WAAK,gBAAgB,OAAO,SAAS;AAAA,IACzC;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOU,yBAA+B;AACrC,eAAW,SAAS,KAAK,iBAAiB;AACtC,UAAI,OAAO;AACP,YAAI;AACA,gBAAM,QAAA;AAAA,QACV,SAAS,OAAO;AACZ,kBAAQ,KAAK,qCAAqC,KAAK;AAAA,QAC3D;AAAA,MACJ;AAAA,IACJ;AACA,SAAK,gBAAgB,MAAA;AAAA,EACzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA0DO,UAAgB;AAEnB,SAAK,uBAAA;AAGL,SAAK,mBAAA;AAAA,EAGT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAiBA,OAAc,sBACV,gBACA,aACI;AACJ,UAAM,YAAY,eAAe;AACjC,UAAM,YAAY,eAAe,KAAK,YAAY,SAAS;AAG3D,YAAA,QAAA,EAAA,KAAA,MAAA,qBAAA,EAAkC,KAAK,CAAC,EAAE,mBAAAC,yBAAwB;AAC9D,MAAAA,mBAAkB,gBAAgB,SAAS;AAAA,IAC/C,CAAC;AAAA,EACL;AACJ;AAvwBI,eAAc,cAA6B;AAtBxC,IAAe,gBAAf;ACmEA,MAAM,YAAuC;AAAA,EAChD,MAAM;AAAA,EACN,MAAM;AAAA,EACN,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,QAAQ;AAAA,EACR,MAAM;AAAA,EACN,UAAU;AAAA,EACV,MAAM;AAAA,EACN,KAAK;AAAA,EACL,OAAO;AAAA,EACP,SAAS;AAAA,EACT,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,cAAc;AAAA,EACd,SAAS;AACb;AAEO,SAAS,WAAW,UAA2B;AAClD,MAAI,CAAC,SAAU,QAAO,UAAU;AAChC,SAAO,UAAU,SAAS,YAAA,CAAa,KAAK,UAAU;AAC1D;AAIO,SAAS,kBAAkB,MAAmB,UAAsC,eAAyB,WAA4B;AAC5I,QAAM,qBAAqB,gBAAgB,0BAA0B;AAErE,UAAQ,KAAK,MAAA;AAAA,IACT,KAAK;AACD,UAAI,QAAQ,OAAO,KAAK,UAAU,WAAW,KAAK,QAAQ,KAAK,UAAU,KAAK,KAAK;AAGnF,UAAI,YAAY,SAAS,KAAK,GAAG;AAC7B,gBAAQ,SAAS,KAAK;AAAA,MAC1B;AAEA,YAAM,eAAe;AAAA,QACjB,KAAK,UAAU,SAAS,wBAAwB;AAAA,QAChD,KAAK,UAAU,YAAY,2BAA2B;AAAA,QACtD,KAAK,UAAU,cAAc,6BAA6B;AAAA,MAAA,EAC5D,OAAO,OAAO,EAAE,KAAK,GAAG;AAE1B,YAAM,aAAa,KAAK,QAAQ,UAAU,KAAK,KAAK,MAAM;AAG1D,YAAM,WAAW,KAAK;AACtB,UAAI,YAAY,SAAS,MAAM;AAC3B,cAAM,WAAW,iBAAiB,KAAK,KAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,OAAO,GAAG,CAAC,CAAC,IAAI,aAAa,CAAC;AACzG,cAAM,WAAW,SAAS,aAAa,SAAS,SAAS,aAAa,IAAI;AAC1E,cAAM,aAAa,SAAS,aAAa;AAEzC,YAAI,SAAS,SAAS,YAAY;AAE9B,iBAAO,+BAA+B,kBAAkB,IAAI,YAAY,oCAAoC,UAAU,kBAAkB,QAAQ,gBAAgB,WAAW,KAAK,CAAC;AAAA,QACrL,WAAW,SAAS,SAAS,cAAc;AAEvC,gBAAM,eAAe,2DAA2D,QAAQ,iBAAiB,aAAa,cAAc,WAAW,KAAK,aAAa,MAAM,GAAG;AAC1K,iBAAO,gEAAgE,QAAQ;AAAA,sDAC7C,kBAAkB,IAAI,YAAY,8BAA8B,aAAa,4BAA4B,EAAE,YAAY,UAAU,kBAAkB,QAAQ,gBAAgB,WAAW,KAAK,CAAC;AAAA,0BACxN,YAAY;AAAA;AAAA,QAEtB;AAAA,MACJ;AAEA,aAAO,+BAA+B,kBAAkB,IAAI,YAAY,YAAY,UAAU,gBAAgB,WAAW,KAAK,CAAC;AAAA,IAEnI,KAAK;AACD,YAAM,UAAU,WAAW,KAAK,KAAK;AACrC,YAAM,YAAY,KAAK,QAAQ,UAAU,KAAK,KAAK,MAAM;AACzD,aAAO,uCAAuC,SAAS,KAAK,OAAO;AAAA,IAEvE,KAAK;AACD,YAAM,aAAa,KAAK,UAAU,WAAW,2BAA2B;AACxE,aAAO,aAAa,WAAW,KAAK,KAAK,CAAC,4BAA4B,UAAU,IAAI,kBAAkB;AAAA,IAE1G,KAAK;AACD,YAAM,WAAW,OAAO,KAAK,UAAU,WAAW,KAAK,QAAQ;AAC/D,aAAO,0FAA0F,QAAQ;AAAA,IAE7G,KAAK;AAED,YAAM,QAAQ,MAAM,QAAQ,KAAK,KAAK,IAAI,KAAK,QAAQ,CAAA;AACvD,YAAM,cAAc,MAAM,MAAM,GAAG,CAAC,EAAE,IAAI,CAAC,MAAW,QAAgB;AAClE,cAAM,MAAM,OAAO,SAAS,WAAW,OAAO,KAAK,UAAU;AAE7D,eAAO,aAAa,WAAW,GAAG,CAAC,oDAAoD,GAAG,qBAAqB,KAAK,GAAG;AAAA,MAC3H,CAAC,EAAE,KAAK,EAAE;AACV,aAAO,qCAAqC,WAAW;AAAA,IAE3D;AACI,aAAO,eAAe,kBAAkB,KAAK,WAAW,KAAK,UAAU,KAAK,KAAK,CAAC,CAAC;AAAA,EAAA;AAE/F;AAEO,SAAS,mBAAmB,SAAyB,UAAsC,eAAyB,YAAuB,OAAe;AAC7J,MAAI,CAAC,WAAW,QAAQ,WAAW,EAAG,QAAO;AAI7C,QAAM,QAAQ,QAAQ,IAAI,CAAC,MAAMC,WAAU,kBAAkB,MAAM,UAAU,eAAeA,MAAK,CAAC,EAAE,KAAK,EAAE;AAC3G,SAAO,6CAA6C,SAAS,KAAK,KAAK;AAC3E;AAIA,SAAS,WAAW,MAAsB;AACtC,QAAM,MAAM,SAAS,cAAc,KAAK;AACxC,MAAI,cAAc;AAClB,SAAO,IAAI;AACf;AAEA,SAAS,eAAe,MAAyB;AAC7C,QAAM,UAAoC;AAAA,IACtC,IAAI;AAAA,IACJ,GAAG;AAAA,IACH,GAAG;AAAA,IACH,GAAG;AAAA,IACH,IAAI;AAAA,EAAA;AAER,SAAO,QAAQ,QAAQ,GAAG,KAAK,QAAQ;AAC3C;AAIO,MAAM,iBAAiB,cAA0C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWpE,YACI,WACA,MACA,WACA,UACA,UACF;AACE,UAAM,WAAW,MAAM,WAAW,UAAU,QAAQ;AAjBxD,SAAQ,cAAkC;AAoBtC,QAAI,CAAC,KAAK,KAAK,KAAK;AAChB,WAAK,KAAK,MAAM,KAAK;AAAA,IACzB;AAGA,SAAK,aAAa,KAAK,IAAI;AAE3B,SAAK,OAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKU,aACN,WACA,UACA,UACc;AACd,WAAO;AAAA,MACH,YAAY;AAAA,QACR,YAAY,WAAW,YAAY,cAAc;AAAA,QACjD,YAAY,WAAW,YAAY,cAAc;AAAA,QACjD,eAAe,WAAW,YAAY,iBAAiB;AAAA,QACvD,gBAAgB,WAAW,YAAY,kBAAkB;AAAA,QACzD,sBAAsB,WAAW,YAAY,wBAAwB;AAAA,QACrE,kBAAkB,WAAW,YAAY,oBAAoB;AAAA,QAC7D,wBAAwB,WAAW,YAAY,0BAA0B;AAAA,QACzE,iBAAiB,WAAW,YAAY,mBAAmB;AAAA,QAC3D,uBAAuB,WAAW,YAAY,yBAAyB;AAAA,QACvE,UAAU,WAAW,YAAY,YAAY;AAAA,QAC7C,SAAS,WAAW,YAAY,WAAW;AAAA,QAC3C,WAAW,WAAW,YAAY,aAAa;AAAA,MAAA;AAAA,MAEnD,aAAa,WAAW,eAAe;AAAA,MACvC,iBAAiB,WAAW,mBAAmB;AAAA,MAC/C,UAAU,WAAW;AAAA,MACrB,aAAa,WAAW;AAAA,MACxB,kBAAkB,WAAW;AAAA,MAC7B,cAAc,WAAW;AAAA,MACzB,SAAS,WAAW;AAAA,IAAA;AAAA,EAE5B;AAAA;AAAA;AAAA;AAAA;AAAA,EAMQ,aAAa,MAAwB;AACzC,QAAI;AAEA,UAAI,CAAC,KAAK,OAAO,OAAO,KAAK,QAAQ,UAAU;AAE3C,aAAK,MAAM,KAAK;AAAA,MACpB;AACA,UAAI,CAAC,KAAK,MAAM,OAAO,KAAK,OAAO,UAAU;AACzC,cAAM,QAAQ,IAAI,MAAM,oDAAoD;AAC5E,aAAK,SAAS,OAAO,IAAI;AACzB,cAAM;AAAA,MACV;AACA,UAAI,CAAC,KAAK,kBAAkB,CAAC,MAAM,QAAQ,KAAK,cAAc,KAAK,KAAK,eAAe,WAAW,GAAG;AACjG,cAAM,QAAQ,IAAI,MAAM,yEAAyE;AACjG,aAAK,SAAS,OAAO,IAAI;AACzB,cAAM;AAAA,MACV;AAGA,WAAK,eAAe,QAAQ,CAAC,MAAMA,WAAU;AACzC,YAAI,CAAC,KAAK,QAAQ,CAAC,KAAK,eAAe,OAAO,GAAG;AAC7C,gBAAM,QAAQ,IAAI,MAAM,iCAAiCA,MAAK,2CAA2C;AACzG,eAAK,SAAS,OAAO,MAAM,EAAE,MAAM,OAAAA,QAAO;AAC1C,gBAAM;AAAA,QACV;AAAA,MACJ,CAAC;AAAA,IACL,SAAS,OAAO;AAEZ,YAAM;AAAA,IACV;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKQ,SAAS,OAAc,MAAkB,SAAqB;AAClE,QAAI,KAAK,OAAO,WAAW,OAAO,KAAK,OAAO,QAAQ,UAAU,YAAY;AACxE,YAAM,SAAS,YAAY,KAAK,MAAM,KAAK,OAAO,SAAS;AAC3D,YAAM,UAAU,MAAM;AACtB,YAAM,QAAQ,MAAM;AACpB,YAAM,OAAO;AAAA,QACT,MAAM;AAAA,UACF,KAAK,KAAK;AAAA,UACV,IAAI,KAAK;AAAA,UACT,WAAW,KAAK;AAAA,UAChB,WAAW,KAAK;AAAA,QAAA;AAAA,QAEpB,GAAI,UAAU,EAAE,YAAY,CAAA;AAAA,MAAC;AAEjC,WAAK,OAAO,QAAQ,MAAM,SAAS,QAAQ,MAAM,KAAK;AAAA,IAC1D;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKQ,kBAAkB,SAAoK,MAA2B;AAErN,UAAM,iBAAiB,KAAK,oBAAoB,OAAO;AACvD,QAAI,mBAAmB,QAAW;AAC9B,UAAI,mBAAmB,QAAQ;AAE3B,eAAO,CAAC,CAAC,KAAK,OAAO;AAAA,MACzB;AACA,aAAO;AAAA,IACX;AAGA,UAAM,iBAAiB,KAAK,OAAO,aAAa,OAAO;AACvD,QAAI,mBAAmB,QAAW;AAC9B,UAAI,OAAO,mBAAmB,YAAY,mBAAmB,QAAQ;AACjE,eAAO,CAAC,CAAC,KAAK,OAAO;AAAA,MACzB;AACA,UAAI,OAAO,mBAAmB,WAAW;AACrC,eAAO;AAAA,MACX;AAAA,IACJ;AAGA,WAAO,CAAC,CAAC,KAAK,OAAO;AAAA,EACzB;AAAA;AAAA;AAAA;AAAA,EAKQ,iBAAiB,QAAsJ,MAA2B;AAEtM,UAAM,iBAAiB,KAAK,mBAAmB,MAAM;AACrD,QAAI,mBAAmB,QAAW;AAC9B,UAAI,mBAAmB,QAAQ;AAE3B,gBAAQ,QAAA;AAAA,UACJ,KAAK;AACD,mBAAO,KAAK,qBAAqB,cAAc;AAAA,UACnD,KAAK;AACD,mBAAO,KAAK,qBAAqB,YAAY;AAAA,UACjD,KAAK;AACD,mBAAO,CAAC,CAAC,KAAK;AAAA,UAClB,KAAK;AACD,mBAAO,KAAK,qBAAqB,WAAW;AAAA,UAChD,KAAK;AAED,mBAAO,OAAO,KAAK,KAAK,uBAAuB,CAAA,CAAE,EAAE;AAAA,cAC/C,SAAO,IAAI,WAAW,KAAK,KAC3B,CAAC,CAAC,YAAY,iBAAiB,iBAAiB,WAAW,EAAE,SAAS,GAAG,KACzE,KAAK,oBAAqB,GAA4C;AAAA,YAAA;AAAA,UAE9E;AAEI,kBAAM,SAAS,MAAM,OAAO,OAAO,CAAC,EAAE,YAAA,IAAgB,OAAO,MAAM,CAAC,CAAC;AACrE,mBAAO,KAAK,sBAAsB,MAAM,MAAM;AAAA,QAAA;AAAA,MAE1D;AACA,aAAO;AAAA,IACX;AAGA,UAAM,iBAAkB,WAAW,cAAc,WAAW,gBAAgB,WAAW,gBAAgB,WAAW,aAAa,WAAW,cACpI,KAAK,OAAO,aAAa,MAAM,IAC/B;AACN,QAAI,mBAAmB,QAAW;AAC9B,UAAI,mBAAmB,QAAQ;AAE3B,gBAAQ,QAAA;AAAA,UACJ,KAAK;AACD,mBAAO,KAAK,qBAAqB,cAAc;AAAA,UACnD,KAAK;AACD,mBAAO,KAAK,qBAAqB,YAAY;AAAA,UACjD,KAAK;AACD,mBAAO,CAAC,CAAC,KAAK;AAAA,UAClB,KAAK;AACD,mBAAO,KAAK,qBAAqB,WAAW;AAAA,UAChD,KAAK;AACD,mBAAO,OAAO,KAAK,KAAK,uBAAuB,CAAA,CAAE,EAAE;AAAA,cAC/C,SAAO,IAAI,WAAW,KAAK,KAC3B,CAAC,CAAC,YAAY,iBAAiB,iBAAiB,WAAW,EAAE,SAAS,GAAG,KACzE,KAAK,oBAAqB,GAA4C;AAAA,YAAA;AAAA,UAE9E;AACI,kBAAM,SAAS,MAAM,OAAO,OAAO,CAAC,EAAE,YAAA,IAAgB,OAAO,MAAM,CAAC,CAAC;AACrE,mBAAO,KAAK,sBAAsB,MAAM,MAAM;AAAA,QAAA;AAAA,MAE1D;AACA,aAAO;AAAA,IACX;AAGA,YAAQ,QAAA;AAAA,MACJ,KAAK;AACD,eAAO,KAAK,qBAAqB,cAAc;AAAA,MACnD,KAAK;AACD,eAAO,KAAK,qBAAqB,YAAY;AAAA,MACjD,KAAK;AACD,eAAO,CAAC,CAAC,KAAK;AAAA,MAClB,KAAK;AACD,eAAO,KAAK,qBAAqB,WAAW;AAAA,MAChD,KAAK;AACD,eAAO,OAAO,KAAK,KAAK,uBAAuB,CAAA,CAAE,EAAE;AAAA,UAC/C,SAAO,IAAI,WAAW,KAAK,KAC3B,CAAC,CAAC,YAAY,iBAAiB,iBAAiB,WAAW,EAAE,SAAS,GAAG,KACzE,KAAK,oBAAqB,GAA4C;AAAA,QAAA;AAAA,MAE9E;AACI,cAAM,SAAS,MAAM,OAAO,OAAO,CAAC,EAAE,YAAA,IAAgB,OAAO,MAAM,CAAC,CAAC;AACrE,eAAO,KAAK,sBAAsB,MAAM,MAAM;AAAA,IAAA;AAAA,EAE1D;AAAA,EAEQ,SAAe;AACnB,UAAM,EAAE,UAAU,cAAc,OAAO,iBAAiB,aAAa,kBAAkB,iBAAiB,KAAK;AAC7G,UAAM,OAAO,KAAK;AAClB,UAAM,YAAY,KAAK,aAAA;AAGvB,SAAK,UAAU,YAAY;AAG3B,SAAK,cAAc,SAAS,cAAc,KAAK;AAC/C,SAAK,YAAY,YAAY,aAAa,eAAe,KAAK,SAAS,CAAC,IAAI,KAAK,aAAa,KAAK;AACnG,SAAK,YAAY,aAAa,YAAY,KAAK,GAAG;AAClD,SAAK,YAAY,aAAa,WAAW,KAAK,EAAE;AAChD,SAAK,YAAY,aAAa,OAAO,SAAS;AAG9C,QAAI,KAAK,QAAQ;AACb,WAAK,YAAY,UAAU,IAAI,oBAAoB,KAAK,MAAM,EAAE;AAAA,IACpE,WAAW,KAAK,kBAAkB;AAE9B,WAAK,YAAY,MAAM,kBAAkB,KAAK;AAAA,IAClD;AAGA,QAAI,oBAAoB,KAAK,KAAK;AAC9B,WAAK,YAAY,UAAU,IAAI,uBAAuB;AAAA,IAC1D;AAGA,UAAM,WAAW,KAAK,qBAAqB,aAAa;AACxD,QAAI,UAAU;AACV,WAAK,YAAY,UAAU,IAAI,qBAAqB;AACpD,UAAI,aAAa;AACb,aAAK,YAAY,iBAAiB,SAAS,CAAC,MAAM;AAE9C,cAAI,KAAK,cAAc,cAAc;AACjC,yBAAa,iBAAiB,MAAM,CAAC;AAAA,UACzC,OAAO;AAEH,wBAAY,MAAM,CAAC;AAAA,UACvB;AAAA,QACJ,CAAC;AAAA,MACL;AAAA,IACJ;AAGA,QAAI,KAAK,qBAAqB,iBAAiB,kBAAkB;AAC7D,WAAK,YAAY,iBAAiB,eAAe,CAAC,MAAM;AACpD,UAAE,eAAA;AACF,UAAE,gBAAA;AACF,yBAAiB,MAAM,CAAC;AAAA,MAC5B,CAAC;AAAA,IACL;AAGA,QAAI,KAAK,cAAc,UAAU;AAC7B,WAAK,iBAAiB,MAAM,UAAU,SAAS;AAAA,IACnD,WAAW,aAAa;AACpB,WAAK,oBAAoB,MAAM,QAAQ;AAAA,IAC3C,OAAO;AACH,WAAK,eAAe,MAAM,UAAU,SAAS;AAAA,IACjD;AAEA,SAAK,UAAU,YAAY,KAAK,WAAW;AAG3C,SAAK,yBAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKQ,2BAAiC;AACrC,QAAI,CAAC,KAAK,YAAa;AAEvB,UAAM,gBAAgB,KAAK,YAAY,iBAAiB,4BAA4B;AACpF,kBAAc,QAAQ,CAAA,WAAU;AAC5B,aAAO,iBAAiB,SAAS,CAAC,MAAM;AACpC,UAAE,gBAAA;AACF,cAAM,SAAS,OAAO,aAAa,cAAc;AACjD,YAAI,CAAC,OAAQ;AAEb,cAAM,UAAU,KAAK,aAAa,cAAc,kBAAkB,MAAM,IAAI,GAAG,QAAQ,oCAAoC;AAC3H,YAAI,CAAC,QAAS;AAEd,cAAM,cAAc,QAAQ,cAAc,4BAA4B;AACtE,YAAI,CAAC,YAAa;AAElB,cAAM,aAAa,YAAY,UAAU,SAAS,yBAAyB;AAE3E,YAAI,YAAY;AACZ,sBAAY,UAAU,OAAO,yBAAyB;AACtD,iBAAO,cAAc;AACrB,iBAAO,aAAa,cAAc,WAAW;AAAA,QACjD,OAAO;AACH,sBAAY,UAAU,IAAI,yBAAyB;AACnD,iBAAO,cAAc;AACrB,iBAAO,aAAa,cAAc,WAAW;AAAA,QACjD;AAAA,MACJ,CAAC;AAAA,IACL,CAAC;AAAA,EACL;AAAA,EAEQ,iBAAiB,MAAkB,UAAsC,YAAuB,OAAa;AACjH,QAAI,CAAC,KAAK,YAAa;AAEvB,UAAM,cAAc,KAAK,eAAe,CAAC,GAAG,SAAS;AACrD,UAAM,wBAAwB,YAAY,SAAS,WAAW,IAAI,SAAS,WAAW,IAAI;AAC1F,UAAM,aAAa,WAAW,QAAQ;AACtC,UAAM,aAAa,cAAc,QAAQ,+BAA+B;AACxE,UAAM,YAAY,cAAc,QAAQ,8BAA8B;AAEtE,SAAK,YAAY,YAAY;AAAA;AAAA,oDAEe,SAAS,KAAK,UAAU;AAAA,mEACT,UAAU,kBAAkB,WAAW,qBAAqB,CAAC;AAAA;AAAA;AAAA,EAG5H;AAAA,EAEQ,oBAAoB,MAAkB,UAA4C;AACtF,QAAI,CAAC,KAAK,YAAa;AAEvB,UAAM,gBAAgB,KAAK,qBAAqB;AAChD,UAAM,gBAAgB,KAAK,kBAAkB,iBAAiB,IAAI,IAC5D,mBAAmB,KAAK,eAAe,UAAU,aAAa,IAC9D;AAEN,SAAK,YAAY,YAAY;AAAA;AAAA,kBAEnB,aAAa;AAAA;AAAA;AAAA,EAG3B;AAAA,EAEQ,eAAe,MAAkB,UAAsC,YAAuB,OAAa;AAC/G,QAAI,CAAC,KAAK,YAAa;AAEvB,UAAM,gBAAgB,KAAK,qBAAqB;AAChD,UAAM,OAAO,KAAK,aAAa;AAE/B,QAAI,SAAS,MAAM;AACf,WAAK,iBAAiB,MAAM,UAAU,eAAe,SAAS;AAAA,IAClE,OAAO;AACH,WAAK,mBAAmB,MAAM,UAAU,eAAe,SAAS;AAAA,IACpE;AAAA,EACJ;AAAA,EAEQ,iBAAiB,MAAkB,UAAsC,eAAyB,YAAuB,OAAa;AAC1I,QAAI,CAAC,KAAK,YAAa;AAEvB,UAAM,WAAW,KAAK,iBAAiB,YAAY,IAAI,KAAK,KAAK,qBAAqB,YAChF,qDAAqD,KAAK,YAAY,aAAa,YAAY,EAAE,iBACjG;AAEN,UAAM,gBAAgB,KAAK,kBAAkB,iBAAiB,IAAI,IAC5D,mBAAmB,KAAK,eAAe,UAAU,eAAe,SAAS,IACzE;AAEN,UAAM,iBAAiB,KAAK,kBAAkB,kBAAkB,IAAI,IAC9D,mBAAmB,KAAK,gBAAgB,UAAU,eAAe,SAAS,IAC1E;AACN,UAAM,sBAAsB,KAAK,kBAAkB,wBAAwB,IAAI,IACzE,mBAAmB,KAAK,sBAAsB,UAAU,eAAe,SAAS,IAChF;AACN,UAAM,mBAAmB,KAAK,kBAAkB,oBAAoB,IAAI,IAClE,mBAAmB,KAAK,kBAAkB,UAAU,eAAe,SAAS,IAC5E;AACN,UAAM,kBAAkB,KAAK,kBAAkB,mBAAmB,IAAI,IAChE,mBAAmB,KAAK,iBAAiB,UAAU,eAAe,SAAS,IAC3E;AACN,UAAM,uBAAuB,KAAK,kBAAkB,yBAAyB,IAAI,IAC3E,mBAAmB,KAAK,uBAAuB,UAAU,eAAe,SAAS,IACjF;AACN,UAAM,wBAAwB,KAAK,kBAAkB,0BAA0B,IAAI,IAC7E,mBAAmB,KAAK,wBAAwB,UAAU,eAAe,SAAS,IAClF;AAEN,UAAM,UAAU,KAAK,iBAAiB,WAAW,IAAI,IAAI,KAAK,oBAAoB,IAAI,IAAI;AAE1F,UAAM,cAAc,SAAS,cAAc,KAAK;AAChD,gBAAY,YAAY;AACxB,gBAAY,aAAa,OAAO,SAAS;AAGzC,UAAM,gBAAgB,gBAAgB,SAAS,cAAc,KAAK,IAAI;AACtE,QAAI,eAAe;AACf,oBAAc,YAAY;AAC1B,oBAAc,aAAa,OAAO,SAAS;AAC3C,oBAAc,YAAY;AAAA,IAC9B;AAEA,UAAM,eAAe,SAAS,cAAc,KAAK;AACjD,iBAAa,YAAY;AACzB,iBAAa,aAAa,OAAO,SAAS;AAE1C,UAAM,cAAc,SAAS,cAAc,KAAK;AAChD,gBAAY,YAAY;AACxB,gBAAY,aAAa,OAAO,SAAS;AAEzC,UAAM,mBAAmB,SAAS,cAAc,KAAK;AACrD,qBAAiB,YAAY;AAC7B,qBAAiB,aAAa,OAAO,SAAS;AAG9C,QAAI,cAAc,OAAO;AAErB,UAAI,QAAS,kBAAiB,mBAAmB,aAAa,OAAO;AACrE,UAAI,oBAAqB,kBAAiB,mBAAmB,aAAa,mBAAmB;AAC7F,kBAAY,YAAY,gBAAgB;AACxC,UAAI,eAAgB,aAAY,mBAAmB,cAAc,cAAc;AAAA,IACnF,OAAO;AAEH,UAAI,eAAgB,aAAY,mBAAmB,aAAa,cAAc;AAC9E,UAAI,oBAAqB,kBAAiB,mBAAmB,aAAa,mBAAmB;AAC7F,UAAI,QAAS,kBAAiB,mBAAmB,aAAa,OAAO;AACrE,kBAAY,YAAY,gBAAgB;AAAA,IAC5C;AAEA,iBAAa,YAAY,WAAW;AACpC,QAAI,iBAAkB,cAAa,mBAAmB,aAAa,gBAAgB;AACnF,QAAI,gBAAiB,cAAa,mBAAmB,aAAa,eAAe;AACjF,QAAI,qBAAsB,cAAa,mBAAmB,aAAa,oBAAoB;AAG3F,UAAM,kBAAkB,wBAAwB,SAAS,cAAc,KAAK,IAAI;AAChF,QAAI,iBAAiB;AACjB,sBAAgB,YAAY;AAC5B,sBAAgB,aAAa,OAAO,SAAS;AAC7C,sBAAgB,YAAY;AAAA,IAChC;AAGA,UAAM,iBAAiB,SAAS,cAAc,KAAK;AACnD,mBAAe,YAAY;AAC3B,mBAAe,aAAa,OAAO,SAAS;AAC5C,mBAAe,YAAY,YAAY;AACvC,QAAI,gBAAiB,gBAAe,YAAY,eAAe;AAG/D,QAAI,SAAU,aAAY,mBAAmB,aAAa,QAAQ;AAClE,QAAI,cAAc,OAAO;AAErB,kBAAY,YAAY,cAAc;AACtC,UAAI,cAAe,aAAY,YAAY,aAAa;AAAA,IAC5D,OAAO;AAEH,UAAI,cAAe,aAAY,YAAY,aAAa;AACxD,kBAAY,YAAY,cAAc;AAAA,IAC1C;AAEA,SAAK,YAAY,YAAY;AAC7B,SAAK,YAAY,YAAY,WAAW;AAAA,EAC5C;AAAA,EAEQ,mBAAmB,MAAkB,UAAsC,eAAyB,YAAuB,OAAa;AAC5I,QAAI,CAAC,KAAK,YAAa;AAEvB,UAAM,aAAa,KAAK,iBAAiB,cAAc,IAAI,KAAK,KAAK,qBAAqB,UACpF,wCAAwC,WAAW,MAAM,IAAI,WAC7D;AAGN,UAAM,aAAa,KAAK,iBAAiB,cAAc,IAAI,KAAK,KAAK,aAC/D,qCAAqC,KAAK,YAAY,aAAa,uBAAuB,EAAE,KAAK,WAAW,cAAc,CAAC,WAC3H;AAEN,UAAM,gBAAgB,KAAK,kBAAkB,iBAAiB,IAAI,IAC5D,mBAAmB,KAAK,eAAe,UAAU,eAAe,SAAS,IACzE;AACN,UAAM,iBAAiB,KAAK,kBAAkB,kBAAkB,IAAI,IAC9D,mBAAmB,KAAK,gBAAgB,UAAU,eAAe,SAAS,IAC1E;AAEN,UAAM,YAAY,KAAK,iBAAiB,aAAa,IAAI,KAAK,KAAK,qBAAqB,UAAU,KAAK,OAAO,eACxG,qEAAqE,WAAW,KAAK,CAAC,cACtF;AAEN,UAAM,YAAY,SAAS,cAAc,KAAK;AAC9C,cAAU,YAAY;AACtB,cAAU,aAAa,OAAO,SAAS;AAGvC,QAAI,cAAc,OAAO;AAIrB,UAAI,UAAW,WAAU,mBAAmB,aAAa,SAAS;AAClE,YAAM,aAAa,SAAS,cAAc,KAAK;AAC/C,iBAAW,YAAY;AACvB,iBAAW,aAAa,OAAO,SAAS;AACxC,iBAAW,YAAY;AACvB,gBAAU,YAAY,UAAU;AAChC,UAAI,cAAe,WAAU,mBAAmB,aAAa,aAAa;AAC1E,UAAI,WAAY,WAAU,mBAAmB,aAAa,UAAU;AACpE,UAAI,WAAY,WAAU,mBAAmB,aAAa,UAAU;AAAA,IACxE,OAAO;AAEH,UAAI,WAAY,WAAU,mBAAmB,aAAa,UAAU;AACpE,UAAI,WAAY,WAAU,mBAAmB,aAAa,UAAU;AACpE,UAAI,cAAe,WAAU,mBAAmB,aAAa,aAAa;AAC1E,YAAM,aAAa,SAAS,cAAc,KAAK;AAC/C,iBAAW,YAAY;AACvB,iBAAW,aAAa,OAAO,SAAS;AACxC,iBAAW,YAAY;AACvB,gBAAU,YAAY,UAAU;AAChC,UAAI,UAAW,WAAU,mBAAmB,aAAa,SAAS;AAAA,IACtE;AAEA,SAAK,YAAY,YAAY;AAC7B,SAAK,YAAY,YAAY,SAAS;AAGtC,QAAI,aAAa,KAAK,OAAO,cAAc;AACvC,YAAM,SAAS,KAAK,YAAY,cAAc,uBAAuB;AACrE,UAAI,QAAQ;AACR,eAAO,iBAAiB,SAAS,CAAC,MAAM;AACpC,YAAE,gBAAA;AACF,eAAK,OAAO,aAAc,kBAAkB,MAAM,CAAe;AAAA,QACrE,CAAC;AAAA,MACL;AAAA,IACJ;AAAA,EACJ;AAAA,EAEQ,oBAAoB,MAA0B;AAClD,QAAI,CAAC,KAAK,oBAAqB,QAAO;AAEtC,UAAM,UAAU,OAAO,KAAK,KAAK,mBAAmB,EAC/C,OAAO,CAAA,QAAO;AACX,UAAI,CAAC,IAAI,WAAW,KAAK,EAAG,QAAO;AACnC,UAAI,CAAC,YAAY,iBAAiB,iBAAiB,WAAW,EAAE,SAAS,GAAG,EAAG,QAAO;AAGtF,YAAM,aAAa,IAAI,UAAU,CAAC,EAAE,YAAA;AACpC,UAAI,CAAC,KAAK,iBAAiB,YAAY,IAAI,EAAG,QAAO;AAErD,aAAO,KAAK,oBAAqB,GAA4C;AAAA,IACjF,CAAC,EACA,MAAM,GAAG,CAAC;AAEf,QAAI,QAAQ,WAAW,EAAG,QAAO;AAEjC,UAAM,UAAU,QAAQ,IAAI,CAAA,cAAa;AACrC,YAAM,WAAW,UAAU,UAAU,CAAC,EAAE,YAAA;AACxC,YAAM,OAAO,WAAW,QAAQ;AAChC,aAAO,wDAAwD,SAAS,KAAK,IAAI;AAAA,IACrF,CAAC,EAAE,KAAK,EAAE;AAEV,UAAM,aAAa,OAAO,KAAK,KAAK,mBAAmB,EAAE;AAAA,MAAO,SAC5D,IAAI,WAAW,KAAK,KACpB,CAAC,CAAC,YAAY,iBAAiB,iBAAiB,WAAW,EAAE,SAAS,GAAG,KACzE,KAAK,oBAAqB,GAA4C;AAAA,IAAA,EACxE,SAAS,IACL,oFAAoF,WAAW,MAAM,CAAC,cACtG;AAEN,WAAO,kCAAkC,OAAO,GAAG,UAAU;AAAA,EACjE;AAAA,EAEO,aAAa,WAA0C;AAE1D,WAAO,OAAO,KAAK,QAAQ,SAAS;AACpC,SAAK,OAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKO,WAAW,SAAoC;AAElD,SAAK,OAAO,EAAE,GAAG,KAAK,MAAM,GAAG,QAAA;AAG/B,QAAI,CAAC,KAAK,KAAK,KAAK;AAChB,WAAK,KAAK,MAAM,KAAK;AAAA,IACzB;AAGA,SAAK,aAAa,KAAK,IAAI;AAC3B,SAAK,OAAA;AAAA,EACT;AAAA,EAEO,aAAiC;AACpC,WAAO,KAAK;AAAA,EAChB;AAAA,EAEO,UAAgB;AACnB,QAAI,KAAK,aAAa;AAClB,WAAK,YAAY,OAAA;AACjB,WAAK,cAAc;AAAA,IACvB;AAAA,EACJ;AACJ;AAGC,SAAiB,gBAAgB;ACn2B3B,MAAM,mBAAmB,cAAgD;AAAA,EAO5E,YACI,WACA,OAAgC,CAAA,GAChC,YAA8B,CAAA,GAC9B,UACA,UACF;AAEE,UAAM,iBAAiC,OAAO,SAAS,WACjD,EAAE,MAAM,KAAA,IACP,QAAQ,OAAO,SAAS,WAAW,OAAO,CAAA;AAEjD,UAAM,WAAW,gBAAgB,WAAW,UAAU,QAAQ;AAjBlE,SAAQ,WAA4B;AACpC,SAAQ,gBAA0C;AAElD,SAAQ,gBAAoD,CAAA;AAgBxD,SAAK,SAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA;AAAA,EAMU,aACN,WACA,UACA,UACgB;AAChB,WAAO;AAAA,MACH,SAAS,WAAW,WAAW;AAAA,MAC/B,MAAM,WAAW,QAAQ;AAAA,MACzB,UAAU,WAAW,YAAY;AAAA,MACjC,SAAS,WAAW,WAAW;AAAA,MAC/B,MAAM,WAAW;AAAA,MACjB,cAAc,WAAW,gBAAgB;AAAA,MACzC,WAAW,WAAW,aAAa;AAAA,MACnC,MAAM,WAAW,QAAQ;AAAA,MACzB,SAAS,WAAW;AAAA,MACpB,KAAK,WAAW;AAAA,MAChB,WAAW,WAAW;AAAA,MACtB,WAAW,WAAW;AAAA,MACtB,QAAQ,WAAW;AAAA,MACnB,OAAO,WAAW,SAAS,WAAW;AAAA,IAAA;AAAA,EAE9C;AAAA;AAAA;AAAA;AAAA,EAKQ,gBAAoC;AACxC,WAAO,KAAK,KAAK,SAAS,UAAa,KAAK,KAAK,SAAS,OACpD,KAAK,KAAK,OACT,KAAK,KAAK,UAAU,UAAa,KAAK,KAAK,UAAU,OAAO,KAAK,KAAK,QAAQ;AAAA,EACzF;AAAA;AAAA;AAAA;AAAA,EAKQ,mBAA+B;AACnC,UAAM,eAA8B,CAAA;AAKpC,QAAI,KAAK,OAAO,QAAQ,KAAK,OAAO,iBAAiB,QAAQ;AAEzD,YAAM,cAAc,KAAK,OAAO,KAAK,KAAA,EAAO,WAAW,MAAM;AAC7D,UAAI,aAAa;AAEb,qBAAa,KAAK,EAAE,MAAM,QAAQ,OAAO,yBAAyB;AAAA,MACtE,OAAO;AACH,qBAAa,KAAK,EAAE,MAAM,QAAQ,OAAO,KAAK,OAAO,MAAM;AAAA,MAC/D;AAAA,IACJ;AAGA,UAAM,aAAa,KAAK,cAAA;AACxB,QAAI,eAAe,QAAW;AAC1B,mBAAa,KAAK,EAAE,MAAM,QAAQ,OAAO,YAAY,OAAO,QAAQ;AAAA,IACxE;AAGA,QAAI,KAAK,OAAO,QAAQ,KAAK,OAAO,iBAAiB,SAAS;AAC1D,YAAM,cAAc,KAAK,OAAO,KAAK,KAAA,EAAO,WAAW,MAAM;AAC7D,UAAI,aAAa;AACb,qBAAa,KAAK,EAAE,MAAM,QAAQ,OAAO,0BAA0B;AAAA,MACvE,OAAO;AACH,qBAAa,KAAK,EAAE,MAAM,QAAQ,OAAO,KAAK,OAAO,MAAM;AAAA,MAC/D;AAAA,IACJ;AAGA,QAAI,KAAK,OAAO,SAAS;AACrB,mBAAa,KAAK,EAAE,MAAM,QAAQ,OAAO,KAAK;AAAA,IAClD;AAGA,QAAI,aAAa,WAAW,GAAG;AAC3B,mBAAa,KAAK,EAAE,MAAM,QAAQ,OAAO,IAAI;AAAA,IACjD;AAGA,UAAM,UAAyD;AAAA,MAC3D,SAAS;AAAA,MACT,UAAU;AAAA,MACV,SAAS;AAAA,IAAA;AAIb,UAAM,aAA2F;AAAA,MAC7F,WAAW;AAAA;AAAA,MACX,aAAa;AAAA;AAAA,MACb,WAAW;AAAA;AAAA,MACX,UAAU;AAAA;AAAA,MACV,WAAW;AAAA;AAAA,MACX,QAAQ;AAAA;AAAA,MACR,WAAW;AAAA;AAAA,MACX,SAAS;AAAA;AAAA,IAAA;AAGb,UAAM,aAAyB;AAAA;AAAA,MAE3B,IAAI,eAAe,KAAK,IAAA,CAAK,IAAI,KAAK,QAAQ;AAAA,MAC9C,WAAW;AAAA,MACX,WAAW,QAAQ,KAAK,OAAO,QAAQ,QAAQ,KAAK;AAAA,MACpD,QAAQ,WAAW,KAAK,OAAO,WAAW,SAAS;AAAA,MACnD,gBAAgB;AAAA,MAChB,qBAAqB;AAAA,QACjB,UAAU,CAAC,KAAK,OAAO,YAAY,CAAC,KAAK,OAAO;AAAA,MAAA;AAAA,MAEpD,YAAY;AAAA,QACR,YAAY;AAAA,MAAA;AAAA,IAChB;AAIJ,QAAI,KAAK,OAAO,YAAY,WAAW;AACnC,iBAAW,mBAAmB;AAAA,IAClC,WAAW,KAAK,OAAO,YAAY,WAAW;AAC1C,iBAAW,mBAAmB;AAAA,IAClC,WAAW,KAAK,OAAO,YAAY,SAAS;AACxC,iBAAW,mBAAmB;AAAA,IAClC;AAEA,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAKQ,cAAc,SAA0D;AAC5E,QAAI,CAAC,QAAS,QAAO;AAErB,QAAI,OAAO,YAAY,UAAU;AAC7B,aAAO;AAAA,IACX;AAGA,UAAM,MAAM,QAAQ,YAAY,QAAQ,OAAO;AAC/C,UAAM,QAAQ,QAAQ,cAAc,QAAQ,SAAS;AACrD,UAAM,SAAS,QAAQ,YAAY,QAAQ,UAAU;AACrD,UAAM,OAAO,QAAQ,cAAc,QAAQ,QAAQ;AAGnD,UAAM,cAAc,CAAC,QAAiC;AAClD,UAAI,OAAO,QAAQ,SAAU,QAAO,GAAG,GAAG;AAC1C,aAAO;AAAA,IACX;AAGA,QAAI,YAAY,GAAG,MAAM,YAAY,KAAK,KACtC,YAAY,KAAK,MAAM,YAAY,MAAM,KACzC,YAAY,MAAM,MAAM,YAAY,IAAI,GAAG;AAC3C,aAAO,YAAY,GAAG;AAAA,IAC1B;AAGA,QAAI,QAAQ,aAAa,UAAa,QAAQ,eAAe,UACzD,YAAY,QAAQ,QAAQ,MAAM,YAAY,QAAQ,UAAU,GAAG;AACnE,aAAO,GAAG,YAAY,QAAQ,QAAQ,CAAC,IAAI,YAAY,QAAQ,UAAU,CAAC;AAAA,IAC9E;AAGA,WAAO,GAAG,YAAY,GAAG,CAAC,IAAI,YAAY,KAAK,CAAC,IAAI,YAAY,MAAM,CAAC,IAAI,YAAY,IAAI,CAAC;AAAA,EAChG;AAAA;AAAA;AAAA;AAAA,EAKQ,UAAU,KAAsD;AACpE,QAAI,QAAQ,OAAW,QAAO;AAC9B,QAAI,OAAO,QAAQ,SAAU,QAAO,GAAG,GAAG;AAC1C,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAKQ,gBAAgB,WAA4D;AAChF,QAAI,cAAc,OAAW,QAAO;AACpC,QAAI,OAAO,cAAc,SAAU,QAAO,GAAG,SAAS;AACtD,WAAO;AAAA,EACX;AAAA;AAAA;AAAA;AAAA,EAKQ,WAAiB;AACrB,SAAK,UAAU,YAAY;AAC3B,SAAK,UAAU,YAAY;AAE3B,QAAI,KAAK,OAAO,WAAW;AACvB,WAAK,UAAU,MAAM,QAAQ;AAAA,IACjC;AAGA,SAAK,aAAa,KAAK,iBAAA;AAGvB,UAAM,cAAc,SAAS,cAAc,KAAK;AAChD,gBAAY,YAAY;AACxB,SAAK,UAAU,YAAY,WAAW;AAGtC,SAAK,WAAW,IAAI,SAAS,aAAa,KAAK,UAAU;AACzD,SAAK,uBAAuB,KAAK,QAAQ;AAGzC,UAAM,cAAc,YAAY,cAAc,YAAY;AAC1D,QAAI,aAAa;AAEb,WAAK,gBAAgB,SAAS,cAAc,QAAQ;AACpD,WAAK,cAAc,OAAO,KAAK,OAAO,QAAQ;AAC9C,WAAK,cAAc,YAAY;AAC/B,WAAK,cAAc,UAAU,IAAI,eAAe,KAAK,OAAO,WAAW,SAAS,EAAE;AAClF,WAAK,cAAc,UAAU,IAAI,eAAe,KAAK,OAAO,QAAQ,QAAQ,EAAE;AAC9E,WAAK,cAAc,YAAY,KAAK,OAAO,YAAY,KAAK,OAAO,YAAY;AAG/E,YAAM,UAAU,KAAK,cAAc,KAAK,OAAO,OAAO;AACtD,UAAI,SAAS;AACT,aAAK,cAAc,MAAM,UAAU;AAAA,MACvC;AAGA,YAAM,MAAM,KAAK,UAAU,KAAK,OAAO,GAAG;AAC1C,UAAI,QAAQ,QAAW;AACnB,aAAK,cAAc,MAAM,MAAM;AAAA,MACnC;AAGA,YAAM,YAAY,KAAK,gBAAgB,KAAK,OAAO,SAAS;AAC5D,UAAI,WAAW;AACX,aAAK,cAAc,MAAM,YAAY;AAAA,MACzC;AAGA,UAAI,KAAK,OAAO,WAAW;AACvB,aAAK,cAAc,UAAU,IAAI,GAAG,KAAK,OAAO,UAAU,MAAM,GAAG,CAAC;AAAA,MACxE;AAGA,UAAI,KAAK,OAAO,WAAW,QAAQ;AAC/B,aAAK,cAAc,MAAM,SAAS;AAAA,MACtC,WAAW,KAAK,OAAO,WAAW,eAAe;AAC7C,aAAK,cAAc,MAAM,cAAc;AAAA,MAC3C,WAAW,KAAK,OAAO,WAAW,YAAY;AAE1C,aAAK,cAAc,MAAM,cAAc;AACvC,aAAK,cAAc,MAAM,cAAc;AACvC,aAAK,cAAc,MAAM,cAAc;AAAA,MAC3C;AAEA,UAAI,KAAK,OAAO,WAAW;AACvB,aAAK,cAAc,UAAU,IAAI,wBAAwB;AACzD,aAAK,cAAc,MAAM,QAAQ;AAAA,MACrC;AAEA,UAAI,KAAK,OAAO,SAAS;AACrB,aAAK,cAAc,UAAU,IAAI,qBAAqB;AAAA,MAC1D;AAEA,UAAI,KAAK,OAAO,UAAU;AACtB,aAAK,cAAc,UAAU,IAAI,sBAAsB;AAAA,MAC3D;AAGA,UAAI,WAAW,YAAY;AAG3B,UAAI,KAAK,OAAO,MAAM;AAClB,cAAM,cAAc,KAAK,OAAO,KAAK,KAAA,EAAO,WAAW,MAAM;AAC7D,YAAI,aAAa;AACb,gBAAM,WAAW,8GAA8G,KAAK,OAAO,IAAI;AAE/I,qBAAW,SAAS,QAAQ,0BAA0B,QAAQ;AAC9D,qBAAW,SAAS,QAAQ,2BAA2B,QAAQ;AAAA,QACnE;AAAA,MACJ;AAGA,YAAM,aAAa,KAAK,cAAA;AACxB,UAAI,CAAC,cAAc,WAAW,KAAA,MAAW,IAAI;AAEzC,mBAAW,SAAS,QAAQ,sEAAsE,EAAE;AACpG,mBAAW,SAAS,QAAQ,wEAAwE,EAAE;AAAA,MAC1G;AAEA,UAAI,KAAK,eAAe;AACpB,aAAK,cAAc,YAAY;AAC/B,YAAI,uBAAuB,aAAa;AACpC,eAAK,cAAc,MAAM,UAAU,YAAY,MAAM;AAAA,QACzD;AAGA,cAAM,QAAQ,KAAK;AACnB,cAAM,KAAK,YAAY,SAAS,EAAE,QAAQ,CAAA,QAAO;AAC7C,cAAI,IAAI,WAAW,mBAAmB,KAAK,IAAI,WAAW,iBAAiB,GAAG;AAC1E,kBAAM,UAAU,IAAI,GAAG;AAAA,UAC3B;AAAA,QACJ,CAAC;AAAA,MACL;AAGA,UAAI,KAAK,eAAe;AACpB,cAAM,UAAU,KAAK,cAAc,aAAa,KAAA;AAChD,cAAM,UAAU,KAAK,OAAO,QAAQ,KAAK,cAAc,cAAc,oCAAoC;AAGzG,YAAI,CAAC,WAAW,SAAS;AACrB,eAAK,cAAc,UAAU,IAAI,uBAAuB;AACxD,cAAI,CAAC,KAAK,cAAc,aAAa,YAAY,GAAG;AAEhD,kBAAMC,cAAa,KAAK,cAAA;AACxB,kBAAM,YAAYA,eAAc,KAAK,OAAO,MAAM,QAAQ,YAAY,EAAE,EAAE,KAAA,KAAU;AACpF,iBAAK,cAAc,aAAa,cAAc,SAAS;AAAA,UAC3D;AAAA,QACJ,OAAO;AACH,eAAK,cAAc,UAAU,OAAO,uBAAuB;AAAA,QAC/D;AAAA,MACJ;AAGA,kBAAY,YAAY,KAAK,aAAa;AAAA,IAC9C,OAAO;AAEH,WAAK,gBAAgB,SAAS,cAAc,QAAQ;AACpD,WAAK,cAAc,OAAO,KAAK,OAAO,QAAQ;AAC9C,WAAK,cAAc,YAAY,KAAK,iBAAA;AACpC,WAAK,cAAc,YAAY,KAAK,OAAO,YAAY,KAAK,OAAO,YAAY;AAE/E,UAAI,KAAK,OAAO,MAAM;AAClB,cAAM,WAAW,SAAS,cAAc,MAAM;AAC9C,iBAAS,YAAY;AACrB,iBAAS,YAAY,KAAK,OAAO;AACjC,aAAK,cAAc,YAAY,QAAQ;AAAA,MAC3C;AAEA,YAAM,aAAa,KAAK,cAAA;AACxB,UAAI,YAAY;AACZ,aAAK,cAAc,cAAc;AAAA,MACrC;AAGA,UAAI,CAAC,KAAK,cAAc,aAAa,UAAU,KAAK,OAAO,MAAM;AAC7D,aAAK,cAAc,UAAU,IAAI,uBAAuB;AACxD,cAAM,YAAY,cAAc;AAChC,aAAK,cAAc,aAAa,cAAc,SAAS;AAAA,MAC3D;AAEA,WAAK,UAAU,YAAY,KAAK,aAAa;AAAA,IACjD;AAGA,SAAK,aAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKQ,eAAqB;AACzB,QAAI,CAAC,KAAK,cAAe;AAEzB,UAAM,QAAQ,KAAK,OAAO,SAAS,KAAK,OAAO;AAC/C,QAAI,CAAC,MAAO;AAGZ,UAAM,UAAU,KAAK,cAAc,aAAa,KAAA;AAChD,UAAM,aAAa,CAAC,YAChB,KAAK,OAAO,QACZ,KAAK,cAAc,cAAc,gDAAgD;AAIrF,QAAI,cAAc,CAAC,SAAS;AAExB,OAAC,YAAY;AACT,YAAI;AACA,gBAAM,EAAE,aAAAC,aAAA,IAAgB,MAAM,QAAA,QAAA,EAAA,KAAA,MAAA,KAAA;AAG9B,gBAAM,mBAAmB,SAAS,cAAc,KAAK;AACrD,2BAAiB,MAAM,UAAU;AACjC,eAAK,UAAU,YAAY,gBAAgB;AAG3C,cAAI,KAAK,eAAe;AACpB,kBAAM,UAAU,IAAIA;AAAA,cAChB;AAAA,cACA;AAAA,gBACI,SAAS;AAAA,gBACT,QAAQ,KAAK;AAAA,cAAA;AAAA,cAEjB;AAAA,gBACI,WAAW;AAAA,gBACX,SAAS;AAAA,gBACT,OAAO;AAAA,cAAA;AAAA,cAEX,KAAK;AAAA,cACL,KAAK;AAAA,YAAA;AAGT,iBAAK,uBAAuB,OAAO;AAAA,UACvC;AAAA,QACJ,SAAS,OAAO;AAEZ,kBAAQ,KAAK,6DAA6D,KAAK;AAC/E,cAAI,KAAK,eAAe;AACpB,iBAAK,cAAc,aAAa,SAAS,KAAK;AAAA,UAClD;AAAA,QACJ;AAAA,MACJ,GAAA;AAAA,IACJ,OAAO;AAEH,WAAK,cAAc,aAAa,SAAS,KAAK;AAAA,IAClD;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKQ,mBAA2B;AAC/B,UAAM,UAAU,CAAC,aAAa;AAC9B,YAAQ,KAAK,eAAe,KAAK,OAAO,OAAO,EAAE;AACjD,YAAQ,KAAK,eAAe,KAAK,OAAO,IAAI,EAAE;AAE9C,QAAI,KAAK,OAAO,WAAW;AACvB,cAAQ,KAAK,wBAAwB;AAAA,IACzC;AAEA,QAAI,KAAK,OAAO,SAAS;AACrB,cAAQ,KAAK,qBAAqB;AAAA,IACtC;AAEA,QAAI,KAAK,OAAO,UAAU;AACtB,cAAQ,KAAK,sBAAsB;AAAA,IACvC;AAEA,WAAO,QAAQ,KAAK,GAAG;AAAA,EAC3B;AAAA;AAAA;AAAA;AAAA,EAMO,QAAQ,MAAoB;AAC/B,SAAK,KAAK,OAAO;AAEjB,SAAK,aAAa,KAAK,iBAAA;AAEvB,SAAK,SAAA;AAEL,SAAK,kBAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAMO,WAAW,SAA4C;AAC1D,QAAI,CAAC,QAAS;AAEd,SAAK,OAAO,UAAU;AAEtB,SAAK,SAAA;AACL,SAAK,kBAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKO,QAAQ,MAAsC;AACjD,QAAI,CAAC,KAAM;AAEX,SAAK,OAAO,OAAO;AAEnB,SAAK,SAAA;AACL,SAAK,kBAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKO,YAAY,UAAyB;AACxC,SAAK,OAAO,WAAW;AACvB,QAAI,KAAK,eAAe;AACpB,WAAK,cAAc,YAAY,YAAY,KAAK,OAAO,YAAY;AAEnE,UAAI,UAAU;AACV,aAAK,cAAc,UAAU,IAAI,sBAAsB;AAAA,MAC3D,OAAO;AACH,aAAK,cAAc,UAAU,OAAO,sBAAsB;AAAA,MAC9D;AAAA,IACJ;AAEA,SAAK,aAAa,KAAK,iBAAA;AACvB,QAAI,KAAK,UAAU;AACf,WAAK,SAAS,WAAW,KAAK,UAAU;AAAA,IAC5C;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKO,WAAW,SAAwB;AACtC,SAAK,OAAO,UAAU;AAEtB,SAAK,aAAa,KAAK,iBAAA;AAEvB,QAAI,KAAK,UAAU;AACf,WAAK,SAAS,WAAW,KAAK,UAAU;AAExC,YAAM,cAAc,KAAK,UAAU,cAAc,YAAY;AAC7D,UAAI,eAAe,KAAK,eAAe;AACnC,aAAK,cAAc,YAAY,YAAY;AAAA,MAC/C;AAAA,IACJ;AAEA,QAAI,KAAK,eAAe;AACpB,WAAK,cAAc,WAAW,KAAK,OAAO,YAAY;AACtD,UAAI,SAAS;AACT,aAAK,cAAc,UAAU,IAAI,qBAAqB;AAAA,MAC1D,OAAO;AACH,aAAK,cAAc,UAAU,OAAO,qBAAqB;AAAA,MAC7D;AAAA,IACJ;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKO,QAAQ,SAA4C;AACvD,SAAK,cAAc,KAAK,OAAO;AAC/B,QAAI,KAAK,eAAe;AACpB,WAAK,cAAc,iBAAiB,SAAS,OAAO;AAAA,IACxD;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKO,SAAS,SAA4C;AACxD,SAAK,gBAAgB,KAAK,cAAc,OAAO,CAAA,MAAK,MAAM,OAAO;AACjE,QAAI,KAAK,eAAe;AACpB,WAAK,cAAc,oBAAoB,SAAS,OAAO;AAAA,IAC3D;AAAA,EACJ;AAAA;AAAA;AAAA;AAAA,EAKQ,oBAA0B;AAE9B,SAAK,cAAc,QAAQ,CAAC,YAAyC;AACjE,UAAI,KAAK,eAAe;AACpB,aAAK,cAAc,iBAAiB,SAAS,OAAO;AAAA,MACxD;AAAA,IACJ,CAAC;AAAA,EACL;AAAA;AAAA;AAAA;AAAA;AAAA,EAMO,qBAAqB,YAA8B;AACtD,SAAK,aAAa;AAElB,QAAI,WAAW,kBAAkB,WAAW,eAAe,SAAS,GAAG;AACnE,YAAM,WAAW,WAAW,eAAe,KAAK,CAAA,SAAQ,KAAK,SAAS,MAAM;AAC5E,WAAK,KAAK,OAAO,WAAW,OAAO,SAAS,KAAK,IAAI;AAAA,IACzD;AAEA,UAAM,UAAwD;AAAA,MAC1D,MAAM;AAAA,MAAS,KAAK;AAAA,MAAS,KAAK;AAAA,MAAU,KAAK;AAAA,MAAS,MAAM;AAAA,IAAA;AAEpE,UAAM,aAAwH;AAAA,MAC1H,gBAAgB;AAAA,MAAW,cAAc;AAAA,MAAW,SAAS;AAAA,MAAU,QAAQ;AAAA,IAAA;AAEnF,SAAK,SAAS;AAAA,MACV,GAAG,KAAK;AAAA,MACR,SAAS,WAAW,WAAW,UAAU,MAAM,KAAK;AAAA,MACpD,MAAM,QAAQ,WAAW,aAAa,GAAG,KAAK;AAAA,MAC9C,UAAU,CAAC,WAAW,qBAAqB,YAAY;AAAA,IAAA;AAE3D,SAAK,SAAA;AACL,SAAK,kBAAA;AAAA,EACT;AAAA;AAAA;AAAA;AAAA,EAKO,mBAA6C;AAChD,WAAO,KAAK;AAAA,EAChB;AAAA,EAEO,UAAgB;AAGnB,QAAI,KAAK,eAAe;AACpB,WAAK,cAAc,YAAY,KAAK,cAAc,UAAU,IAAI,CAAC;AAAA,IACrE;AAEA,SAAK,WAAW;AAChB,SAAK,gBAAgB;AACrB,SAAK,gBAAgB,CAAA;AAErB,UAAM,QAAA;AAAA,EACV;AACJ;AAGC,WAAmB,gBAAgB;ACxpBpC,SAAS,oBACL,SACA,oBAA8B,CAAA,GAC9B,kBAA4B,CAAA,GACyD;AAErF,QAAM,WAAW,mBAAmB,QAAQ,aAAa,WAAW,KAAK,IAAI;AAC7E,QAAM,OAAO,mBAAmB,QAAQ,aAAa,MAAM,KAAK,IAAI;AACpE,QAAM,UAAU,mBAAmB,QAAQ,aAAa,UAAU,KAAK,IAAI;AAC3E,QAAM,UAAU,mBAAmB,QAAQ,aAAa,UAAU,KAAK,IAAI;AAG3E,QAAM,iBAAiB,EAAE,GAAG,SAAA;AAC5B,oBAAkB,QAAQ,CAAA,SAAQ;AAC9B,UAAM,YAAY,KAAK,QAAQ,YAAY,KAAK,EAAE,YAAA;AAClD,UAAM,QAAQ,QAAQ,aAAa,SAAS;AAC5C,QAAI,UAAU,MAAM;AAEhB,UAAI;AACA,uBAAe,IAAI,IAAI,KAAK,MAAM,KAAK;AAAA,MAC3C,QAAQ;AACJ,uBAAe,IAAI,IAAI;AAAA,MAC3B;AAAA,IACJ;AAAA,EACJ,CAAC;AAGD,QAAM,aAAa,EAAE,GAAG,KAAA;AACxB,kBAAgB,QAAQ,CAAA,SAAQ;AAC5B,UAAM,YAAY,KAAK,QAAQ,YAAY,KAAK,EAAE,YAAA;AAClD,UAAM,QAAQ,QAAQ,aAAa,SAAS;AAC5C,QAAI,UAAU,MAAM;AAEhB,UAAI;AACA,mBAAW,IAAI,IAAI,KAAK,MAAM,KAAK;AAAA,MACvC,QAAQ;AACJ,mBAAW,IAAI,IAAI;AAAA,MACvB;AAAA,IACJ;AAAA,EACJ,CAAC;AAED,SAAO;AAAA,IACH,WAAW;AAAA,IACX,MAAM;AAAA,IACN,UAAU,OAAO,KAAK,OAAO,EAAE,SAAS,IAAI,UAAU;AAAA,IACtD,UAAU,OAAO,KAAK,OAAO,EAAE,SAAS,IAAI,UAAU;AAAA,EAAA;AAE9D;AAKA,SAAS,mBAAmB,KAAkB;AAC1C,MAAI;AACA,WAAO,KAAK,MAAM,GAAG;AAAA,EACzB,SAAS,OAAO;AAEZ,QAAI;AACA,UAAI,QAAQ;AACZ,cAAQ,MAAM,QAAQ,oBAAoB,CAAC,UAAU;AACjD,eAAO,MAAM,QAAQ,cAAc,KAAK,EAC5B,QAAQ,cAAc,KAAK,EAC3B,QAAQ,cAAc,KAAK,EAC3B,QAAQ,aAAa,KAAK;AAAA,MAC1C,CAAC;AACD,aAAO,KAAK,MAAM,KAAK;AAAA,IAC3B,SAAS,aAAa;AAClB,UAAI;AACA,cAAM,gBAAgB,IAAI,QAAQ,OAAO,KAAK,EACrB,QAAQ,OAAO,KAAK,EACpB,QAAQ,OAAO,KAAK;AAC7C,eAAO,KAAK,MAAM,aAAa;AAAA,MACnC,SAAS,YAAY;AACjB,eAAO,CAAA;AAAA,MACX;AAAA,IACJ;AAAA,EACJ;AACJ;AAWO,SAAS,kBACZ,gBACA,aACA,SAIkB;AAElB,QAAM,kBAAkB,eAAe,IAAI,WAAW;AACtD,MAAI,iBAAiB;AACjB,WAAO;AAAA,EACX;AAEA,QAAM,oBAAoB,SAAS,qBAAqB,CAAA;AACxD,QAAM,kBAAkB,SAAS,mBAAmB,CAAA;AAAA,EAEpD,MAAM,yBAAyB,YAAY;AAAA,IAGvC,oBAAoB;AAEhB,YAAM,aAAa,oBAAoB,MAAM,mBAAmB,eAAe;AAG/E,WAAK,WAAW,IAAI;AAAA,QAChB;AAAA,QACA,WAAW;AAAA,QACX,WAAW;AAAA,QACX,WAAW;AAAA,QACX,WAAW;AAAA,MAAA;AAAA,IAEnB;AAAA,IAEA,uBAAuB;AAEnB,UAAI,KAAK,YAAY,OAAQ,KAAK,SAAiB,YAAY,YAAY;AACtE,aAAK,SAAiB,QAAA;AAAA,MAC3B;AACA,WAAK,WAAW;AAAA,IACpB;AAAA;AAAA;AAAA;AAAA,IAMA,cAA6B;AACzB,aAAO,KAAK;AAAA,IAChB;AAAA;AAAA;AAAA;AAAA,IAKA,QAAQ,MAAiB;AACrB,UAAI,KAAK,YAAY,KAAK,SAAS,MAAM;AACrC,eAAO,OAAO,KAAK,SAAS,MAAM,IAAI;AAAA,MAC1C;AAAA,IACJ;AAAA;AAAA;AAAA;AAAA,IAKA,YAAY,UAAqB;AAC7B,UAAI,KAAK,YAAY,KAAK,SAAS,QAAQ;AACvC,eAAO,OAAO,KAAK,SAAS,QAAQ,QAAQ;AAAA,MAChD;AAAA,IACJ;AAAA,EAAA;AAIJ,MAAI;AACA,mBAAe,OAAO,aAAa,gBAAgB;AAAA,EACvD,SAAS,OAAO;AAEZ,UAAM,oBAAoB,eAAe,IAAI,WAAW;AACxD,QAAI,mBAAmB;AAEnB,aAAO;AAAA,IACX;AAEA,YAAQ,MAAM,sCAAsC,WAAW,MAAM,KAAK;AAC1E,UAAM;AAAA,EACV;AAEA,SAAO;AACX;;;;;AC9KA,kBAAkB,YAAY,eAAe;AAAA,EACzC,mBAAmB,CAAC,WAAW,QAAQ,YAAY,WAAW,QAAQ,gBAAgB,aAAa,MAAM;AAAA,EACzG,iBAAiB,CAAC,MAAM;AAC5B,CAAC;ACZA,cAAsB,cAAc;ACgB9B,MAAM,oBAAoB,cAAkD;AAAA,EAM/E,YACI,WACA,MACA,YAA+B,CAAA,GAC/B,UACA,UACF;AACE,UAAM,WAAW,MAAM,WAAW,UAAU,QAAQ;AAZxD,SAAQ,iBAAqC;AAC7C,SAAQ,YAAqB;AAC7B,SAAQ,cAAoD;AAC5D,SAAQ,cAAoD;AAUxD,SAAK,aAAA;AACL,SAAK,qBAAA;AAAA,EACT;AAAA,EAEU,aACN,WACA,UACA,UACiB;AACjB,WAAO;AAAA,MACH,WAAW,WAAW,aAAa;AAAA,MACnC,SAAS,WAAW,WAAW;AAAA,MAC/B,OAAO,WAAW,SAAS;AAAA,MAC3B,QAAQ,WAAW,UAAU;AAAA,MAC7B,OAAO,WAAW,SAAS;AAAA,MAC3B,WAAW,WAAW;AAAA,IAAA;AAAA,EAE9B;AAAA,EAEQ,uBAA6B;AACjC,SAAK,iBAAiB,SAAS,cAAc,KAAK;AAClD,SAAK,eAAe,YAAY;AAChC,SAAK,eAAe,UAAU,IAAI,gBAAgB,KAAK,OAAO,SAAS,EAAE;AAEzE,QAAI,KAAK,OAAO,OAAO;AACnB,WAAK,eAAe,UAAU,IAAI,oBAAoB;AAAA,IAC1D;AACA,QAAI,KAAK,OAAO,WAAW;AACvB,WAAK,eAAe,UAAU,IAAI,KAAK,OAAO,SAAS;AAAA,IAC3D;AAEA,SAAK,eAAe,aAAa,QAAQ,SAAS;AAGlD,QAAI,OAAO,KAAK,KAAK,YAAY,UAAU;AACvC,WAAK,eAAe,cAAc,KAAK,KAAK;AAAA,IAChD,OAAO;AACH,WAAK,eAAe,YAAY,KAAK,KAAK,OAAO;AAAA,IACrD;AAAA,EACJ;AAAA,EAEQ,eAAqB;AACzB,UAAM,SAAS,KAAK,KAAK,UAAU,KAAK;AAExC,QAAI,KAAK,OAAO,YAAY,SAAS;AACjC,aAAO,iBAAiB,cAAc,MAAM,KAAK,cAAc;AAC/D,aAAO,iBAAiB,cAAc,MAAM,KAAK,cAAc;AAAA,IACnE,WAAW,KAAK,OAAO,YAAY,SAAS;AACxC,aAAO,iBAAiB,SAAS,MAAM,KAAK,QAAQ;AACpD,eAAS,iBAAiB,SAAS,CAAC,MAAM;AACtC,YAAI,KAAK,aAAa,CAAC,OAAO,SAAS,EAAE,MAAc,KACnD,CAAC,KAAK,gBAAgB,SAAS,EAAE,MAAc,GAAG;AAClD,eAAK,KAAA;AAAA,QACT;AAAA,MACJ,CAAC;AAAA,IACL,WAAW,KAAK,OAAO,YAAY,SAAS;AACxC,aAAO,iBAAiB,SAAS,MAAM,KAAK,MAAM;AAClD,aAAO,iBAAiB,QAAQ,MAAM,KAAK,MAAM;AAAA,IACrD;AAAA,EACJ;AAAA,EAEQ,eAAqB;AACzB,QAAI,KAAK,aAAa;AAClB,mBAAa,KAAK,WAAW;AAC7B,WAAK,cAAc;AAAA,IACvB;AACA,SAAK,cAAc,WAAW,MAAM,KAAK,QAAQ,KAAK,OAAO,KAAK;AAAA,EACtE;AAAA,EAEQ,eAAqB;AACzB,QAAI,KAAK,aAAa;AAClB,mBAAa,KAAK,WAAW;AAC7B,WAAK,cAAc;AAAA,IACvB;AACA,SAAK,cAAc,WAAW,MAAM,KAAK,QAAQ,KAAK,OAAO,KAAK;AAAA,EACtE;AAAA,EAEQ,oBAAmD;AACvD,UAAM,SAAS,KAAK,KAAK,UAAU,KAAK;AACxC,UAAM,aAAa,OAAO,sBAAA;AAC1B,UAAM,cAAc,KAAK,eAAgB,sBAAA;AACzC,UAAM,SAAS,KAAK,OAAO,UAAU;AAErC,QAAI,MAAM;AACV,QAAI,OAAO;AAEX,YAAQ,KAAK,OAAO,WAAA;AAAA,MAChB,KAAK;AACD,cAAM,WAAW,MAAM,YAAY,SAAS;AAC5C,eAAO,WAAW,QAAQ,WAAW,QAAQ,YAAY,SAAS;AAClE;AAAA,MACJ,KAAK;AACD,cAAM,WAAW,SAAS;AAC1B,eAAO,WAAW,QAAQ,WAAW,QAAQ,YAAY,SAAS;AAClE;AAAA,MACJ,KAAK;AACD,cAAM,WAAW,OAAO,WAAW,SAAS,YAAY,UAAU;AAClE,eAAO,WAAW,OAAO,YAAY,QAAQ;AAC7C;AAAA,MACJ,KAAK;AACD,cAAM,WAAW,OAAO,WAAW,SAAS,YAAY,UAAU;AAClE,eAAO,WAAW,QAAQ;AAC1B;AAAA,IAAA;AAIR,UAAM,KAAK,IAAI,GAAG,KAAK,IAAI,KAAK,OAAO,cAAc,YAAY,SAAS,CAAC,CAAC;AAC5E,WAAO,KAAK,IAAI,GAAG,KAAK,IAAI,MAAM,OAAO,aAAa,YAAY,QAAQ,CAAC,CAAC;AAE5E,WAAO,EAAE,KAAK,MAAM,OAAO,SAAS,MAAM,OAAO,OAAO,QAAA;AAAA,EAC5D;AAAA,EAEO,OAAa;AAChB,QAAI,KAAK,aAAa,CAAC,KAAK,eAAgB;AAE5C,aAAS,KAAK,YAAY,KAAK,cAAc;AAC7C,SAAK,eAAe,MAAM,aAAa;AACvC,SAAK,eAAe,MAAM,UAAU;AAGpC,UAAM,EAAE,KAAK,SAAS,KAAK,kBAAA;AAC3B,SAAK,eAAe,MAAM,MAAM,GAAG,GAAG;AACtC,SAAK,eAAe,MAAM,OAAO,GAAG,IAAI;AACxC,SAAK,eAAe,MAAM,aAAa;AAGvC,0BAAsB,MAAM;AACxB,WAAK,gBAAgB,UAAU,IAAI,sBAAsB;AAAA,IAC7D,CAAC;AAED,SAAK,YAAY;AAAA,EACrB;AAAA,EAEO,OAAa;AAChB,QAAI,CAAC,KAAK,aAAa,CAAC,KAAK,eAAgB;AAE7C,SAAK,eAAe,UAAU,OAAO,sBAAsB;AAE3D,eAAW,MAAM;AACb,UAAI,KAAK,kBAAkB,KAAK,eAAe,YAAY;AACvD,aAAK,eAAe,WAAW,YAAY,KAAK,cAAc;AAAA,MAClE;AAAA,IACJ,GAAG,GAAG;AAEN,SAAK,YAAY;AAAA,EACrB;AAAA,EAEO,SAAe;AAClB,QAAI,KAAK,WAAW;AAChB,WAAK,KAAA;AAAA,IACT,OAAO;AACH,WAAK,KAAA;AAAA,IACT;AAAA,EACJ;AAAA,EAEO,WAAW,SAAqC;AACnD,SAAK,KAAK,UAAU;AACpB,QAAI,KAAK,gBAAgB;AACrB,WAAK,eAAe,YAAY;AAChC,UAAI,OAAO,YAAY,UAAU;AAC7B,aAAK,eAAe,cAAc;AAAA,MACtC,OAAO;AACH,aAAK,eAAe,YAAY,OAAO;AAAA,MAC3C;AAAA,IACJ;AAAA,EACJ;AAAA,EAEO,aAAiC;AACpC,WAAO,KAAK;AAAA,EAChB;AAAA,EAEO,UAAgB;AACnB,QAAI,KAAK,YAAa,cAAa,KAAK,WAAW;AACnD,QAAI,KAAK,YAAa,cAAa,KAAK,WAAW;AACnD,SAAK,KAAA;AACL,SAAK,iBAAiB;AAAA,EAC1B;AACJ;AAGC,YAAoB,gBAAgB;AC5MrC,kBAAkB,aAAa,gBAAgB;AAAA,EAC3C,mBAAmB,CAAC,aAAa,WAAW,SAAS,UAAU,SAAS,WAAW;AAAA,EACnF,iBAAiB,CAAC,SAAS;AAC/B,CAAC;;;;;"}